{"version":3,"sources":["webpack://imsdk/webpack/bootstrap","webpack://imsdk/./src/lim/log/Logger.ts","webpack://imsdk/./src/lim/common/utils.ts","webpack://imsdk/./src/lim/core/ImClient.ts","webpack://imsdk/./src/lim/common/Fetch.ts","webpack://imsdk/./src/lim.ts","webpack://imsdk/./src/lim/codec/ByteBuffer.ts","webpack://imsdk/./src/lim/pack/LoginPack.ts","webpack://imsdk/./src/lim/common/WebToolkit.ts","webpack://imsdk/(webpack)/buildin/global.js","webpack://imsdk/./node_modules/isomorphic-fetch/fetch-npm-browserify.js","webpack://imsdk/./node_modules/whatwg-fetch/fetch.js","webpack://imsdk/./node_modules/websocket/lib/browser.js","webpack://imsdk/./node_modules/es5-ext/global.js","webpack://imsdk/./node_modules/websocket/lib/version.js","webpack://imsdk/./src/lim/model/RequestBase.ts","webpack://imsdk/./src/lim/model/RequestParams.ts","webpack://imsdk/./src/lim/core/HttpApi.ts","webpack://imsdk/./src/lim/model/ApiResponse.ts","webpack://imsdk/./src/lim/common/Command.ts","webpack://imsdk/./src/lim/pack/MessagePack.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__spreadArrays","this","il","arguments","length","Array","k","a","j","jl","Logger","info","message","optionalParams","_i","debug","console","apply","Date","toISOString","infoTag","tag","error","errorTag","trace","e","Error","undefined","stack","Beans","to","target","JSON","parse","stringify","bean","json","copy","replace","replaceJSON","v","toMapByKey","arrs","result","forEach","strEmpty","strNotEmpty","isEmpty","str","uuid","Math","random","toString","slice","getTime","__assign","assign","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","iterator","op","TypeError","pop","push","imClient","getLen","limLogin","ImClient","sleep","State","TimeUnit","Logger_1","ByteBuffer_1","LoginPack_1","WebToolkit_1","websocket_1","RequestBase_1","RequestParams_1","HttpApi_1","utils_1","Command_1","MessagePack_1","firstMonitorSocket","second","Unit","Second","_a","setTimeout","url","version","clientType","listeners","state","INIT","lastOfflineMessageSequence","offlineMessageList","httpUrl","getRequestBase","RequestBase","appId","imei","userId","getUserId","isInit","CONNECTED","getRequestParams","RequestParams","userSign","init","callback","self","deviceInfo","resp","ip","port","req","success","err","conn","_this","_b","getDeviceInfo","system","browser","browserVersion","imeiLength","isFailed","data","LoginPack","onerror","onSocketErrorEvent","errorHandler","onclose","CLOSING","onSocketCloseEvent","reason","onmessage","evt","bytebuffer","byteBuffer","int32","unpack","command","bodyLen","msgBody","vstring","log","SystemCommand","MUTUAL_LOGIN","onMutualLogin","UserEventCommand","USER_ONLINE_STATUS_CHANGE_NOTIFY_SYNC","onUserOnlineStatusChangeSync","USER_ONLINE_STATUS_CHANGE_NOTIFY","onUserOnlineStatusChangeNotify","USER_CUSTOM_STATUS_CHANGE_NOTIFY","onUserCustomStatusChangeNotify","MessageCommand","MSG_P2P","onP2PMessage","GroupCommand","MSG_GROUP","onGroupMessage","MSG_ACK","onP2PMessageAck","GROUP_MSG_ACK","onGroupMessageAck","MSG_P2P_SYNC","onP2PMessageSync","MSG_GROUP_SYNC","onGroupMessageSync","MSG_RECEIVE_ACK","onP2PMessageReceiveAck","MSG_RECALL_ACK","onMessageRecalledAck","MSG_RECALL_NOTIFY","onMessageRecalledNotify","MSG_RECALL_SYNC","onMessageRecalledSync","MSG_READED_SYNC","onMessageReadSync","MSG_GROUP_READED_SYNC","onGroupMessageReadSync","MSG_READED_RECEIPT","onMessageReadReceipt","MSG_GROUP_READED_RECEIPT","onGroupMessageReadNotify","ConversationEventCommand","CONVERSATION_UPDATE","onConversationUpdate","CONVERSATION_DELETE","onConversationDelete","CREATED_GROUP","onCreateGroup","UPDATED_GROUP","onGroupInfoUpdate","DESTROY_GROUP","onDestroyGroup","TRANSFER_GROUP","onTransferGroup","MUTE_GROUP","onMuteGroup","UNMUTE_GROUP","onUnMuteGroup","ADDED_MEMBER","onAddGroupMemberNotify","DELETED_MEMBER","onRemoveGroupMemberNotify","UPDATED_MEMBER","onGroupMemberInfoUpdate","SPEAK_GROUP_MEMBER","onMuteGroupMember","FriendShipCommand","FRIEND_ADD","onAddFriend","FRIEND_REQUEST","onFriendRequest","FRIEND_UPDATE","onUpdateFriendInfo","FRIEND_DELETE","onDeleteFriend","FRIEND_ALL_DELETE","onDeleteAllFriend","FRIEND_BLACK_ADD","onFriendBlackAdd","FRIEND_BLACK_DELETE","onFriendBlackDel","FRIEND_REQUEST_APPROVER","onFriendRequestApprove","FRIEND_REQUEST_READ","onFriendRequestRead","onTestMessage","heartbeatLoop","loadOfflineMessage","onLogin","buildMessagePack","messagePack","jsonData","pack","buildJSONMessagePack","param","index","error_1","CLOSED","RECONNECTING","onSocketReConnectEvent","onSocketReConnectSuccessEvent","getSingleUserInfo","queryImUserPage","currentPage","pageSize","nickName","tel","modifyUserInfo","syncGetUserInfo","userIds","getUserInfo","getUserSequence","subscribeUserOnlineStatus","subTime","subUserIds","setUserCustomerStatus","customText","customStatus","queryFriendOnlineStatus","queryUserOnlineStatus","userIdList","getAllFriend","fromId","addFriend","toId","remark","addSource","addWording","extra","toItem","updateFriend","friendInfo","deleteFriend","deleteAllFriend","getAllFriendShip","getRelation","checkFriend","checkType","addBlack","deleteBlack","syncFriendshipList","lastSequence","maxLimit","syncConversationSet","deleteConversation","conversationId","updateConversation","isMute","isTop","createGroup","groupType","groupName","mute","applyJoinType","introduction","notification","photo","maxMemberCount","groupMemberList","identifier","ownerId","member","getCurUserJoinedGroup","limit","offset","memberId","getGroupInfo","groupId","updateGroupInfo","updateInfo","destroyGroup","transferGroup","forbidSendMessage","enableSendMsg","sendGroupMsgByInterface","messageId","messageBody","badgeMode","messageTime","messageLifeTime","messageRandom","floor","syncJoinedGroup","addGroupMember","members","removeGroupMember","updateGroupMemberInfo","alias","role","setGroupMemberSpeak","speakDate","approveFriendRequest","id","status","getFriendRequest","readFriendShipRequestReq","start","now","loop","pingPack","PING","send","createP2PTextMessage","text","MessagePack","buildTextMessagePack","createGroupTextMessage","buildGroupTextMessagePack","sendP2PMessage","p2pPack","sendGroupMessage","sendP2PMessageReceiveAck","messageKey","messageSequence","sendP2PMessageReadAck","MSG_READED","conversationType","senGroupMessageReadAck","MSG_GROUP_READED","doMessageRecall","MSG_RECALL","offMessages","operate","isSucceed","maxSequence","dataList","onOfflineMessage","completed","sendP2PMsgByInterface","queryP2pMessageHistory","isGt","startTime","endTime","queryGroupMessageHistory","w3cwebsocket","binaryType","tr","clearTimeout","onopen","readyState","OPEN","onSocketConnectEvent","loginPack","LOGIN","LOGIN_ACK","len","charCodeAt","Fetch","getFetchToolkit","global","fetch","im","ImClient_1","uni","ByteBuffer","arrayBuf","Type_Byte","Type_Short","Type_UShort","Type_Int32","Type_UInt32","Type_String","Type_VString","Type_Int64","Type_Float","Type_Double","Type_ByteArray","_offset","_list","_littleEndian","_org_buf","constructor","DataView","Uint8Array","buffer","bigEndian","littleEndianfunction","utf8Write","view","setUint8","val","getInt32","splice","uint32","getUint32","blength","string","utf8Read","utf8Length","chr","end","byte","getUint8","String","fromCharCode","vlen","int64","getFloat64","float","getFloat32","double","byteArray","arr","packWithHead","ifHead","ArrayBuffer","setUint32","setInt8","setInt16","setUint16","setInt32","setFloat64","setFloat32","indx","getAvailable","byteLength","Fetch_1","Base64","_keyStr","encode","u","_utf8_encode","isNaN","charAt","decode","indexOf","_utf8_decode","c2","c3","WebToolkit","getBrowserInfo","agent","navigator","userAgent","toLowerCase","REGSTR_EDGE","REGSTR_IE","OLD_IE","REGSTR_FF","REGSTR_CHROME","REGSTR_SAF","REGSTR_OPERA","code","split","match","getWxappInfo","getReactNativeInfo","getUniAppInfo","loadJS","script","document","createElement","fn","type","exist","getElementsByTagName","children","dom","outerHTML","onreadystatechange","onload","src","appendChild","getIpInfoByFetch","request","method","headers","response","res","currentCity","eval","getIpInfoByInsertScript","window","getIpInfo","base64Encode","base64Decode","Function","globalThis","support","Blob","viewClasses","isArrayBufferView","isView","obj","normalizeName","test","normalizeValue","iteratorFor","items","shift","Headers","map","append","isArray","header","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","buf","set","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","_bodyArrayBuffer","arrayBuffer","isConsumed","byteOffset","readAsText","chars","join","readArrayBufferAsText","formData","oldValue","has","keys","values","entries","methods","Request","input","options","upcased","credentials","signal","toUpperCase","referrer","cache","reParamSearch","form","trim","bytes","decodeURIComponent","Response","bodyInit","ok","statusText","clone","redirectStatuses","redirect","RangeError","location","DOMException","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","substr","line","parts","responseURL","responseText","ontimeout","onabort","open","href","fixUrl","withCredentials","responseType","setRequestHeader","addEventListener","removeEventListener","polyfill","_globalThis","NativeWebSocket","WebSocket","MozWebSocket","websocket_version","W3CWebSocket","uri","protocols","prop","naiveFallback","configurable","__global__","ApiResponse_1","HttpApi","params","reqUrl","paramStr","setQueryConfig","httpFetch","_str","substring","webfetch","response2ApiResponse","apiResponse","msg","ApiResponse","succeed","RangeInteger","min","max","range","content","buildCustomerMessagePack"],"mappings":"yBACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QA0Df,OArDAF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,+BCjFrD,IAAIC,EAAkBC,MAAQA,KAAKD,gBAAmB,WAClD,IAAK,IAAID,EAAI,EAAG/B,EAAI,EAAGkC,EAAKC,UAAUC,OAAQpC,EAAIkC,EAAIlC,IAAK+B,GAAKI,UAAUnC,GAAGoC,OACxE,IAAItB,EAAIuB,MAAMN,GAAIO,EAAI,EAA3B,IAA8BtC,EAAI,EAAGA,EAAIkC,EAAIlC,IACzC,IAAK,IAAIuC,EAAIJ,UAAUnC,GAAIwC,EAAI,EAAGC,EAAKF,EAAEH,OAAQI,EAAIC,EAAID,IAAKF,IAC1DxB,EAAEwB,GAAKC,EAAEC,GACjB,OAAO1B,GAEXhB,EAAQsB,YAAa,EACrB,IAAIsB,EAAwB,WACxB,SAASA,KAiDT,OA/CAA,EAAOC,KAAO,SAAUC,GAEpB,IADA,IAAIC,EAAiB,GACZC,EAAK,EAAGA,EAAKX,UAAUC,OAAQU,IACpCD,EAAeC,EAAK,GAAKX,UAAUW,GAEnCJ,EAAOK,OACPC,QAAQL,KAAKM,MAAMD,QAAShB,EAAe,EAAC,IAAIkB,MAAOC,cAAgB,MAAQP,GAAUC,KAGjGH,EAAOU,QAAU,SAAUC,EAAKT,GAE5B,IADA,IAAIC,EAAiB,GACZC,EAAK,EAAGA,EAAKX,UAAUC,OAAQU,IACpCD,EAAeC,EAAK,GAAKX,UAAUW,GAEnCJ,EAAOK,OACPC,QAAQL,KAAKM,MAAMD,QAAShB,EAAe,EAAC,IAAIkB,MAAOC,cAAgB,IAAME,EAAM,MAAQT,GAAUC,KAG7GH,EAAOY,MAAQ,SAAUV,GAErB,IADA,IAAIC,EAAiB,GACZC,EAAK,EAAGA,EAAKX,UAAUC,OAAQU,IACpCD,EAAeC,EAAK,GAAKX,UAAUW,GAEnCJ,EAAOK,OACPC,QAAQM,MAAML,MAAMD,QAAShB,EAAe,EAAC,IAAIkB,MAAOC,cAAgB,MAAQP,GAAUC,KAGlGH,EAAOa,SAAW,SAAUF,EAAKT,GAE7B,IADA,IAAIC,EAAiB,GACZC,EAAK,EAAGA,EAAKX,UAAUC,OAAQU,IACpCD,EAAeC,EAAK,GAAKX,UAAUW,GAEnCJ,EAAOK,OACPC,QAAQM,MAAML,MAAMD,QAAShB,EAAe,EAAC,IAAIkB,MAAOC,cAAgB,IAAME,EAAM,OAAST,GAAUC,KAG/GH,EAAOc,MAAQ,SAAUC,GACjBf,EAAOK,QACHU,aAAaC,MACbV,QAAQM,MAAMG,EAAEb,QAAU,aAAsBe,IAAZF,EAAEG,MAAsBH,EAAEG,MAAQ,KAGtEZ,QAAQM,MAAMG,KAI1Bf,EAAOK,OAAQ,EACRL,EAlDgB,GAoD3B5C,EAAiB,QAAI4C,G,6BC5DrB5C,EAAQsB,YAAa,EACrB,IAAIyC,EAAuB,WACvB,SAASA,KAkDT,OAhDAA,EAAMC,GAAK,SAAUC,GACjB,OAAOC,KAAKC,MAAMD,KAAKE,UAAUH,KAErCF,EAAMM,KAAO,SAAUC,GACnB,OAAOJ,KAAKC,MAAMG,IAEtBP,EAAMQ,KAAO,SAAUN,GACnB,OAAOF,EAAMC,GAAGC,IAEpBF,EAAMS,QAAU,SAAUP,EAAQQ,GAC9B,IAAIzD,EAAI+C,EAAMC,GAAGC,GACjB,IAAK,IAAIS,KAAKD,EACVzD,EAAE0D,GAAKD,EAAYC,GAEvB,OAAO1D,GAEX+C,EAAMY,WAAa,SAAUC,EAAMnD,GAC/B,IAAIoD,EAAS,GAMb,OALAD,EAAKE,SAAQ,SAAUJ,GACfA,EAAE3C,eAAeN,KACjBoD,EAAOpD,GAAOiD,MAGfG,GAEXd,EAAMO,KAAO,SAAUL,GACnB,OAAOC,KAAKE,UAAUH,IAE1BF,EAAMgB,SAAW,SAAU9C,GACvB,QAASA,GAEb8B,EAAMiB,YAAc,SAAU/C,GAC1B,OAAQA,GAEZ8B,EAAMkB,QAAU,SAAUC,GACtB,OAAY,OAARA,GACQ,KAARA,QACQrB,IAARqB,GACe,IAAfA,EAAI5C,QAOZyB,EAAMoB,KAAO,WACT,OAAwB,GAAhBC,KAAKC,UAAeC,SAAS,IAAIC,MAAM,IAAK,IAAInC,MAAOoC,UAAUF,YAEtEvB,EAnDe,GAqD1B/D,EAAiB,QAAI+D,G,6BCtDrB,IAAI0B,EAAYtD,MAAQA,KAAKsD,UAAa,WAStC,OARAA,EAAW7E,OAAO8E,QAAU,SAAStE,GACjC,IAAK,IAAIa,EAAG/B,EAAI,EAAGyB,EAAIU,UAAUC,OAAQpC,EAAIyB,EAAGzB,IAE5C,IAAK,IAAI8B,KADTC,EAAII,UAAUnC,GACOU,OAAOkB,UAAUC,eAAe1B,KAAK4B,EAAGD,KACzDZ,EAAEY,GAAKC,EAAED,IAEjB,OAAOZ,IAEK+B,MAAMhB,KAAME,YAE5BsD,EAAaxD,MAAQA,KAAKwD,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUhF,GAAS,IAAMiF,EAAKL,EAAUM,KAAKlF,IAAW,MAAOwC,GAAKuC,EAAOvC,IACpF,SAAS2C,EAASnF,GAAS,IAAMiF,EAAKL,EAAiB,MAAE5E,IAAW,MAAOwC,GAAKuC,EAAOvC,IACvF,SAASyC,EAAKvB,GAJlB,IAAe1D,EAIa0D,EAAO0B,KAAON,EAAQpB,EAAO1D,QAJ1CA,EAIyD0D,EAAO1D,MAJhDA,aAAiB2E,EAAI3E,EAAQ,IAAI2E,GAAE,SAAUG,GAAWA,EAAQ9E,OAITqF,KAAKL,EAAWG,GAClGF,GAAML,EAAYA,EAAU5C,MAAMyC,EAASC,GAAc,KAAKQ,YAGlEI,EAAetE,MAAQA,KAAKsE,aAAgB,SAAUb,EAASc,GAC/D,IAAsGC,EAAGC,EAAGxF,EAAGyF,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP5F,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO6F,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAER,KAAMc,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,mBAAXlG,SAA0B4F,EAAE5F,OAAOmG,UAAY,WAAa,OAAOjF,OAAU0E,EACvJ,SAASM,EAAKxF,GAAK,OAAO,SAAU+C,GAAK,OACzC,SAAc2C,GACV,GAAIV,EAAG,MAAM,IAAIW,UAAU,mCAC3B,KAAOR,GAAG,IACN,GAAIH,EAAI,EAAGC,IAAMxF,EAAY,EAARiG,EAAG,GAAST,EAAU,OAAIS,EAAG,GAAKT,EAAS,SAAOxF,EAAIwF,EAAU,SAAMxF,EAAEf,KAAKuG,GAAI,GAAKA,EAAEP,SAAWjF,EAAIA,EAAEf,KAAKuG,EAAGS,EAAG,KAAKd,KAAM,OAAOnF,EAE3J,OADIwF,EAAI,EAAGxF,IAAGiG,EAAK,CAAS,EAARA,EAAG,GAAQjG,EAAED,QACzBkG,EAAG,IACP,KAAK,EAAG,KAAK,EAAGjG,EAAIiG,EAAI,MACxB,KAAK,EAAc,OAAXP,EAAEC,QAAgB,CAAE5F,MAAOkG,EAAG,GAAId,MAAM,GAChD,KAAK,EAAGO,EAAEC,QAASH,EAAIS,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKP,EAAEI,IAAIK,MAAOT,EAAEG,KAAKM,MAAO,SACxC,QACI,KAAMnG,EAAI0F,EAAEG,MAAM7F,EAAIA,EAAEkB,OAAS,GAAKlB,EAAEA,EAAEkB,OAAS,KAAkB,IAAV+E,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEP,EAAI,EAAG,SACjG,GAAc,IAAVO,EAAG,MAAcjG,GAAMiG,EAAG,GAAKjG,EAAE,IAAMiG,EAAG,GAAKjG,EAAE,IAAM,CAAE0F,EAAEC,MAAQM,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYP,EAAEC,MAAQ3F,EAAE,GAAI,CAAE0F,EAAEC,MAAQ3F,EAAE,GAAIA,EAAIiG,EAAI,MAC7D,GAAIjG,GAAK0F,EAAEC,MAAQ3F,EAAE,GAAI,CAAE0F,EAAEC,MAAQ3F,EAAE,GAAI0F,EAAEI,IAAIM,KAAKH,GAAK,MACvDjG,EAAE,IAAI0F,EAAEI,IAAIK,MAChBT,EAAEG,KAAKM,MAAO,SAEtBF,EAAKX,EAAKrG,KAAKuF,EAASkB,GAC1B,MAAOnD,GAAK0D,EAAK,CAAC,EAAG1D,GAAIiD,EAAI,EAAK,QAAUD,EAAIvF,EAAI,EACtD,GAAY,EAARiG,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAElG,MAAOkG,EAAG,GAAKA,EAAG,QAAK,EAAQd,MAAM,GArB9BH,CAAK,CAACzE,EAAG+C,OAwB7D1E,EAAQsB,YAAa,EACrBtB,EAAQyH,SAAWzH,EAAQ0H,OAAS1H,EAAQ2H,SAAW3H,EAAQ4H,SAAW5H,EAAQ6H,MAAQ7H,EAAQ8H,WAAQ,EAC1G,IAcIA,EASAC,EAvBAC,EAAW,EAAQ,GACnBC,EAAe,EAAQ,GACvBC,EAAc,EAAQ,GACtBC,EAAe,EAAQ,GACvBC,EAAc,EAAQ,IACtBC,EAAgB,EAAQ,IACxBC,EAAkB,EAAQ,IAC1BC,EAAY,EAAQ,IACpBC,EAAU,EAAQ,GAClBC,EAAY,EAAQ,IACpBC,EAAgB,EAAQ,IAGxBC,GAAqB,GAEzB,SAAWb,GACPA,EAAMA,EAAY,KAAI,GAAK,OAC3BA,EAAMA,EAAkB,WAAI,GAAK,aACjCA,EAAMA,EAAiB,UAAI,GAAK,YAChCA,EAAMA,EAAoB,aAAI,GAAK,eACnCA,EAAMA,EAAe,QAAI,GAAK,UAC9BA,EAAMA,EAAc,OAAI,GAAK,SANjC,CAOGA,EAAQ9H,EAAQ8H,QAAU9H,EAAQ8H,MAAQ,KAE7C,SAAWC,GACPA,EAASA,EAAiB,OAAI,KAAQ,SACtCA,EAASA,EAAsB,YAAI,GAAK,cAF5C,CAGGA,IAAaA,EAAW,KAC3B/H,EAAQ6H,MAAQ,SAAUe,EAAQC,GAE9B,YADa,IAATA,IAAmBA,EAAOd,EAASe,QAChCnD,OAAU,OAAQ,OAAQ,GAAQ,WACrC,OAAOc,EAAYtE,MAAM,SAAU4G,GAC/B,MAAO,CAAC,EAAc,IAAI/C,SAAQ,SAAUC,EAASa,GAC7CkC,YAAW,WACP/C,MACD2C,EAASC,cAKhC,IAAIjB,EAA0B,WAC1B,SAASA,IACLzF,KAAK8G,IAAM,GACX9G,KAAK+G,QAAU,EACf/G,KAAKgH,WAAa,EAClBhH,KAAKiH,UAAY,KACjBjH,KAAKkH,MAAQvB,EAAMwB,KACnBnH,KAAKoH,2BAA6B,EAClCpH,KAAKqH,mBAAqB,IAAIjH,MAC9BJ,KAAKsH,QAAU,GAqyCnB,OAhyCA7B,EAAS9F,UAAU4H,eAAiB,WAChC,OAAO,IAAIrB,EAAcsB,YAAYxH,KAAKyH,MAAOzH,KAAKgH,WAAYhH,KAAK0H,KAAM1H,KAAK2H,SAKtFlC,EAAS9F,UAAUiI,UAAY,WAC3B,OAAO5H,KAAK2H,QAKhBlC,EAAS9F,UAAUkI,OAAS,WACxB,OAAO7H,KAAKkH,OAASvB,EAAMmC,WAK/BrC,EAAS9F,UAAUoI,iBAAmB,WAClC,OAAO,IAAI5B,EAAgB6B,cAAchI,KAAKyH,MAAOzH,KAAK2H,OAAQ3H,KAAKiI,WAY3ExC,EAAS9F,UAAUuI,KAAO,SAAUZ,EAASG,EAAOE,EAAQM,EAAUhB,EAAWkB,GAC7E,OAAO3E,EAAUxD,UAAM,OAAQ,GAAQ,WACnC,IAAIoI,EAAMC,EAAiBC,EAAMC,EAAIC,EAAMC,EAAK7B,EAAI8B,EAASC,EAAKC,EAC9DC,EAAQ7I,KACZ,OAAOsE,EAAYtE,MAAM,SAAU8I,GAC/B,OAAQA,EAAGlE,OACP,KAAK,EAWD,OAVAwD,EAAOpI,KACPqI,EAAarC,EAAsB,QAAE+C,gBACrCX,EAAKd,QAAUA,EACfc,EAAKX,MAAQA,EACbW,EAAKnB,UAAYA,EACjBmB,EAAKV,KAAOW,EAAWW,OAAS,IAAMX,EAAWY,QAAU,IAAMZ,EAAWa,eAC5Ed,EAAKe,WAAatL,EAAQ0H,OAAO6C,EAAKV,MACtCU,EAAKT,OAASA,EACd3H,KAAKiI,SAAWA,EAChBjI,KAAKmJ,WAAaf,EAAKe,WAClB9C,EAAiB,QAAEvD,QAAQ9C,KAAK8G,MACrCjB,EAAkB,QAAEnF,KAAK,mBAAoB2H,GAEtC,CAAC,EADF,IAAIjC,EAAmB,QAAEpG,KAAKsH,SACXpJ,KAAK,cAAe,GAAI,CACzC8I,WAAYhH,KAAKgH,WACjBS,MAAOzH,KAAKyH,MACZE,OAAQ3H,KAAK2H,WAN6B,CAAC,EAAa,GAUpE,KAAK,EAGD,IAFAW,EAAOQ,EAAGjE,QAEDuE,WAEL,OADAvD,EAAkB,QAAEnF,KAAK,iBAClB,CAAC,GAEZ6H,EAAKD,EAAKe,KAAKd,GACfC,EAAOF,EAAKe,KAAKb,KACjBxI,KAAK8G,IAAM,QAAUyB,EAAK,IAAMC,EAAO,MACvCM,EAAGlE,MAAQ,EACf,KAAK,EAED,OADA6D,EAAM,IAAI1C,EAAYuD,UAAUlB,EAAKX,MAAOW,EAAKT,OAAQ,GAClD,CAAC,EAAa9J,EAAQ2H,SAAS4C,EAAKtB,IAAK2B,EAAKL,IACzD,KAAK,EAED,OADAxB,EAAKkC,EAAGjE,OAAQ6D,EAAU9B,EAAG8B,QAASC,EAAM/B,EAAG+B,IAAKC,EAAOhC,EAAGgC,KACzDF,GACAlC,IACDA,GAAqB,GAGzBoC,EAAKW,QAAU,SAAUlI,GACrBwE,EAAkB,QAAEnF,KAAK,oBAAqBW,GAEe,mBAAlDxD,EAAQyH,SAAS2B,UAAUuC,oBAClC3L,EAAQyH,SAAS2B,UAAUuC,mBAAmBnI,GAGlDwH,EAAMY,aAAapI,EAAOoH,IAE9BG,EAAKc,QAAU,SAAUlI,GACrBqE,EAAkB,QAAEnF,KAAK,wBACrB0H,EAAKlB,OAASvB,EAAMgE,SAKqC,mBAAlD9L,EAAQyH,SAAS2B,UAAU2C,oBAClC/L,EAAQyH,SAAS2B,UAAU2C,qBAG/Bf,EAAMY,aAAa,IAAIhI,MAAMD,EAAEqI,QAASpB,IARpCI,EAAMa,QAAQ,WAUtBd,EAAKkB,UAAY,SAAUC,GAEvB,IAAIC,EAAa,IAAIlE,EAAsB,QAAEiE,EAAIV,MAC7CY,EAAaD,EAAWE,QAAQA,QAAQC,SACxCC,EAAUH,EAAW,GACrBI,EAAUJ,EAAW,GAErBK,EADSN,EAAWO,QAAQ,KAAMF,GAASF,SAC1B,GACrBpJ,QAAQyJ,IAAI,cAAgBF,GAExBF,IAAY9D,EAAUmE,cAAcC,aAEoB,mBAA7C7M,EAAQyH,SAAS2B,UAAU0D,eAElC9M,EAAQyH,SAAS2B,UAAU0D,cAAcL,GAGxCF,IAAY9D,EAAUsE,iBAAiBC,sCAE2B,mBAA5DhN,EAAQyH,SAAS2B,UAAU6D,8BAClCjN,EAAQyH,SAAS2B,UAAU6D,6BAA6BR,GAGvDF,IAAY9D,EAAUsE,iBAAiBG,iCAE6B,mBAA9DlN,EAAQyH,SAAS2B,UAAU+D,gCAClCnN,EAAQyH,SAAS2B,UAAU+D,+BAA+BV,GAGzDF,IAAY9D,EAAUsE,iBAAiBK,iCAE6B,mBAA9DpN,EAAQyH,SAAS2B,UAAUiE,gCAClCrN,EAAQyH,SAAS2B,UAAUiE,+BAA+BZ,GAGzDF,IAAY9D,EAAU6E,eAAeC,QAEa,mBAA5CvN,EAAQyH,SAAS2B,UAAUoE,cAElCxN,EAAQyH,SAAS2B,UAAUoE,aAAaf,GAGvCF,IAAY9D,EAAUgF,aAAaC,UAEiB,mBAA9C1N,EAAQyH,SAAS2B,UAAUuE,gBAElC3N,EAAQyH,SAAS2B,UAAUuE,eAAelB,GAGzCF,IAAY9D,EAAU6E,eAAeM,QACgB,mBAA/C5N,EAAQyH,SAAS2B,UAAUyE,iBAElC7N,EAAQyH,SAAS2B,UAAUyE,gBAAgBpB,GAG1CF,IAAY9D,EAAUgF,aAAaK,cAEoB,mBAAjD9N,EAAQyH,SAAS2B,UAAU2E,mBAElC/N,EAAQyH,SAAS2B,UAAU2E,kBAAkBtB,GAG5CF,IAAY9D,EAAU6E,eAAeU,aACiB,mBAAhDhO,EAAQyH,SAAS2B,UAAU6E,kBAElCjO,EAAQyH,SAAS2B,UAAU6E,iBAAiBxB,GAG3CF,IAAY9D,EAAUgF,aAAaS,eACqB,mBAAlDlO,EAAQyH,SAAS2B,UAAU+E,oBAElCnO,EAAQyH,SAAS2B,UAAU+E,mBAAmB1B,GAG7CF,IAAY9D,EAAU6E,eAAec,gBACuB,mBAAtDpO,EAAQyH,SAAS2B,UAAUiF,wBAElCrO,EAAQyH,SAAS2B,UAAUiF,uBAAuB5B,GAGjDF,IAAY9D,EAAU6E,eAAegB,eACqB,mBAApDtO,EAAQyH,SAAS2B,UAAUmF,sBAElCvO,EAAQyH,SAAS2B,UAAUmF,qBAAqB9B,GAG/CF,IAAY9D,EAAU6E,eAAekB,kBACwB,mBAAvDxO,EAAQyH,SAAS2B,UAAUqF,yBAElCzO,EAAQyH,SAAS2B,UAAUqF,wBAAwBhC,GAGlDF,IAAY9D,EAAU6E,eAAeoB,gBACsB,mBAArD1O,EAAQyH,SAAS2B,UAAUuF,uBAElC3O,EAAQyH,SAAS2B,UAAUuF,sBAAsBlC,GAGhDF,IAAY9D,EAAU6E,eAAesB,gBACkB,mBAAjD5O,EAAQyH,SAAS2B,UAAUyF,mBAElC7O,EAAQyH,SAAS2B,UAAUyF,kBAAkBpC,GAG5CF,IAAY9D,EAAUgF,aAAaqB,sBAEyB,mBAAtD9O,EAAQyH,SAAS2B,UAAU2F,wBAElC/O,EAAQyH,SAAS2B,UAAU2F,uBAAuBtC,GAGjDF,IAAY9D,EAAU6E,eAAe0B,mBACqB,mBAApDhP,EAAQyH,SAAS2B,UAAU6F,sBAElCjP,EAAQyH,SAAS2B,UAAU6F,qBAAqBxC,GAG/CF,IAAY9D,EAAUgF,aAAayB,yBAE2B,mBAAxDlP,EAAQyH,SAAS2B,UAAU+F,0BAElCnP,EAAQyH,SAAS2B,UAAU+F,yBAAyB1C,GAGnDF,IAAY9D,EAAU2G,yBAAyBC,oBACW,mBAApDrP,EAAQyH,SAAS2B,UAAUkG,sBAElCtP,EAAQyH,SAAS2B,UAAUkG,qBAAqB7C,GAG/CF,IAAY9D,EAAU2G,yBAAyBG,oBACW,mBAApDvP,EAAQyH,SAAS2B,UAAUoG,sBAElCxP,EAAQyH,SAAS2B,UAAUoG,qBAAqB/C,GAG/CF,IAAY9D,EAAUgF,aAAagC,cACgB,mBAA7CzP,EAAQyH,SAAS2B,UAAUsG,eAElC1P,EAAQyH,SAAS2B,UAAUsG,cAAcjD,GAGxCF,IAAY9D,EAAUgF,aAAakC,cACoB,mBAAjD3P,EAAQyH,SAAS2B,UAAUwG,mBAElC5P,EAAQyH,SAAS2B,UAAUwG,kBAAkBnD,GAG5CF,IAAY9D,EAAUgF,aAAaoC,cACiB,mBAA9C7P,EAAQyH,SAAS2B,UAAU0G,gBAElC9P,EAAQyH,SAAS2B,UAAU0G,eAAerD,GAGzCF,IAAY9D,EAAUgF,aAAasC,eACkB,mBAA/C/P,EAAQyH,SAAS2B,UAAU4G,iBAElChQ,EAAQyH,SAAS2B,UAAU4G,gBAAgBvD,GAG1CF,IAAY9D,EAAUgF,aAAawC,WACc,mBAA3CjQ,EAAQyH,SAAS2B,UAAU8G,aAElClQ,EAAQyH,SAAS2B,UAAU8G,YAAYzD,GAGtCF,IAAY9D,EAAUgF,aAAa0C,aACgB,mBAA7CnQ,EAAQyH,SAAS2B,UAAUgH,eAElCpQ,EAAQyH,SAAS2B,UAAUgH,cAAc3D,GAGxCF,IAAY9D,EAAUgF,aAAa4C,aACyB,mBAAtDrQ,EAAQyH,SAAS2B,UAAUkH,wBAElCtQ,EAAQyH,SAAS2B,UAAUkH,uBAAuB7D,GAGjDF,IAAY9D,EAAUgF,aAAa8C,eAC4B,mBAAzDvQ,EAAQyH,SAAS2B,UAAUoH,2BAElCxQ,EAAQyH,SAAS2B,UAAUoH,0BAA0B/D,GAGpDF,IAAY9D,EAAUgF,aAAagD,eAC0B,mBAAvDzQ,EAAQyH,SAAS2B,UAAUsH,yBAElC1Q,EAAQyH,SAAS2B,UAAUsH,wBAAwBjE,GAGlDF,IAAY9D,EAAUgF,aAAakD,mBACoB,mBAAjD3Q,EAAQyH,SAAS2B,UAAUwH,mBAElC5Q,EAAQyH,SAAS2B,UAAUwH,kBAAkBnE,GAG5CF,IAAY9D,EAAUoI,kBAAkBC,WACS,mBAA3C9Q,EAAQyH,SAAS2B,UAAU2H,aAElC/Q,EAAQyH,SAAS2B,UAAU2H,YAAYtE,GAGtCF,IAAY9D,EAAUoI,kBAAkBG,eACa,mBAA/ChR,EAAQyH,SAAS2B,UAAU6H,iBAElCjR,EAAQyH,SAAS2B,UAAU6H,gBAAgBxE,GAG1CF,IAAY9D,EAAUoI,kBAAkBK,cACgB,mBAAlDlR,EAAQyH,SAAS2B,UAAU+H,oBAElCnR,EAAQyH,SAAS2B,UAAU+H,mBAAmB1E,GAG7CF,IAAY9D,EAAUoI,kBAAkBO,cACY,mBAA9CpR,EAAQyH,SAAS2B,UAAUiI,gBAElCrR,EAAQyH,SAAS2B,UAAUiI,eAAe5E,GAGzCF,IAAY9D,EAAUoI,kBAAkBS,kBACe,mBAAjDtR,EAAQyH,SAAS2B,UAAUmI,mBAElCvR,EAAQyH,SAAS2B,UAAUmI,kBAAkB9E,GAG5CF,IAAY9D,EAAUoI,kBAAkBW,iBACc,mBAAhDxR,EAAQyH,SAAS2B,UAAUqI,kBAElCzR,EAAQyH,SAAS2B,UAAUqI,iBAAiBhF,GAG3CF,IAAY9D,EAAUoI,kBAAkBa,oBACc,mBAAhD1R,EAAQyH,SAAS2B,UAAUuI,kBAElC3R,EAAQyH,SAAS2B,UAAUuI,iBAAiBlF,GAG3CF,IAAY9D,EAAUoI,kBAAkBe,wBACoB,mBAAtD5R,EAAQyH,SAAS2B,UAAUyI,wBAElC7R,EAAQyH,SAAS2B,UAAUyI,uBAAuBpF,GAGjDF,IAAY9D,EAAUoI,kBAAkBiB,oBACiB,mBAAnD9R,EAAQyH,SAAS2B,UAAU2I,qBAElC/R,EAAQyH,SAAS2B,UAAU2I,oBAAoBtF,GAIK,mBAA7CzM,EAAQyH,SAAS2B,UAAU4I,eAClChS,EAAQyH,SAAS2B,UAAU4I,cAAcvF,IAIrDtK,KAAK4I,KAAOA,EACZ5I,KAAKkH,MAAQvB,EAAMmC,UAEnB9H,KAAK8P,cAAc9P,KAAK4I,MAEjB,CAAC,EAAa5I,KAAK+P,uBAhSL,CAAC,EAAa,GAiSvC,KAAK,EAQD,OANAjH,EAAGjE,OAE+C,mBAAvChH,EAAQyH,SAAS2B,UAAU+I,SAClCnS,EAAQyH,SAAS2B,UAAU+I,QAAQhQ,KAAK2H,QAE5CQ,EAASC,GACF,CAAC,EAAa,GACzB,KAAK,EACDvC,EAAkB,QAAExE,MAAMsH,aAAiC,EAASA,EAAIhI,SACxEmI,EAAGlE,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,WAWhCa,EAAS9F,UAAUsQ,iBAAmB,SAAU7F,EAAS8F,GACrD,IAAIC,EAAWpO,KAAKE,UAAUiO,GAC1B7F,EAAUxM,EAAQ0H,OAAO4K,GACzBC,EAAO,IAAItK,EAAsB,QAAE,KAAM,GAU7C,OATAsK,EAAKlG,MAAME,GACNF,MAAMlK,KAAK+G,SACXmD,MAAMlK,KAAKgH,YACXkD,MAAM,GACNA,MAAMlK,KAAKyH,OACXyC,MAAMlK,KAAKmJ,YACXe,MAAMG,GACNE,QAAQvK,KAAK0H,KAAM1H,KAAKmJ,YACxBoB,QAAQ4F,EAAU9F,GAChB+F,GAQX3K,EAAS9F,UAAU0Q,qBAAuB,SAAUjG,EAAS8F,GAEzD,IAAII,EAAQ7R,OAAO8E,OAAO,GAAI2M,EAAalQ,KAAKuH,kBAC5C4I,EAAWpO,KAAKE,UAAUqO,GAC1BjG,EAAUxM,EAAQ0H,OAAO4K,GACzBC,EAAO,IAAItK,EAAsB,QAAE,KAAM,GAU7C,OATAsK,EAAKlG,MAAME,GACNF,MAAMlK,KAAK+G,SACXmD,MAAMlK,KAAKgH,YACXkD,MAAM,GACNA,MAAMlK,KAAKyH,OACXyC,MAAMlK,KAAKmJ,YACXe,MAAMG,GACNE,QAAQvK,KAAK0H,KAAM1H,KAAKmJ,YACxBoB,QAAQ4F,EAAU9F,GAChB+F,GAGX3K,EAAS9F,UAAU8J,aAAe,SAAUpI,EAAOoH,GAC/C,OAAOjF,EAAUxD,UAAM,OAAQ,GAAQ,WACnC,IAAIuQ,EAAO3J,EAAI8B,EAASC,EAAW6H,EACnC,OAAOlM,EAAYtE,MAAM,SAAU8I,GAC/B,OAAQA,EAAGlE,OACP,KAAK,EAGD,GAAI5E,KAAKkH,OAASvB,EAAM8K,QAAUzQ,KAAKkH,OAASvB,EAAMgE,QAClD,MAAO,CAAC,GAEZ3J,KAAKkH,MAAQvB,EAAM+K,aAC8C,mBAAtD7S,EAAQyH,SAAS2B,UAAU0J,wBAClC9S,EAAQyH,SAAS2B,UAAU0J,yBAE/BJ,EAAQ,EACRzH,EAAGlE,MAAQ,EACf,KAAK,EACD,OAAM2L,EAAQ,GACP,CAAC,EAAa1S,EAAQ6H,MAAM,IADT,CAAC,EAAa,GAE5C,KAAK,EACDoD,EAAGjE,OACHiE,EAAGlE,MAAQ,EACf,KAAK,EAGD,OAFAkE,EAAGhE,KAAKO,KAAK,CAAC,EAAG,EAAG,CAAE,IACtBQ,EAAkB,QAAEnF,KAAK,kBAClB,CAAC,EAAa7C,EAAQ2H,SAASxF,KAAK8G,IAAK2B,EAAKzI,OACzD,KAAK,EAED,OADA4G,EAAKkC,EAAGjE,OAAQ6D,EAAU9B,EAAG8B,QAASC,EAAM/B,EAAG+B,IAAY/B,EAAGgC,KAC1DF,GACwE,mBAA7D7K,EAAQyH,SAAS2B,UAAU2J,+BAClC/S,EAAQyH,SAAS2B,UAAU2J,gCAExB,CAAC,KAEZ/K,EAAkB,QAAEnF,KAAKiI,GAClB,CAAC,EAAa,IACzB,KAAK,EAGD,OAFA6H,EAAU1H,EAAGjE,OACbgB,EAAkB,QAAEnF,KAAK8P,GAClB,CAAC,EAAa,GACzB,KAAK,EAED,OADAD,IACO,CAAC,EAAa,GACzB,KAAK,EAED,OADAvQ,KAAK0J,QAAQ,qBACN,CAAC,WAM5BjE,EAAS9F,UAAU+J,QAAU,SAAUG,GAC/B7J,KAAKkH,OAASvB,EAAM8K,SAGxBzQ,KAAKkH,MAAQvB,EAAM8K,OACnB5K,EAAkB,QAAEnF,KAAK,4BAA8BmJ,GACvD7J,KAAK4I,UAAOlH,EACZ1B,KAAK2H,OAAS,GAE+C,mBAAlD9J,EAAQyH,SAAS2B,UAAUuC,oBAClC3L,EAAQyH,SAAS2B,UAAU2C,uBAQnCnE,EAAS9F,UAAUkR,kBAAoB,SAAUlJ,GAC7C,IAAIkB,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,+BAAgC2K,EAAMd,mBAAoB,CAAEJ,OAAQA,SAYhGlC,EAAS9F,UAAUmR,gBAAkB,SAAUC,EAAaC,EAAUC,EAAUC,GAC5E,IAAIrI,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAQlCb,EAPU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,6BAA8B2K,EAAMd,mBAAoB,CACxEgJ,YAAaA,EACbC,SAAUA,EACVC,SAAUA,EACVC,IAAKA,SAUjBzL,EAAS9F,UAAUwR,eAAiB,SAAUA,GAC1C,IAAItI,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,4BAA6B2K,EAAMd,mBAAoBoJ,QASnF1L,EAAS9F,UAAUyR,gBAAkB,SAAUzJ,GAC3C,OAAOnE,EAAUxD,UAAM,OAAQ,GAAQ,WAEnC,OAAOsE,EAAYtE,MAAM,SAAU4G,GAE/B,MAAO,CAAC,EADF,IAAIR,EAAmB,QAAEpG,KAAKsH,SACVpJ,KAAK,yBAA0B8B,KAAK+H,mBAAoB,CAAEsJ,QAAS1J,YASzGlC,EAAS9F,UAAU2R,YAAc,SAAUD,GACvC,IAAIxI,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,yBAA0B2K,EAAMd,mBAAoB,CAAEsJ,QAASA,SAO3F5L,EAAS9F,UAAU4R,gBAAkB,WACjC,IAAI1I,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAMlCb,EALU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,wBAAyB2K,EAAMd,mBAAoB,CACnEJ,OAAQkB,EAAMlB,OACdF,MAAOoB,EAAMpB,aAWzBhC,EAAS9F,UAAU6R,0BAA4B,SAAUH,EAASI,GAC9D,IAAI5I,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAQlCb,EAPU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,kCAAmC2K,EAAMd,mBAAoB,CAC7EJ,OAAQkB,EAAMlB,OACdF,MAAOoB,EAAMpB,MACbiK,WAAYL,EACZI,QAASA,SAarBhM,EAAS9F,UAAUgS,sBAAwB,SAAUC,EAAYC,GAC7D,IAAIhJ,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAQlCb,EAPU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,8BAA+B2K,EAAMd,mBAAoB,CACzEJ,OAAQkB,EAAMlB,OACdF,MAAOoB,EAAMpB,MACbmK,WAAYA,EACZC,aAAcA,SAQ1BpM,EAAS9F,UAAUmS,wBAA0B,WACzC,IAAIjJ,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAKlCb,EAJU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,gCAAiC2K,EAAMd,mBAAoB,CAC3EJ,OAAQkB,EAAMlB,cAU1BlC,EAAS9F,UAAUoS,sBAAwB,SAAUV,GACjD,IAAIxI,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAKlCb,EAJU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,8BAA+B2K,EAAMd,mBAAoB,CACzEiK,WAAYX,SAQxB5L,EAAS9F,UAAUsS,aAAe,WAC9B,IAAIpJ,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,+BAAgC2K,EAAMd,mBAAoB,CAAEmK,OAAQrJ,EAAMlB,cAatGlC,EAAS9F,UAAUwS,UAAY,SAAUC,EAAMC,EAAQC,EAAWC,EAAYC,GAC1E,IAAI3J,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,wBAAyB2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,OAAQ8K,OAAQ,CAAEL,KAAMA,EAAMC,OAAQA,EAAQC,UAAWA,EAAWC,WAAYA,EAAYC,MAAOA,IAAW3J,EAAMtB,wBAS5N9B,EAAS9F,UAAU+S,aAAe,SAAUC,GACxC,IAAI9J,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,2BAA4B2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,OAAQ8K,OAAQE,GAAc9J,EAAMtB,wBAS/I9B,EAAS9F,UAAUiT,aAAe,SAAUR,GACxC,IAAIvJ,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,2BAA4B2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,OAAQyK,KAAMA,GAAQvJ,EAAMtB,wBASvI9B,EAAS9F,UAAUkT,gBAAkB,WACjC,IAAIhK,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,8BAA+B2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,QAAUkB,EAAMtB,wBAO9H9B,EAAS9F,UAAUmT,iBAAmB,WAClC,IAAIjK,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,+BAAgC2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,QAAUkB,EAAMtB,wBAS/H9B,EAAS9F,UAAUoT,YAAc,SAAUX,GACvC,IAAIvJ,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,0BAA2B2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,OAAQyK,KAAMA,GAAQvJ,EAAMtB,wBAUtI9B,EAAS9F,UAAUqT,YAAc,SAAUZ,EAAMa,GAC7C,IAAIpK,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,0BAA2B2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,OAAQyK,KAAMA,EAAMa,UAAWA,GAAapK,EAAMtB,wBAS5J9B,EAAS9F,UAAUuT,SAAW,SAAUd,GACpC,IAAIvJ,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,uBAAwB2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,OAAQyK,KAAMA,GAAQvJ,EAAMtB,wBASnI9B,EAAS9F,UAAUwT,YAAc,SAAUf,GACvC,IAAIvJ,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,0BAA2B2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,OAAQyK,KAAMA,GAAQvJ,EAAMtB,wBAUtI9B,EAAS9F,UAAUyT,mBAAqB,SAAUC,EAAcC,GAC5D,IAAIzK,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,iCAAkC2K,EAAMd,mBAAoBzE,EAAS,CAAE+P,aAAcA,EAAcC,SAAUA,GAAYzK,EAAMtB,wBAU3J9B,EAAS9F,UAAU4T,oBAAsB,SAAUF,EAAcC,GAC7D,IAAIzK,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,oCAAqC2K,EAAMd,mBAAoBzE,EAAS,CAAE+P,aAAcA,EAAcC,SAAUA,GAAYzK,EAAMtB,wBAU9J9B,EAAS9F,UAAU6T,mBAAqB,SAAUC,GAC9C,IAAI5K,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,mCAAoC2K,EAAMd,mBAAoBzE,EAAS,CAAEmQ,eAAgBA,EAAgBvB,OAAQrJ,EAAMlB,QAAUkB,EAAMtB,wBAWnK9B,EAAS9F,UAAU+T,mBAAqB,SAAUD,EAAgBE,EAAQC,GACtE,IAAI/K,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,mCAAoC2K,EAAMd,mBAAoBzE,EAAS,CAAEmQ,eAAgBA,EAAgBE,OAAQA,EAAQC,MAAOA,EAAO1B,OAAQrJ,EAAMlB,QAAUkB,EAAMtB,wBAiBjM9B,EAAS9F,UAAUkU,YAAc,SAAUC,EAAWC,EAAWC,EAAMC,EAAeC,EAAcC,EAAcC,EAAOC,EAAgBC,GACrI,IAAIzL,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,qBAAsBoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEwQ,UAAWA,EAAWC,UAAWA,EAAWC,KAAMA,EAAMC,cAAeA,EAAeC,aAAcA,EAAcC,aAAcA,EAAcC,MAAOA,EAAOC,eAAgBA,EAAgBG,QAAS3L,EAAMlB,OAAQ8M,OAAQH,GAAmBzL,EAAMtB,wBAUjY9B,EAAS9F,UAAU+U,sBAAwB,SAAUZ,EAAWa,EAAOC,GACnE,IAAI/L,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,wBAAyB2K,EAAMd,mBAAoBzE,EAAS,CAAEuR,SAAUhM,EAAMlB,OAAQmM,UAAWA,EAAWa,MAAOA,EAAOC,OAAQA,GAAU/L,EAAMtB,wBAS9K9B,EAAS9F,UAAUmV,aAAe,SAAUC,GACxC,IAAIlM,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,sBAAuB2K,EAAMd,mBAAoBzE,EAAS,CAAEyR,QAASA,GAAWlM,EAAMtB,wBAUlH9B,EAAS9F,UAAUqV,gBAAkB,SAAUD,EAASE,GACpD,IAAIpM,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,gBAAiB2K,EAAMd,mBAAoBzE,EAASA,EAASA,EAAS,GAAI2R,GAAa,CAAEF,QAASA,IAAYlM,EAAMtB,wBAShJ9B,EAAS9F,UAAUuV,aAAe,SAAUH,GACxC,IAAIlM,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,sBAAuBoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEyR,QAASA,GAAWlM,EAAMtB,wBAUxK9B,EAAS9F,UAAUwV,cAAgB,SAAUJ,EAASP,GAClD,IAAI3L,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,uBAAwBoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEyR,QAASA,EAASP,QAASA,GAAW3L,EAAMtB,wBAS3L9B,EAAS9F,UAAUyV,kBAAoB,SAAUL,GAC7C,IAAIlM,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,2BAA4BoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEyR,QAASA,EAASf,KAAM,GAAKnL,EAAMtB,wBAUtL9B,EAAS9F,UAAU0V,cAAgB,SAAUN,GACzC,IAAIlM,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,2BAA4BoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEyR,QAASA,EAASf,KAAM,GAAKnL,EAAMtB,wBAYtL9B,EAAS9F,UAAU2V,wBAA0B,SAAUC,EAAWR,EAASS,EAAaC,GACpF,IAAI5M,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,qBAAsBoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEiS,UAAWA,EAAWrD,OAAQrJ,EAAMlB,OAAQoN,QAASA,EAASW,YAAazU,KAAKe,OAAM,IAAIf,MAAOkC,YAAaqS,YAAaA,EAAaC,UAAWA,EAAWE,gBAAiB1U,KAAKe,OAAM,IAAIf,MAAOkC,YAAayS,cAAe3S,KAAK4S,MAAsB,IAAhB5S,KAAKC,UAAoB,KAAS2F,EAAMtB,wBAUja9B,EAAS9F,UAAUmW,gBAAkB,SAAUzC,EAAcC,GACzD,IAAIzK,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,yBAA0BoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAE+P,aAAcA,EAAcC,SAAUA,GAAYzK,EAAMtB,wBAWzM9B,EAAS9F,UAAUoW,eAAiB,SAAUhB,EAASiB,GACnD,IAAInN,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,oBAAqBoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEyR,QAASA,EAASiB,QAASA,GAAWnN,EAAMtB,wBAUxL9B,EAAS9F,UAAUsW,kBAAoB,SAAUlB,EAASF,GACtD,IAAIhM,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,uBAAwBoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEyR,QAASA,EAASF,SAAUA,GAAYhM,EAAMtB,wBAa7L9B,EAAS9F,UAAUuW,sBAAwB,SAAUnB,EAASF,EAAUsB,EAAOC,EAAM5D,GACjF,IAAI3J,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,uBAAwBoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEyR,QAASA,EAASF,SAAUA,EAAUsB,MAAOA,EAAO3D,MAAOA,GAAS3J,EAAMtB,wBAWzN9B,EAAS9F,UAAU0W,oBAAsB,SAAUtB,EAASF,EAAUyB,GAClE,IAAIzN,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,sBAAuBoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEyR,QAASA,EAASF,SAAUA,GAAYhM,EAAMtB,wBAU5L9B,EAAS9F,UAAU4W,qBAAuB,SAAUC,EAAIC,GACpD,IAAI5N,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,0CAA2CoF,EAASA,EAAS,GAAIuF,EAAMd,oBAAqB,CAAEwM,WAAY1L,EAAMlB,SAAWrE,EAAS,CAAEkT,GAAIA,EAAIC,OAAQA,GAAU5N,EAAMtB,wBAOlM9B,EAAS9F,UAAU+W,iBAAmB,WAClC,IAAI7N,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,sCAAuC2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,QAAUkB,EAAMtB,wBAOtI9B,EAAS9F,UAAUgX,yBAA2B,WAC1C,IAAI9N,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,8CAA+C2K,EAAMd,mBAAoBzE,EAAS,CAAE4O,OAAQrJ,EAAMlB,QAAUkB,EAAMtB,wBAK9I9B,EAAS9F,UAAUmQ,cAAgB,SAAUlH,GACzC,IAAIC,EAAQ7I,KACR4W,EAAQ3V,KAAK4V,MACbC,EAAO,WACP,GAAIjO,EAAM3B,OAASvB,EAAMmC,UAAzB,CAIA,GAAI7G,KAAK4V,MAAQD,GAxmCL,IAwmCiC,CACzC/Q,EAAkB,QAAEnF,KAAK,mBACzBkW,EAAQ3V,KAAK4V,MACb,IAAIE,EAAWlZ,EAAQyH,SAAS2K,iBAAiB3J,EAAUmE,cAAcuM,KAAM,IAC/EpO,EAAKqO,KAAKF,EAAS3G,MAAK,IAE5BvJ,WAAWiQ,EAAM,UATbjR,EAAkB,QAAExE,MAAM,yBAWlCwF,WAAWiQ,EAAM,MAOrBrR,EAAS9F,UAAUuX,qBAAuB,SAAU9E,EAAM+E,GACtD,IAAIjH,EAAc,IAAI3J,EAAc6Q,YAAYpX,KAAKyH,OAErD,OADAyI,EAAYmH,qBAAqBrX,KAAK2H,OAAQyK,EAAM+E,GAC7CjH,GAOXzK,EAAS9F,UAAU2X,uBAAyB,SAAUvC,EAASoC,GAC3D,IAAIjH,EAAc,IAAI3J,EAAc6Q,YAAYpX,KAAKyH,OAErD,OADAyI,EAAYqH,0BAA0BvX,KAAK2H,OAAQoN,EAASoC,GACrDjH,GAOXzK,EAAS9F,UAAU6X,eAAiB,SAAUpH,GAC1C,IAAIqH,EAAU5Z,EAAQyH,SAAS2K,iBAAiB3J,EAAU6E,eAAeC,QAASgF,GAC9EpQ,KAAK4I,MACL5I,KAAK4I,KAAKqO,KAAKQ,EAAQrH,MAAK,KAOpC3K,EAAS9F,UAAU+X,iBAAmB,SAAUtH,GAC5C,IAAIqH,EAAU5Z,EAAQyH,SAAS2K,iBAAiB3J,EAAUgF,aAAaC,UAAW6E,GAC9EpQ,KAAK4I,MACL5I,KAAK4I,KAAKqO,KAAKQ,EAAQrH,MAAK,KAUpC3K,EAAS9F,UAAUgY,yBAA2B,SAAUC,EAAYxF,EAAMyF,GACtE,IAAIJ,EAAU5Z,EAAQyH,SAAS+K,qBAAqB/J,EAAU6E,eAAec,gBAAiB,CAC1F2L,WAAYA,EACZxF,KAAMA,EACNF,OAAQlS,KAAK2H,OACbkQ,gBAAiBA,IAEjB7X,KAAK4I,MACL5I,KAAK4I,KAAKqO,KAAKQ,EAAQrH,MAAK,KAWpC3K,EAAS9F,UAAUmY,sBAAwB,SAAUF,EAAYxF,EAAMyF,GACnE,IAAIJ,EAAU5Z,EAAQyH,SAAS+K,qBAAqB/J,EAAU6E,eAAe4M,WAAY,CACrFH,WAAYA,EACZxF,KAAMA,EACNF,OAAQlS,KAAK2H,OACbkQ,gBAAiBA,EACjBG,iBAAkB,IAElBhY,KAAK4I,MACL5I,KAAK4I,KAAKqO,KAAKQ,EAAQrH,MAAK,KAUpC3K,EAAS9F,UAAUsY,uBAAyB,SAAUlD,EAAS8C,GAC3D,IAAIJ,EAAU5Z,EAAQyH,SAAS+K,qBAAqB/J,EAAUgF,aAAa4M,iBAAkB,CACzFnD,QAASA,EACT7C,OAAQlS,KAAK2H,OACbkQ,gBAAiBA,EACjBG,iBAAkB,IAElBhY,KAAK4I,MACL5I,KAAK4I,KAAKqO,KAAKQ,EAAQrH,MAAK,KAYpC3K,EAAS9F,UAAUwY,gBAAkB,SAAUP,EAAYxF,EAAMyF,EAAiBnC,EAAasC,GAC3F,IAAIP,EAAU5Z,EAAQyH,SAAS+K,qBAAqB/J,EAAU6E,eAAeiN,WAAY,CACrFR,WAAYA,EACZxF,KAAMA,EACNF,OAAQlS,KAAK2H,OACbkQ,gBAAiBA,EACjBnC,YAAaA,EACbsC,iBAAkBA,IAElBhY,KAAK4I,MACL5I,KAAK4I,KAAKqO,KAAKQ,EAAQrH,MAAK,KAQpC3K,EAAS9F,UAAUoQ,mBAAqB,WACpC,OAAOvM,EAAUxD,UAAM,OAAQ,GAAQ,WACnC,IAASsI,EAAM+P,EACf,OAAO/T,EAAYtE,MAAM,SAAU4G,GAC/B,OAAQA,EAAGhC,OACP,KAAK,EAGD,OAFAiB,EAAkB,QAAEnF,KAAK,4BAElB,CAAC,EADF,IAAI0F,EAAmB,QAAEpG,KAAKsH,SACXpJ,KAAK,8BAA+B8B,KAAK+H,mBAAoB,CAC9Ef,WAAYhH,KAAKgH,WACjBS,MAAOzH,KAAKyH,MACZ6Q,QAAStY,KAAK2H,OACdD,KAAM1H,KAAK0H,KACX2L,aAAcrT,KAAKoH,2BACnBkM,SAAU,OAEtB,KAAK,EAED,OADAhL,EAAO1B,EAAG/B,QACA0T,aACVvY,KAAKoH,2BAA6BkB,EAAKe,KAAKmP,YAC5CH,EAAc/P,EAAKe,KAAKoP,SACxBzY,KAAKqH,mBAAmBhC,KAAKgT,GACzBA,EAAYlY,OAAS,GAA4D,mBAAhDtC,EAAQyH,SAAS2B,UAAUyR,kBAC5D7a,EAAQyH,SAAS2B,UAAUyR,iBAAiBL,GAEhDtX,QAAQyJ,IAAI,gCAAiClC,GAE7CvH,QAAQyJ,IAAI,mCAAqClC,EAAKe,KAAKsP,WACrDrQ,EAAKe,KAAKsP,UAAkB,CAAC,EAAa,GACzC,CAAC,EAAa3Y,KAAK+P,uBAXI,CAAC,EAAa,GAYhD,KAAK,EACDnJ,EAAG/B,OACH+B,EAAGhC,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,EAAa,GAC7B,KAAK,EACDiB,EAAkB,QAAExE,MAAM,8BAC1BuF,EAAGhC,MAAQ,EACf,KAAK,EAAG,MAAO,CAAC,WAahCa,EAAS9F,UAAUiZ,sBAAwB,SAAUrD,EAAWnD,EAAMoD,EAAaC,GAC/E,IAAI5M,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,gBAAiB2K,EAAMd,mBAAoBzE,EAAS,CAAEiS,UAAWA,EAAWrD,OAAQrJ,EAAMlB,OAAQyK,KAAMA,EAAMsD,YAAazU,KAAKe,OAAM,IAAIf,MAAOkC,YAAaqS,YAAaA,EAAaC,UAAWA,EAAWE,gBAAiB1U,KAAKe,OAAM,IAAIf,MAAOkC,YAAayS,cAAe3S,KAAK4S,MAAsB,IAAhB5S,KAAKC,UAAoB,KAAS2F,EAAMtB,wBAahW9B,EAAS9F,UAAUkZ,uBAAyB,SAAUzG,EAAMyF,EAAiBiB,EAAMC,EAAWC,GAC1F,IAAInQ,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,kCAAmC2K,EAAMd,mBAAoBzE,EAAS,CAAEkR,QAAS3L,EAAMlB,OAAQyK,KAAMA,EAAMyF,gBAAiBA,EAAiBiB,KAAMA,EAAMC,UAAWA,EAAWC,QAASA,GAAWnQ,EAAMtB,wBAarO9B,EAAS9F,UAAUsZ,yBAA2B,SAAUlE,EAAS8C,EAAiBiB,EAAMC,EAAWC,GAC/F,IAAInQ,EAAQ7I,KACZ,OAAO,IAAI6D,SAAQ,SAAUC,EAASa,GAGlCb,EAFU,IAAIsC,EAAmB,QAAEyC,EAAMvB,SAC1BpJ,KAAK,oCAAqC2K,EAAMd,mBAAoBzE,EAAS,CAAEyR,QAASA,EAAS8C,gBAAiBA,EAAiBiB,KAAMA,EAAMC,UAAWA,EAAWC,QAASA,GAAWnQ,EAAMtB,wBAI/M9B,EA9yCkB,GAgzC7B5H,EAAQ4H,SAAWA,EACnB5H,EAAQ2H,SAAW,SAAUsB,EAAK2B,EAAKnD,GAAY,OAAO9B,OAAU,OAAQ,OAAQ,GAAQ,WACxF,OAAOc,EAAYtE,MAAM,SAAU4G,GAC/B,MAAO,CAAC,EAAc,IAAI/C,SAAQ,SAAUC,EAASa,GAC7C,IAAIiE,EAAO,IAAI3C,EAAYiT,aAAapS,GACxC8B,EAAKuQ,WAAa,cAClBtT,EAAkB,QAAEnF,KAAK,YAEzB,IAAI0Y,EAAKvS,YAAW,WAChBwS,aAAaD,GACbtV,EAAQ,CAAE4E,SAAS,EAAOC,IAAK,IAAIlH,MAAM,WAAYmH,KAAMA,MAv1C5D,KAy1CHA,EAAK0Q,OAAS,WACV,GAAI1Q,EAAK2Q,YAActT,EAAYiT,aAAaM,KAAM,CAEK,mBAA5ClU,EAAS2B,UAAUwS,sBAC1BnU,EAAS2B,UAAUwS,qBAAqB3S,EAAK2B,GAEjD5C,EAAkB,QAAEnF,KAAK,QAEzB,IAAI2I,EAAO,CACP,OAAUZ,EAAId,QAEd+R,EAAYpU,EAAS2K,iBAAiB3J,EAAUmE,cAAckP,MAAOtQ,GACzET,EAAKqO,KAAKyC,EAAUtJ,MAAK,MAGjCxH,EAAKW,QAAU,SAAUlI,GACrBgY,aAAaD,GACbvT,EAAkB,QAAExE,MAAMA,GAC1ByC,EAAQ,CAAE4E,SAAS,EAAOC,IAAKtH,EAAOuH,KAAMA,KAEhDA,EAAKkB,UAAY,SAAUC,GACvB,GAAwB,iBAAbA,EAAIV,KAAf,CAIAgQ,aAAaD,GACb,IACInP,EADa,IAAInE,EAAsB,QAAEiE,EAAIV,MACrBa,QAAQA,QAAQC,SAExCC,EAAUH,EAAW,GACXA,EAAW,GAErBG,GAAW9D,EAAUmE,cAAcmP,WACnC9V,EAAQ,CAAE4E,SAAS,EAAME,KAAMA,SAX/B/C,EAAkB,QAAEnF,KAAK,cAAgBqJ,EAAIV,KAAO,iBAiB5ExL,EAAQ0H,OAAS,SAAUxC,GAEvB,IADA,IAAI8W,EAAM,EACD9b,EAAI,EAAGA,EAAIgF,EAAI5C,OAAQpC,IAAK,CACjC,IAAIK,EAAI2E,EAAI+W,WAAW/b,GAElBK,GAAK,GAAUA,GAAK,KAAY,OAAUA,GAAKA,GAAK,MACrDyb,IAGAA,GAAO,EAGf,OAAOA,GAEXhc,EAAQyH,SAAW,IAAIG,G,8BC38CvB,YACA5H,EAAQsB,YAAa,EAIrB,IAAI4a,EAAuB,WACvB,SAASA,KAiBT,OAfAA,EAAMC,gBAAkB,WAapB,YAV4B,IAAjBC,EAAOC,OAAiD,mBAAjBD,EAAOC,MAEzCD,EAAOC,MAEG,mBAAVA,MACAA,MAGA,EAAQ,IAIrBH,EAlBe,GAoB1Blc,EAAiB,QAAIkc,I,8CCxBrBlc,EAAQsB,YAAa,EACrBtB,EAAQsc,QAAK,EACb,IAAIC,EAAa,EAAQ,GACzBvc,EAAQsc,GAAKC,EAAW9U,SAQL,oBAAR+U,MAGPA,IAAQ,GAAID,EAAW9U,W,6BCd3BzH,EAAQsB,YAAa,EACrB,IAAImb,EAA4B,WAC5B,SAASA,EAAWC,EAAU3F,GAC1B5U,KAAKwa,UAAY,EACjBxa,KAAKya,WAAa,EAClBza,KAAK0a,YAAc,EACnB1a,KAAK2a,WAAa,EAClB3a,KAAK4a,YAAc,EACnB5a,KAAK6a,YAAc,EACnB7a,KAAK8a,aAAe,EACpB9a,KAAK+a,WAAa,EAClB/a,KAAKgb,WAAa,EAClBhb,KAAKib,YAAc,GACnBjb,KAAKkb,eAAiB,GACtBlb,KAAKmb,QAAU,EACfnb,KAAKob,MAAQ,GACbpb,KAAKqb,eAAgB,EACrBrb,KAAKsb,SAAWf,EAAYA,EAASgB,aAAeC,SAAWjB,EACxDA,EAASgB,aAAeE,WAAa,IAAID,SAASjB,EAASmB,OAAQ9G,GAAU,IAAI4G,SAASjB,EAAU3F,GAAY,IAAI4G,SAAS,IAAIC,WAAW,IAAIC,QACvJ1b,KAAKua,SAAWA,EAChBva,KAAK4U,OAASA,EAqXlB,OAvWA0F,EAAW3a,UAAUgc,UAAY,WAE7B,OADA3b,KAAKqb,eAAgB,EACdrb,MAIXsa,EAAW3a,UAAUic,qBAAuB,WAExC,OADA5b,KAAKqb,eAAgB,EACdrb,MAGXsa,EAAW3a,UAAUkc,UAAY,SAAUC,EAAMlH,EAAQ7R,GAErD,IADA,IAAI3E,EAAI,EACCL,EAAI,EAAGC,EAAI+E,EAAI5C,OAAQpC,EAAIC,EAAGD,KACnCK,EAAI2E,EAAI+W,WAAW/b,IACX,IACJ+d,EAAKC,SAASnH,IAAUxW,GAEnBA,EAAI,MACT0d,EAAKC,SAASnH,IAAU,IAAQxW,GAAK,GACrC0d,EAAKC,SAASnH,IAAU,IAAY,GAAJxW,IAE3BA,EAAI,OAAUA,GAAK,OACxB0d,EAAKC,SAASnH,IAAU,IAAQxW,GAAK,IACrC0d,EAAKC,SAASnH,IAAU,IAAQxW,GAAK,EAAK,IAC1C0d,EAAKC,SAASnH,IAAU,IAAY,GAAJxW,KAGhCL,IACAK,EAAI,QAAiB,KAAJA,IAAc,GAA2B,KAApB2E,EAAI+W,WAAW/b,IACrD+d,EAAKC,SAASnH,IAAU,IAAQxW,GAAK,IACrC0d,EAAKC,SAASnH,IAAU,IAAQxW,GAAK,GAAM,IAC3C0d,EAAKC,SAASnH,IAAU,IAAQxW,GAAK,EAAK,IAC1C0d,EAAKC,SAASnH,IAAU,IAAY,GAAJxW,KAmC5Ckc,EAAW3a,UAAUuK,MAAQ,SAAU8R,EAAKzL,GASxC,OARwB,GAApBrQ,UAAUC,QACVH,KAAKob,MAAM/V,KAAKrF,KAAKsb,SAASW,SAASjc,KAAKmb,QAASnb,KAAKqb,gBAC1Drb,KAAKmb,SAAW,IAGhBnb,KAAKob,MAAMc,OAAgBxa,MAAT6O,EAAqBA,EAAQvQ,KAAKob,MAAMjb,OAAQ,EAAG,CAAElB,EAAGe,KAAK2a,WAAYtc,EAAG2d,EAAKhe,EAAG,IACtGgC,KAAKmb,SAAW,GAEbnb,MAGXsa,EAAW3a,UAAUwc,OAAS,SAAUH,EAAKzL,GASzC,OARwB,GAApBrQ,UAAUC,QACVH,KAAKob,MAAM/V,KAAKrF,KAAKsb,SAASc,UAAUpc,KAAKmb,QAASnb,KAAKqb,gBAC3Drb,KAAKmb,SAAW,IAGhBnb,KAAKob,MAAMc,OAAgBxa,MAAT6O,EAAqBA,EAAQvQ,KAAKob,MAAMjb,OAAQ,EAAG,CAAElB,EAAGe,KAAK4a,YAAavc,EAAG2d,EAAKhe,EAAG,IACvGgC,KAAKmb,SAAW,GAEbnb,MAMXsa,EAAW3a,UAAU0c,QAAU,WAC3B,OAAOrc,KAAKmb,SAMhBb,EAAW3a,UAAU2c,OAAS,SAAUN,EAAKzL,GACzC,GAAwB,GAApBrQ,UAAUC,OAAa,CACvB,IAAI0Z,EAAM7Z,KAAKsb,SAASW,SAASjc,KAAKmb,QAASnb,KAAKqb,eACpDrb,KAAKmb,SAAW,EAChBnb,KAAKob,MAAM/V,KAAKrF,KAAKuc,SAASvc,KAAKsb,SAAUtb,KAAKmb,QAAStB,IAC3D7Z,KAAKmb,SAAWtB,MAEf,CACGA,EAAM,EACNmC,IACAnC,EAAM7Z,KAAKwc,WAAWR,IAE1Bhc,KAAKob,MAAMc,OAAgBxa,MAAT6O,EAAqBA,EAAQvQ,KAAKob,MAAMjb,OAAQ,EAAG,CAAElB,EAAGe,KAAK6a,YAAaxc,EAAG2d,EAAKhe,EAAG6b,IACvG7Z,KAAKmb,SAAWtB,EAAM,EAE1B,OAAO7Z,MAGXsa,EAAW3a,UAAU6c,WAAa,SAAUzZ,GAExC,IADA,IAAI3E,EAAI,EAAG+B,EAAS,EACXpC,EAAI,EAAGC,EAAI+E,EAAI5C,OAAQpC,EAAIC,EAAGD,KACnCK,EAAI2E,EAAI+W,WAAW/b,IACX,IACJoC,GAAU,EAEL/B,EAAI,KACT+B,GAAU,EAEL/B,EAAI,OAAUA,GAAK,MACxB+B,GAAU,GAGVpC,IACAoC,GAAU,GAGlB,OAAOA,GAEXma,EAAW3a,UAAU4c,SAAW,SAAUT,EAAMlH,EAAQzU,GAEpD,IADA,IAAImc,EAAS,GAAIG,EAAM,EACd1e,EAAI6W,EAAQ8H,EAAM9H,EAASzU,EAAQpC,EAAI2e,EAAK3e,IAAK,CACtD,IAAI4e,EAAOb,EAAKc,SAAS7e,GACzB,GAAsB,IAAV,IAAP4e,GAIL,GAAsB,MAAV,IAAPA,GAKL,GAAsB,MAAV,IAAPA,GAAL,CAMA,GAAsB,MAAV,IAAPA,GAcL,MAAM,IAAIlb,MAAM,gBAAkBkb,EAAKxZ,SAAS,MAb5CsZ,GAAe,EAAPE,IAAgB,IACG,GAArBb,EAAKc,WAAW7e,KAAc,IACT,GAArB+d,EAAKc,WAAW7e,KAAc,GACT,GAArB+d,EAAKc,WAAW7e,KAAc,IACzB,OACP0e,GAAO,MACPH,GAAUO,OAAOC,aAA4B,OAAdL,IAAQ,IAA8B,OAAT,KAANA,KAGtDH,GAAUO,OAAOC,aAAaL,QAflCH,GAAUO,OAAOC,cAAsB,GAAPH,IAAgB,IACrB,GAArBb,EAAKc,WAAW7e,KAAc,GACT,GAArB+d,EAAKc,WAAW7e,KAAc,QAPpCue,GAAUO,OAAOC,cAAsB,GAAPH,IAAgB,EACtB,GAArBb,EAAKc,WAAW7e,SALrBue,GAAUO,OAAOC,aAAaH,GA8BtC,OAAOL,GAKXhC,EAAW3a,UAAU4K,QAAU,SAAUyR,EAAKnC,EAAKtJ,GAC/C,IAAKsJ,EACD,MAAM,IAAIpY,MAAM,iCAGpB,GAAWC,MAAPsa,GAA2B,MAAPA,EAAa,CAEjC,IADA,IAAIe,EAAO,EACFhf,EAAIiC,KAAKmb,QAASpd,EAAIiC,KAAKmb,QAAUtB,EAAK9b,IAC3CiC,KAAKsb,SAASsB,SAAS7e,GAAK,GAC5Bgf,IAER/c,KAAKob,MAAM/V,KAAKrF,KAAKuc,SAASvc,KAAKsb,SAAUtb,KAAKmb,QAAS4B,IAC3D/c,KAAKmb,SAAWtB,OAGhB7Z,KAAKob,MAAMc,OAAgBxa,MAAT6O,EAAqBA,EAAQvQ,KAAKob,MAAMjb,OAAQ,EAAG,CAAElB,EAAGe,KAAK8a,aAAczc,EAAG2d,EAAKhe,EAAG6b,IACxG7Z,KAAKmb,SAAWtB,EAEpB,OAAO7Z,MAGXsa,EAAW3a,UAAUqd,MAAQ,SAAUhB,EAAKzL,GASxC,OARwB,GAApBrQ,UAAUC,QACVH,KAAKob,MAAM/V,KAAKrF,KAAKsb,SAAS2B,WAAWjd,KAAKmb,QAASnb,KAAKqb,gBAC5Drb,KAAKmb,SAAW,IAGhBnb,KAAKob,MAAMc,OAAgBxa,MAAT6O,EAAqBA,EAAQvQ,KAAKob,MAAMjb,OAAQ,EAAG,CAAElB,EAAGe,KAAK+a,WAAY1c,EAAG2d,EAAKhe,EAAG,IACtGgC,KAAKmb,SAAW,GAEbnb,MAGXsa,EAAW3a,UAAUud,MAAQ,SAAUlB,EAAKzL,GASxC,OARwB,GAApBrQ,UAAUC,QACVH,KAAKob,MAAM/V,KAAKrF,KAAKsb,SAAS6B,WAAWnd,KAAKmb,QAASnb,KAAKqb,gBAC5Drb,KAAKmb,SAAW,IAGhBnb,KAAKob,MAAMc,OAAgBxa,MAAT6O,EAAqBA,EAAQvQ,KAAKob,MAAMjb,OAAQ,EAAG,CAAElB,EAAGe,KAAKgb,WAAY3c,EAAG2d,EAAKhe,EAAG,IACtGgC,KAAKmb,SAAW,GAEbnb,MAGXsa,EAAW3a,UAAUyd,OAAS,SAAUpB,EAAKzL,GASzC,OARwB,GAApBrQ,UAAUC,QACVH,KAAKob,MAAM/V,KAAKrF,KAAKsb,SAAS2B,WAAWjd,KAAKmb,QAASnb,KAAKqb,gBAC5Drb,KAAKmb,SAAW,IAGhBnb,KAAKob,MAAMc,OAAgBxa,MAAT6O,EAAqBA,EAAQvQ,KAAKob,MAAMjb,OAAQ,EAAG,CAAElB,EAAGe,KAAKib,YAAa5c,EAAG2d,EAAKhe,EAAG,IACvGgC,KAAKmb,SAAW,GAEbnb,MAMXsa,EAAW3a,UAAU0d,UAAY,SAAUrB,EAAKnC,EAAKtJ,GACjD,IAAKsJ,EACD,MAAM,IAAIpY,MAAM,mCAGpB,GAAWC,MAAPsa,GAA2B,MAAPA,EAAa,CACjC,IAAIsB,EAAM,IAAI7B,WAAWzb,KAAKsb,SAASI,OAAOtY,MAAMpD,KAAKmb,QAASnb,KAAKmb,QAAUtB,IACjF7Z,KAAKob,MAAM/V,KAAKiY,GAChBtd,KAAKmb,SAAWtB,OAGhB7Z,KAAKob,MAAMc,OAAgBxa,MAAT6O,EAAqBA,EAAQvQ,KAAKob,MAAMjb,OAAQ,EAAG,CAAElB,EAAGe,KAAKkb,eAAgB7c,EAAG2d,EAAKhe,EAAG6b,IAC1G7Z,KAAKmb,SAAWtB,EAEpB,OAAO7Z,MAMXsa,EAAW3a,UAAUwK,OAAS,WAC1B,OAAOnK,KAAKob,OAMhBd,EAAW3a,UAAU4d,aAAe,WAChC,OAAOvd,KAAKoQ,MAAK,IAOrBkK,EAAW3a,UAAUyQ,KAAO,SAAUoN,GAClCxd,KAAKsb,SAAW,IAAIE,SAAS,IAAIiC,YAAY,EAAWzd,KAAKmb,QAAU,EAAInb,KAAKmb,UAChF,IAAIvG,EAAS,EACT4I,IACAxd,KAAKsb,SAASoC,UAAU9I,EAAQ5U,KAAKmb,QAASnb,KAAKqb,eACnDzG,GAAU,GAEd,IAAK,IAAI7W,EAAI,EAAGA,EAAIiC,KAAKob,MAAMjb,OAAQpC,IACnC,OAAQiC,KAAKob,MAAMrd,GAAGkB,GAClB,KAAKe,KAAKwa,UACNxa,KAAKsb,SAASqC,QAAQ/I,EAAQ5U,KAAKob,MAAMrd,GAAGM,GAC5CuW,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAKya,WACNza,KAAKsb,SAASsC,SAAShJ,EAAQ5U,KAAKob,MAAMrd,GAAGM,EAAG2B,KAAKqb,eACrDzG,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAK0a,YACN1a,KAAKsb,SAASuC,UAAUjJ,EAAQ5U,KAAKob,MAAMrd,GAAGM,EAAG2B,KAAKqb,eACtDzG,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAK2a,WACN3a,KAAKsb,SAASwC,SAASlJ,EAAQ5U,KAAKob,MAAMrd,GAAGM,EAAG2B,KAAKqb,eACrDzG,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAK4a,YACN5a,KAAKsb,SAASoC,UAAU9I,EAAQ5U,KAAKob,MAAMrd,GAAGM,EAAG2B,KAAKqb,eACtDzG,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAK6a,YAEN7a,KAAKsb,SAASoC,UAAU9I,EAAQ5U,KAAKob,MAAMrd,GAAGC,EAAGgC,KAAKqb,eACtDzG,GAAU,EACV5U,KAAK6b,UAAU7b,KAAKsb,SAAU1G,EAAQ5U,KAAKob,MAAMrd,GAAGM,GACpDuW,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAK8a,aACN9a,KAAK6b,UAAU7b,KAAKsb,SAAU1G,EAAQ5U,KAAKob,MAAMrd,GAAGM,GAGpD,IAFA,IAESkC,EAAIqU,EAFF5U,KAAKwc,WAAWxc,KAAKob,MAAMrd,GAAGM,GAEbkC,EAAIqU,EAAS5U,KAAKob,MAAMrd,GAAGC,EAAGuC,IACtDP,KAAKsb,SAASS,SAASxb,EAAG,GAE9BqU,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAK+a,WACN/a,KAAKsb,SAASyC,WAAWnJ,EAAQ5U,KAAKob,MAAMrd,GAAGM,EAAG2B,KAAKqb,eACvDzG,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAKgb,WACNhb,KAAKsb,SAAS0C,WAAWpJ,EAAQ5U,KAAKob,MAAMrd,GAAGM,EAAG2B,KAAKqb,eACvDzG,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAKib,YACNjb,KAAKsb,SAASyC,WAAWnJ,EAAQ5U,KAAKob,MAAMrd,GAAGM,EAAG2B,KAAKqb,eACvDzG,GAAU5U,KAAKob,MAAMrd,GAAGC,EACxB,MACJ,KAAKgC,KAAKkb,eACN,IAAI+C,EAAO,EACX,IAAS1d,EAAIqU,EAAQrU,EAAIqU,EAAS5U,KAAKob,MAAMrd,GAAGC,EAAGuC,IAC3C0d,EAAOje,KAAKob,MAAMrd,GAAGM,EAAE8B,OACvBH,KAAKsb,SAASS,SAASxb,EAAGP,KAAKob,MAAMrd,GAAGM,EAAE4f,IAG1Cje,KAAKsb,SAASS,SAASxb,EAAG,GAE9B0d,IAEJrJ,GAAU5U,KAAKob,MAAMrd,GAAGC,EAIpC,OAAOgC,KAAKsb,SAASI,QAMzBpB,EAAW3a,UAAUue,aAAe,WAChC,OAAKle,KAAKsb,SAEHtb,KAAKsb,SAASI,OAAOyC,WAAane,KAAKmb,QADnCnb,KAAKmb,SAIbb,EAxYoB,GA0Y/Bzc,EAAiB,QAAIyc,G,6BC3YrBzc,EAAQsB,YAAa,EACrBtB,EAAQyL,eAAY,EACpB,IAAIA,EACA,SAAmB7B,EAAOE,EAAQX,GAC9BhH,KAAK2H,OAASA,EACd3H,KAAKgH,WAAaA,EAClBhH,KAAKyH,MAAQA,GAIrB5J,EAAQyL,UAAYA,G,0DCVpBzL,QAAQsB,YAAa,EACrB,IAAIif,QAAU,oBAAQ,GAClBvY,SAAW,oBAAQ,GACnBwY,OAAS,CACTC,QAAS,oEACTC,OAAQ,SAAU/c,GACd,IACIhC,EAAGX,EAAGd,EAAG+B,EAAGtB,EAAGggB,EAAGle,EADlBrB,EAAI,GAEJuF,EAAI,EAER,IADAhD,EAAI6c,OAAOI,aAAajd,GACjBgD,EAAIhD,EAAErB,QAITL,GAHAN,EAAIgC,EAAEsY,WAAWtV,OAGR,EACThG,GAAS,EAAJgB,IAAU,GAHfX,EAAI2C,EAAEsY,WAAWtV,OAGO,EACxBga,GAAS,GAAJ3f,IAAW,GAHhBd,EAAIyD,EAAEsY,WAAWtV,OAGQ,EACzBlE,EAAQ,GAAJvC,EACA2gB,MAAM7f,GACN2f,EAAIle,EAAI,GAEHoe,MAAM3gB,KACXuC,EAAI,IAERrB,EAAIA,EAAIe,KAAKse,QAAQK,OAAO7e,GAAKE,KAAKse,QAAQK,OAAOngB,GAAKwB,KAAKse,QAAQK,OAAOH,GAAKxe,KAAKse,QAAQK,OAAOre,GAE3G,OAAOrB,GAEX2f,OAAQ,SAAUpd,GACd,IACIhC,EAAGX,EAAGd,EACHS,EAAGggB,EAAGle,EAFTrB,EAAI,GAGJuF,EAAI,EAER,IADAhD,EAAIA,EAAEa,QAAQ,mBAAoB,IAC3BmC,EAAIhD,EAAErB,QAKTX,EAJIQ,KAAKse,QAAQO,QAAQrd,EAAEmd,OAAOna,OAIzB,GAHThG,EAAIwB,KAAKse,QAAQO,QAAQrd,EAAEmd,OAAOna,QAGhB,EAClB3F,GAAS,GAAJL,IAAW,GAHhBggB,EAAIxe,KAAKse,QAAQO,QAAQrd,EAAEmd,OAAOna,QAGT,EACzBzG,GAAS,EAAJygB,IAAU,GAHfle,EAAIN,KAAKse,QAAQO,QAAQrd,EAAEmd,OAAOna,OAIlCvF,GAAQ4d,OAAOC,aAAatd,GACnB,IAALgf,IACAvf,GAAQ4d,OAAOC,aAAaje,IAEvB,IAALyB,IACArB,GAAQ4d,OAAOC,aAAa/e,IAIpC,OADAkB,EAAIof,OAAOS,aAAa7f,IAG5Bwf,aAAc,SAAUjd,GACpBA,EAAIA,EAAEa,QAAQ,MAAO,KAErB,IADA,IAAIpD,EAAI,GACCO,EAAI,EAAGA,EAAIgC,EAAErB,OAAQX,IAAK,CAC/B,IAAIX,EAAI2C,EAAEsY,WAAWta,GACjBX,EAAI,IACJI,GAAK4d,OAAOC,aAAaje,GAEpBA,EAAI,KAAOA,EAAI,MACpBI,GAAK4d,OAAOC,aAAaje,GAAK,EAAI,KAClCI,GAAK4d,OAAOC,aAAiB,GAAJje,EAAS,OAGlCI,GAAK4d,OAAOC,aAAaje,GAAK,GAAK,KACnCI,GAAK4d,OAAOC,aAAaje,GAAK,EAAI,GAAK,KACvCI,GAAK4d,OAAOC,aAAiB,GAAJje,EAAS,MAG1C,OAAOI,GAEX6f,aAAc,SAAUtd,GAMpB,IALA,IAAIvC,EAAI,GACJO,EAAI,EACJX,EAAI,EAEJkgB,EAAK,EACFvf,EAAIgC,EAAErB,QAET,IADAtB,EAAI2C,EAAEsY,WAAWta,IACT,IACJP,GAAK4d,OAAOC,aAAaje,GACzBW,SAEC,GAAIX,EAAI,KAAOA,EAAI,IACpBkgB,EAAKvd,EAAEsY,WAAWta,EAAI,GACtBP,GAAK4d,OAAOC,cAAkB,GAAJje,IAAW,EAAS,GAALkgB,GACzCvf,GAAK,MAEJ,CACDuf,EAAKvd,EAAEsY,WAAWta,EAAI,GACtB,IAAIwf,EAAKxd,EAAEsY,WAAWta,EAAI,GAC1BP,GAAK4d,OAAOC,cAAkB,GAAJje,IAAW,IAAW,GAALkgB,IAAY,EAAS,GAALC,GAC3Dxf,GAAK,EAGb,OAAOP,IAGXggB,WAA4B,WAC5B,SAASA,cAiKT,OA9JAA,WAAWC,eAAiB,WACxB,IAAIC,EAAQC,UAAUC,UAAUC,cAE5BC,EAAc,iBACdC,EAAY,oBACZC,EAAS,iBACTC,EAAY,oBACZC,EAAgB,mBAChBC,EAAa,mBACbC,EAAe,gBACfnf,EAAO,CACPof,KAAM,EACN9W,OAVSmW,EAAMY,MAAM,KAAK,GAAGA,MAAM,KAAK,GAAGA,MAAM,KAAK,GAWtD9W,QAAS,GACTC,eAAgB,IAGpB,OAAIiW,EAAMN,QAAQ,WAAa,GAC3Bne,EAAKuI,QAAUkW,EAAMa,MAAMR,GAAW,GAAGO,MAAM,KAAK,GACpDrf,EAAKwI,eAAiBiW,EAAMa,MAAMR,GAAW,GAAGO,MAAM,KAAK,GACpDrf,GAGPye,EAAMN,QAAQ,QAAU,GACxBne,EAAKuI,QAAUkW,EAAMa,MAAMP,GAAQ,GAAGM,MAAM,KAAK,GACjDrf,EAAKwI,eAAiBiW,EAAMa,MAAMP,GAAQ,GAAGM,MAAM,KAAK,GACjDrf,GAGPye,EAAMN,QAAQ,QAAU,GACxBne,EAAKuI,QAAUkW,EAAMa,MAAMT,GAAa,GAAGQ,MAAM,KAAK,GACtDrf,EAAKwI,eAAiBiW,EAAMa,MAAMT,GAAa,GAAGQ,MAAM,KAAK,GACtDrf,GAGPye,EAAMN,QAAQ,WAAa,GAC3Bne,EAAKuI,QAAUkW,EAAMa,MAAMN,GAAW,GAAGK,MAAM,KAAK,GACpDrf,EAAKwI,eAAiBiW,EAAMa,MAAMN,GAAW,GAAGK,MAAM,KAAK,GACpDrf,GAGPye,EAAMN,QAAQ,OAAS,GACvBne,EAAKuI,QAAUkW,EAAMa,MAAMH,GAAc,GAAGE,MAAM,KAAK,GACvDrf,EAAKwI,eAAiBiW,EAAMa,MAAMH,GAAc,GAAGE,MAAM,KAAK,GACvDrf,GAGPye,EAAMN,QAAQ,UAAY,GAAKM,EAAMN,QAAQ,UAAY,GACzDne,EAAKuI,QAAUkW,EAAMa,MAAMJ,GAAY,GAAGG,MAAM,KAAK,GACrDrf,EAAKwI,eAAiBiW,EAAMa,MAAMJ,GAAY,GAAGG,MAAM,KAAK,GACrDrf,GAGPye,EAAMN,QAAQ,UAAY,GAC1Bne,EAAKuI,QAAUkW,EAAMa,MAAML,GAAe,GAAGI,MAAM,KAAK,GACxDrf,EAAKwI,eAAiBiW,EAAMa,MAAML,GAAe,GAAGI,MAAM,KAAK,GACxDrf,IAGPA,EAAKof,MAAQ,EACNpf,IAIfue,WAAWgB,aAAe,WACtB,MAAO,CACHjX,OAAQ,QACRC,QAAS,QACTC,eAAgB,QAIxB+V,WAAWiB,mBAAqB,WAC5B,MAAO,CACHlX,OAAQ,WACRC,QAAS,WACTC,eAAgB,QAIxB+V,WAAWkB,cAAgB,WACvB,MAAO,CACHnX,OAAQ,SACRC,QAAS,SACTC,eAAgB,QAIxB+V,WAAWmB,OAAS,SAAUtZ,EAAKqB,GAC/B,IAAIkY,EAASC,SAASC,cAAc,UAAWC,EAAKrY,GAAY,aAChEkY,EAAOI,KAAO,kBAEd,IAAIC,GAAQ,EACZ,IAAK,IAAIne,KAAK+d,SAASK,qBAAqB,QAAQ,GAAGC,SAAU,CAC7D,IAAIC,EAAMP,SAASK,qBAAqB,QAAQ,GAAGC,SAASre,QACtCb,IAAlBmf,EAAIC,WAA2BD,EAAIC,UAAUjC,QAAQ/X,IAAQ,IAC7D4Z,GAAQ,GAGZA,EACAF,KAIAH,EAAO9G,WACP8G,EAAOU,mBAAqB,WACC,UAArBV,EAAO9G,YAA+C,YAArB8G,EAAO9G,aACxC8G,EAAOU,mBAAqB,KAC5BP,MAMRH,EAAOW,OAAS,WACZR,KAGRH,EAAOY,IAAMna,EACbwZ,SAASK,qBAAqB,QAAQ,GAAGO,YAAYb,KAGzDpB,WAAWkC,iBAAmB,SAAUhZ,UACpC,IAAIrB,IAAM,uCACNoT,MAAQkE,QAAiB,QAAEpE,kBAC3BoH,QAAU,CAAEC,OAAQ,MAAOniB,KAAM,OAAQoiB,QAAS,CAAE,eAAgB,qBACxE,OAAOpH,MAAMpT,IAAKsa,SAAS/c,MAAK,SAAUkd,GACtC,OAAOA,EAASpK,UACjB9S,MAAK,SAAUmd,KACd,GAAwB,mBAAbrZ,SAAyB,CAChC,IAAIsZ,YAAcC,KAAK,iBAAmBF,IAAInf,QAAQ,sBAAuB,KAC7E8F,SAASsZ,iBAEP,OAAE,SAAUjgB,GAClBqE,SAAkB,QAAEtE,MAAMC,OAIlCyd,WAAW0C,wBAA0B,SAAUxZ,GAE3C8W,WAAWmB,OADD,wCACa,WACnBjY,EAASyZ,OAAqB,kBAGtC3C,WAAW4C,UAAY,SAAU1Z,GAC7B8W,WAAW0C,wBAAwBxZ,IAGvC8W,WAAWlW,cAAgB,WAEvB,OADiBkW,WAAWC,kBAGhCD,WAAW6C,aAAe,SAAU/e,GAChC,OAAOsb,OAAOE,OAAOxb,IAEzBkc,WAAW8C,aAAe,SAAUhf,GAChC,OAAOsb,OAAOO,OAAO7b,IAElBkc,WAlKoB,GAoK/BphB,QAAiB,QAAIohB,Y,cCzQrB,IAAIva,EAGJA,EAAI,WACH,OAAO1E,KADJ,GAIJ,IAEC0E,EAAIA,GAAK,IAAIsd,SAAS,cAAb,GACR,MAAOxgB,GAEc,iBAAXogB,SAAqBld,EAAIkd,QAOrC9jB,EAAOD,QAAU6G,G,gBCfjB,EAAQ,IACR5G,EAAOD,QAAUuK,KAAK8R,MAAM3a,KAAK6I,O,6BCLjC,uNAAI6R,EACqB,oBAAfgI,YAA8BA,YACrB,oBAAT7Z,MAAwBA,WACb,IAAX6R,GAA0BA,EAEhCiI,EACY,oBAAqBjI,EADjCiI,EAEQ,WAAYjI,GAAU,aAAcnb,OAF5CojB,EAIA,eAAgBjI,GAChB,SAAUA,GACV,WACE,IAEE,OADA,IAAIkI,MACG,EACP,MAAO3gB,GACP,OAAO,GALX,GANA0gB,EAcQ,aAAcjI,EAdtBiI,EAeW,gBAAiBjI,EAOhC,GAAIiI,EACF,IAAIE,EAAc,CAChB,qBACA,sBACA,6BACA,sBACA,uBACA,sBACA,uBACA,wBACA,yBAGEC,EACF5E,YAAY6E,QACZ,SAASC,GACP,OAAOA,GAAOH,EAAYvD,QAAQpgB,OAAOkB,UAAUwD,SAASjF,KAAKqkB,KAAS,GAIhF,SAASC,EAAclkB,GAIrB,GAHoB,iBAATA,IACTA,EAAOue,OAAOve,IAEZ,6BAA6BmkB,KAAKnkB,IAAkB,KAATA,EAC7C,MAAM,IAAI6G,UAAU,4CAA8C7G,EAAO,KAE3E,OAAOA,EAAKghB,cAGd,SAASoD,EAAe1jB,GAItB,MAHqB,iBAAVA,IACTA,EAAQ6d,OAAO7d,IAEVA,EAIT,SAAS2jB,EAAYC,GACnB,IAAI3d,EAAW,CACbf,KAAM,WACJ,IAAIlF,EAAQ4jB,EAAMC,QAClB,MAAO,CAACze,UAAgB1C,IAAV1C,EAAqBA,MAAOA,KAU9C,OANIkjB,IACFjd,EAASnG,OAAOmG,UAAY,WAC1B,OAAOA,IAIJA,EAGF,SAAS6d,EAAQxB,GACtBthB,KAAK+iB,IAAM,GAEPzB,aAAmBwB,EACrBxB,EAAQ3e,SAAQ,SAAS3D,EAAOV,GAC9B0B,KAAKgjB,OAAO1kB,EAAMU,KACjBgB,MACMI,MAAM6iB,QAAQ3B,GACvBA,EAAQ3e,SAAQ,SAASugB,GACvBljB,KAAKgjB,OAAOE,EAAO,GAAIA,EAAO,MAC7BljB,MACMshB,GACT7iB,OAAO0kB,oBAAoB7B,GAAS3e,SAAQ,SAASrE,GACnD0B,KAAKgjB,OAAO1kB,EAAMgjB,EAAQhjB,MACzB0B,MAgEP,SAASojB,EAAS7e,GAChB,GAAIA,EAAK8e,SACP,OAAOxf,QAAQE,OAAO,IAAIoB,UAAU,iBAEtCZ,EAAK8e,UAAW,EAGlB,SAASC,EAAgBC,GACvB,OAAO,IAAI1f,SAAQ,SAASC,EAASC,GACnCwf,EAAOvC,OAAS,WACdld,EAAQyf,EAAO7gB,SAEjB6gB,EAAOha,QAAU,WACfxF,EAAOwf,EAAOliB,WAKpB,SAASmiB,EAAsBC,GAC7B,IAAIF,EAAS,IAAIG,WACbC,EAAUL,EAAgBC,GAE9B,OADAA,EAAOK,kBAAkBH,GAClBE,EAoBT,SAASE,EAAYC,GACnB,GAAIA,EAAI1gB,MACN,OAAO0gB,EAAI1gB,MAAM,GAEjB,IAAI0Y,EAAO,IAAIL,WAAWqI,EAAI3F,YAE9B,OADArC,EAAKiI,IAAI,IAAItI,WAAWqI,IACjBhI,EAAKJ,OAIhB,SAASsI,IAkHP,OAjHAhkB,KAAKqjB,UAAW,EAEhBrjB,KAAKikB,UAAY,SAAS1f,GAhM5B,IAAoBge,EA2MhBviB,KAAKqjB,SAAWrjB,KAAKqjB,SACrBrjB,KAAKkkB,UAAY3f,EACZA,EAEsB,iBAATA,EAChBvE,KAAKmkB,UAAY5f,EACR2d,GAAgBC,KAAKxiB,UAAUykB,cAAc7f,GACtDvE,KAAKqkB,UAAY9f,EACR2d,GAAoBoC,SAAS3kB,UAAUykB,cAAc7f,GAC9DvE,KAAKukB,cAAgBhgB,EACZ2d,GAAwBsC,gBAAgB7kB,UAAUykB,cAAc7f,GACzEvE,KAAKmkB,UAAY5f,EAAKpB,WACb+e,GAAuBA,KAvNlBK,EAuN6Che,IAtNjDiX,SAAS7b,UAAUykB,cAAc7B,KAuN3CviB,KAAKykB,iBAAmBZ,EAAYtf,EAAKmX,QAEzC1b,KAAKkkB,UAAY,IAAI/B,KAAK,CAACniB,KAAKykB,oBACvBvC,IAAwBzE,YAAY9d,UAAUykB,cAAc7f,IAAS8d,EAAkB9d,IAChGvE,KAAKykB,iBAAmBZ,EAAYtf,GAEpCvE,KAAKmkB,UAAY5f,EAAO9F,OAAOkB,UAAUwD,SAASjF,KAAKqG,GAhBvDvE,KAAKmkB,UAAY,GAmBdnkB,KAAKshB,QAAQ1iB,IAAI,kBACA,iBAAT2F,EACTvE,KAAKshB,QAAQyC,IAAI,eAAgB,4BACxB/jB,KAAKqkB,WAAarkB,KAAKqkB,UAAU5D,KAC1CzgB,KAAKshB,QAAQyC,IAAI,eAAgB/jB,KAAKqkB,UAAU5D,MACvCyB,GAAwBsC,gBAAgB7kB,UAAUykB,cAAc7f,IACzEvE,KAAKshB,QAAQyC,IAAI,eAAgB,qDAKnC7B,IACFliB,KAAKyjB,KAAO,WACV,IAAItf,EAAWif,EAASpjB,MACxB,GAAImE,EACF,OAAOA,EAGT,GAAInE,KAAKqkB,UACP,OAAOxgB,QAAQC,QAAQ9D,KAAKqkB,WACvB,GAAIrkB,KAAKykB,iBACd,OAAO5gB,QAAQC,QAAQ,IAAIqe,KAAK,CAACniB,KAAKykB,oBACjC,GAAIzkB,KAAKukB,cACd,MAAM,IAAI9iB,MAAM,wCAEhB,OAAOoC,QAAQC,QAAQ,IAAIqe,KAAK,CAACniB,KAAKmkB,cAI1CnkB,KAAK0kB,YAAc,WACjB,GAAI1kB,KAAKykB,iBAAkB,CACzB,IAAIE,EAAavB,EAASpjB,MAC1B,OAAI2kB,IAGAlH,YAAY6E,OAAOtiB,KAAKykB,kBACnB5gB,QAAQC,QACb9D,KAAKykB,iBAAiB/I,OAAOtY,MAC3BpD,KAAKykB,iBAAiBG,WACtB5kB,KAAKykB,iBAAiBG,WAAa5kB,KAAKykB,iBAAiBtG,aAItDta,QAAQC,QAAQ9D,KAAKykB,mBAG9B,OAAOzkB,KAAKyjB,OAAOpf,KAAKmf,KAK9BxjB,KAAKmX,KAAO,WACV,IAnHoBsM,EAClBF,EACAI,EAiHExf,EAAWif,EAASpjB,MACxB,GAAImE,EACF,OAAOA,EAGT,GAAInE,KAAKqkB,UACP,OAzHkBZ,EAyHIzjB,KAAKqkB,UAxH3Bd,EAAS,IAAIG,WACbC,EAAUL,EAAgBC,GAC9BA,EAAOsB,WAAWpB,GACXE,EAsHE,GAAI3jB,KAAKykB,iBACd,OAAO5gB,QAAQC,QApHrB,SAA+BggB,GAI7B,IAHA,IAAIhI,EAAO,IAAIL,WAAWqI,GACtBgB,EAAQ,IAAI1kB,MAAM0b,EAAK3b,QAElBpC,EAAI,EAAGA,EAAI+d,EAAK3b,OAAQpC,IAC/B+mB,EAAM/mB,GAAK8e,OAAOC,aAAahB,EAAK/d,IAEtC,OAAO+mB,EAAMC,KAAK,IA6GSC,CAAsBhlB,KAAKykB,mBAC7C,GAAIzkB,KAAKukB,cACd,MAAM,IAAI9iB,MAAM,wCAEhB,OAAOoC,QAAQC,QAAQ9D,KAAKmkB,YAI5BjC,IACFliB,KAAKilB,SAAW,WACd,OAAOjlB,KAAKmX,OAAO9S,KAAKua,KAI5B5e,KAAKmC,KAAO,WACV,OAAOnC,KAAKmX,OAAO9S,KAAKtC,KAAKC,QAGxBhC,KAlOT8iB,EAAQnjB,UAAUqjB,OAAS,SAAS1kB,EAAMU,GACxCV,EAAOkkB,EAAclkB,GACrBU,EAAQ0jB,EAAe1jB,GACvB,IAAIkmB,EAAWllB,KAAK+iB,IAAIzkB,GACxB0B,KAAK+iB,IAAIzkB,GAAQ4mB,EAAWA,EAAW,KAAOlmB,EAAQA,GAGxD8jB,EAAQnjB,UAAkB,OAAI,SAASrB,UAC9B0B,KAAK+iB,IAAIP,EAAclkB,KAGhCwkB,EAAQnjB,UAAUf,IAAM,SAASN,GAE/B,OADAA,EAAOkkB,EAAclkB,GACd0B,KAAKmlB,IAAI7mB,GAAQ0B,KAAK+iB,IAAIzkB,GAAQ,MAG3CwkB,EAAQnjB,UAAUwlB,IAAM,SAAS7mB,GAC/B,OAAO0B,KAAK+iB,IAAInjB,eAAe4iB,EAAclkB,KAG/CwkB,EAAQnjB,UAAUokB,IAAM,SAASzlB,EAAMU,GACrCgB,KAAK+iB,IAAIP,EAAclkB,IAASokB,EAAe1jB,IAGjD8jB,EAAQnjB,UAAUgD,QAAU,SAASwF,EAAU1E,GAC7C,IAAK,IAAInF,KAAQ0B,KAAK+iB,IAChB/iB,KAAK+iB,IAAInjB,eAAetB,IAC1B6J,EAASjK,KAAKuF,EAASzD,KAAK+iB,IAAIzkB,GAAOA,EAAM0B,OAKnD8iB,EAAQnjB,UAAUylB,KAAO,WACvB,IAAIxC,EAAQ,GAIZ,OAHA5iB,KAAK2C,SAAQ,SAAS3D,EAAOV,GAC3BskB,EAAMvd,KAAK/G,MAENqkB,EAAYC,IAGrBE,EAAQnjB,UAAU0lB,OAAS,WACzB,IAAIzC,EAAQ,GAIZ,OAHA5iB,KAAK2C,SAAQ,SAAS3D,GACpB4jB,EAAMvd,KAAKrG,MAEN2jB,EAAYC,IAGrBE,EAAQnjB,UAAU2lB,QAAU,WAC1B,IAAI1C,EAAQ,GAIZ,OAHA5iB,KAAK2C,SAAQ,SAAS3D,EAAOV,GAC3BskB,EAAMvd,KAAK,CAAC/G,EAAMU,OAEb2jB,EAAYC,IAGjBV,IACFY,EAAQnjB,UAAUb,OAAOmG,UAAY6d,EAAQnjB,UAAU2lB,SA6KzD,IAAIC,EAAU,CAAC,SAAU,MAAO,OAAQ,UAAW,OAAQ,OAOpD,SAASC,EAAQC,EAAOC,GAC7B,KAAM1lB,gBAAgBwlB,GACpB,MAAM,IAAIrgB,UAAU,8FAItB,IAXuBkc,EACnBsE,EAUAphB,GADJmhB,EAAUA,GAAW,IACFnhB,KAEnB,GAAIkhB,aAAiBD,EAAS,CAC5B,GAAIC,EAAMpC,SACR,MAAM,IAAIle,UAAU,gBAEtBnF,KAAK8G,IAAM2e,EAAM3e,IACjB9G,KAAK4lB,YAAcH,EAAMG,YACpBF,EAAQpE,UACXthB,KAAKshB,QAAU,IAAIwB,EAAQ2C,EAAMnE,UAEnCthB,KAAKqhB,OAASoE,EAAMpE,OACpBrhB,KAAKd,KAAOumB,EAAMvmB,KAClBc,KAAK6lB,OAASJ,EAAMI,OACfthB,GAA2B,MAAnBkhB,EAAMvB,YACjB3f,EAAOkhB,EAAMvB,UACbuB,EAAMpC,UAAW,QAGnBrjB,KAAK8G,IAAM+V,OAAO4I,GAYpB,GATAzlB,KAAK4lB,YAAcF,EAAQE,aAAe5lB,KAAK4lB,aAAe,eAC1DF,EAAQpE,SAAYthB,KAAKshB,UAC3BthB,KAAKshB,QAAU,IAAIwB,EAAQ4C,EAAQpE,UAErCthB,KAAKqhB,QArCkBA,EAqCOqE,EAAQrE,QAAUrhB,KAAKqhB,QAAU,MApC3DsE,EAAUtE,EAAOyE,cACdP,EAAQ1G,QAAQ8G,IAAY,EAAIA,EAAUtE,GAoCjDrhB,KAAKd,KAAOwmB,EAAQxmB,MAAQc,KAAKd,MAAQ,KACzCc,KAAK6lB,OAASH,EAAQG,QAAU7lB,KAAK6lB,OACrC7lB,KAAK+lB,SAAW,MAEK,QAAhB/lB,KAAKqhB,QAAoC,SAAhBrhB,KAAKqhB,SAAsB9c,EACvD,MAAM,IAAIY,UAAU,6CAItB,GAFAnF,KAAKikB,UAAU1f,KAEK,QAAhBvE,KAAKqhB,QAAoC,SAAhBrhB,KAAKqhB,QACV,aAAlBqE,EAAQM,OAA0C,aAAlBN,EAAQM,OAAsB,CAEhE,IAAIC,EAAgB,gBACpB,GAAIA,EAAcxD,KAAKziB,KAAK8G,KAE1B9G,KAAK8G,IAAM9G,KAAK8G,IAAIzE,QAAQ4jB,EAAe,QAAS,IAAIhlB,MAAOoC,eAC1D,CAGLrD,KAAK8G,MADe,KACO2b,KAAKziB,KAAK8G,KAAO,IAAM,KAAO,MAAO,IAAI7F,MAAOoC,YAUnF,SAASub,EAAOra,GACd,IAAI2hB,EAAO,IAAI5B,SAYf,OAXA/f,EACG4hB,OACApG,MAAM,KACNpd,SAAQ,SAASyjB,GAChB,GAAIA,EAAO,CACT,IAAIrG,EAAQqG,EAAMrG,MAAM,KACpBzhB,EAAOyhB,EAAM8C,QAAQxgB,QAAQ,MAAO,KACpCrD,EAAQ+gB,EAAMgF,KAAK,KAAK1iB,QAAQ,MAAO,KAC3C6jB,EAAKlD,OAAOqD,mBAAmB/nB,GAAO+nB,mBAAmBrnB,QAGxDknB,EA6BF,SAASI,EAASC,EAAUb,GACjC,KAAM1lB,gBAAgBsmB,GACpB,MAAM,IAAInhB,UAAU,8FAEjBugB,IACHA,EAAU,IAGZ1lB,KAAKygB,KAAO,UACZzgB,KAAKyW,YAA4B/U,IAAnBgkB,EAAQjP,OAAuB,IAAMiP,EAAQjP,OAC3DzW,KAAKwmB,GAAKxmB,KAAKyW,QAAU,KAAOzW,KAAKyW,OAAS,IAC9CzW,KAAKymB,gBAAoC/kB,IAAvBgkB,EAAQe,WAA2B,GAAK,GAAKf,EAAQe,WACvEzmB,KAAKshB,QAAU,IAAIwB,EAAQ4C,EAAQpE,SACnCthB,KAAK8G,IAAM4e,EAAQ5e,KAAO,GAC1B9G,KAAKikB,UAAUsC,GA5DjBf,EAAQ7lB,UAAU+mB,MAAQ,WACxB,OAAO,IAAIlB,EAAQxlB,KAAM,CAACuE,KAAMvE,KAAKkkB,aA2CvCF,EAAK9lB,KAAKsnB,EAAQ7lB,WAmBlBqkB,EAAK9lB,KAAKooB,EAAS3mB,WAEnB2mB,EAAS3mB,UAAU+mB,MAAQ,WACzB,OAAO,IAAIJ,EAAStmB,KAAKkkB,UAAW,CAClCzN,OAAQzW,KAAKyW,OACbgQ,WAAYzmB,KAAKymB,WACjBnF,QAAS,IAAIwB,EAAQ9iB,KAAKshB,SAC1Bxa,IAAK9G,KAAK8G,OAIdwf,EAASjlB,MAAQ,WACf,IAAIkgB,EAAW,IAAI+E,EAAS,KAAM,CAAC7P,OAAQ,EAAGgQ,WAAY,KAE1D,OADAlF,EAASd,KAAO,QACTc,GAGT,IAAIoF,EAAmB,CAAC,IAAK,IAAK,IAAK,IAAK,KAE5CL,EAASM,SAAW,SAAS9f,EAAK2P,GAChC,IAA0C,IAAtCkQ,EAAiB9H,QAAQpI,GAC3B,MAAM,IAAIoQ,WAAW,uBAGvB,OAAO,IAAIP,EAAS,KAAM,CAAC7P,OAAQA,EAAQ6K,QAAS,CAACwF,SAAUhgB,MAG1D,IAAIigB,EAAe9M,EAAO8M,aACjC,IACE,IAAIA,EACJ,MAAOpe,IACPoe,EAAe,SAASpmB,EAASrC,GAC/B0B,KAAKW,QAAUA,EACfX,KAAK1B,KAAOA,EACZ,IAAI+C,EAAQI,MAAMd,GAClBX,KAAK2B,MAAQN,EAAMM,QAERhC,UAAYlB,OAAOY,OAAOoC,MAAM9B,WAC7ConB,EAAapnB,UAAU4b,YAAcwL,EAGhC,SAAS7M,EAAMuL,EAAOvd,GAC3B,OAAO,IAAIrE,SAAQ,SAASC,EAASC,GACnC,IAAIqd,EAAU,IAAIoE,EAAQC,EAAOvd,GAEjC,GAAIkZ,EAAQyE,QAAUzE,EAAQyE,OAAOmB,QACnC,OAAOjjB,EAAO,IAAIgjB,EAAa,UAAW,eAG5C,IAAIE,EAAM,IAAIC,eAEd,SAASC,IACPF,EAAIG,QAGNH,EAAIjG,OAAS,WACX,IAnGgBqG,EAChB/F,EAkGIoE,EAAU,CACZjP,OAAQwQ,EAAIxQ,OACZgQ,WAAYQ,EAAIR,WAChBnF,SAtGc+F,EAsGQJ,EAAIK,yBAA2B,GArGvDhG,EAAU,IAAIwB,EAGQuE,EAAWhlB,QAAQ,eAAgB,KAK1D0d,MAAM,MACNgD,KAAI,SAASG,GACZ,OAAgC,IAAzBA,EAAOrE,QAAQ,MAAcqE,EAAOqE,OAAO,EAAGrE,EAAO/iB,QAAU+iB,KAEvEvgB,SAAQ,SAAS6kB,GAChB,IAAIC,EAAQD,EAAKzH,MAAM,KACnBzgB,EAAMmoB,EAAM5E,QAAQsD,OACxB,GAAI7mB,EAAK,CACP,IAAIN,EAAQyoB,EAAM1C,KAAK,KAAKoB,OAC5B7E,EAAQ0B,OAAO1jB,EAAKN,OAGnBsiB,IAmFHoE,EAAQ5e,IAAM,gBAAiBmgB,EAAMA,EAAIS,YAAchC,EAAQpE,QAAQ1iB,IAAI,iBAC3E,IAAI2F,EAAO,aAAc0iB,EAAMA,EAAI1F,SAAW0F,EAAIU,aAClD9gB,YAAW,WACT/C,EAAQ,IAAIwiB,EAAS/hB,EAAMmhB,MAC1B,IAGLuB,EAAI1d,QAAU,WACZ1C,YAAW,WACT9C,EAAO,IAAIoB,UAAU,6BACpB,IAGL8hB,EAAIW,UAAY,WACd/gB,YAAW,WACT9C,EAAO,IAAIoB,UAAU,6BACpB,IAGL8hB,EAAIY,QAAU,WACZhhB,YAAW,WACT9C,EAAO,IAAIgjB,EAAa,UAAW,iBAClC,IAWLE,EAAIa,KAAK1G,EAAQC,OARjB,SAAgBva,GACd,IACE,MAAe,KAARA,GAAcmT,EAAO6M,SAASiB,KAAO9N,EAAO6M,SAASiB,KAAOjhB,EACnE,MAAOtF,GACP,OAAOsF,GAIckhB,CAAO5G,EAAQta,MAAM,GAElB,YAAxBsa,EAAQwE,YACVqB,EAAIgB,iBAAkB,EACW,SAAxB7G,EAAQwE,cACjBqB,EAAIgB,iBAAkB,GAGpB,iBAAkBhB,IAChB/E,EACF+E,EAAIiB,aAAe,OAEnBhG,GACAd,EAAQE,QAAQ1iB,IAAI,kBACyD,IAA7EwiB,EAAQE,QAAQ1iB,IAAI,gBAAgBigB,QAAQ,8BAE5CoI,EAAIiB,aAAe,iBAInBhgB,GAAgC,iBAAjBA,EAAKoZ,SAA0BpZ,EAAKoZ,mBAAmBwB,EAKxE1B,EAAQE,QAAQ3e,SAAQ,SAAS3D,EAAOV,GACtC2oB,EAAIkB,iBAAiB7pB,EAAMU,MAL7BP,OAAO0kB,oBAAoBjb,EAAKoZ,SAAS3e,SAAQ,SAASrE,GACxD2oB,EAAIkB,iBAAiB7pB,EAAMokB,EAAexa,EAAKoZ,QAAQhjB,QAQvD8iB,EAAQyE,SACVzE,EAAQyE,OAAOuC,iBAAiB,QAASjB,GAEzCF,EAAIlG,mBAAqB,WAEA,IAAnBkG,EAAI1N,YACN6H,EAAQyE,OAAOwC,oBAAoB,QAASlB,KAKlDF,EAAIhQ,UAAkC,IAAtBmK,EAAQ8C,UAA4B,KAAO9C,EAAQ8C,cAIvEhK,EAAMoO,UAAW,EAEZrO,EAAOC,QACVD,EAAOC,MAAQA,EACfD,EAAO6I,QAAUA,EACjB7I,EAAOuL,QAAUA,EACjBvL,EAAOqM,SAAWA,I,gBC3lBpB,IAAIiC,EACJ,GAA0B,iBAAftG,WACVsG,EAActG,gBAEd,IACCsG,EAAc,EAAQ,IACrB,MAAOlnB,IACP,QAED,GADKknB,GAAiC,oBAAX3G,SAA0B2G,EAAc3G,SAC9D2G,EAAe,MAAM,IAAI9mB,MAAM,mCAItC,IAAI+mB,EAAkBD,EAAYE,WAAaF,EAAYG,aACvDC,EAAoB,EAAQ,IAMhC,SAASC,EAAaC,EAAKC,GAiB1B,OAdIA,EACe,IAAIN,EAAgBK,EAAKC,GAGzB,IAAIN,EAAgBK,GAYpCL,GACH,CAAC,aAAc,OAAQ,UAAW,UAAU7lB,SAAQ,SAASomB,GAC5DtqB,OAAOC,eAAekqB,EAAcG,EAAM,CACzCnqB,IAAK,WAAa,OAAO4pB,EAAgBO,SAQ5CjrB,EAAOD,QAAU,CACb,aAAiB2qB,EAAkBI,EAAe,KAClD,QAAiBD,I,cCpDrB,IAAIK,EAAgB,WACnB,GAAoB,iBAAT5gB,MAAqBA,KAAM,OAAOA,KAC7C,GAAsB,iBAAXwZ,QAAuBA,OAAQ,OAAOA,OACjD,MAAM,IAAIngB,MAAM,oCAGjB3D,EAAOD,QAAU,WAChB,GAAImC,KAAM,OAAOA,KAKjB,GAA0B,iBAAfiiB,YAA2BA,WAAY,OAAOA,WAKzD,IACCxjB,OAAOC,eAAeD,OAAOkB,UAAW,aAAc,CACrDf,IAAK,WAAc,OAAOoB,MAC1BipB,cAAc,IAEd,MAAO5nB,GAGR,OAAO2nB,IAER,IAEC,OAAKE,YAAmBF,IAEvB,eACMvqB,OAAOkB,UAAUupB,YA1BT,I,gBCNjBprB,EAAOD,QAAU,EAAQ,IAAmBkJ,S,onCCC5ClJ,EAAQsB,YAAa,EACrBtB,EAAQ2J,iBAAc,EACtB,IAAIA,EACA,SAAqBC,EAAOT,EAAYU,EAAM4Q,GAC1CtY,KAAKyH,MAAQA,EACbzH,KAAKgH,WAAaA,EAClBhH,KAAK0H,KAAOA,EACZ1H,KAAKsY,QAAUA,GAIvBza,EAAQ2J,YAAcA,G,6BCXtB3J,EAAQsB,YAAa,EACrBtB,EAAQmK,mBAAgB,EACxB,IAAIA,EACA,SAAuBP,EAAO8M,EAAYtM,GACtCjI,KAAKyH,MAAQA,EACbzH,KAAKuU,WAAaA,EAClBvU,KAAKiI,SAAWA,GAIxBpK,EAAQmK,cAAgBA,G,6BCVxBnK,EAAQsB,YAAa,EACrB,IAAI0G,EAAW,EAAQ,GACnBuU,EAAa,EAAQ,GACrB+O,EAAgB,EAAQ,IACxB9iB,EAAU,EAAQ,GAClB+X,EAAU,EAAQ,GAClBgL,EAAyB,WACzB,SAASA,EAAQtiB,GACb9G,KAAK8G,IAAM,GACX9G,KAAK8G,IAAMA,EAkDf,OAhDAsiB,EAAQzpB,UAAUzB,KAAO,SAAU4I,EAAKuiB,EAAQ9kB,GAC5C,IAAIoD,EAASyS,EAAW9U,SAASqC,OACjC9B,EAAkB,QAAEnF,KAAKiH,GACzB,IAAI2hB,EAAStpB,KAAK8G,IAAMA,EACxB,GAAc,MAAVuiB,EAAgB,CAChB,IAAIE,EAAWvpB,KAAKwpB,eAAeH,GACnCtoB,QAAQyJ,IAAI+e,GACZD,GAAUC,EAEd,IAIInI,EAAU,CAAEC,OAJI,OAImBC,QAHzB,CACV,eAAgB,oBAEqCpiB,KAAM,OAAQqF,KAAM8B,EAAiB,QAAElE,KAAKoC,IACrG,OAAOvE,KAAKypB,UAAUH,EAAQlI,IAElCgI,EAAQzpB,UAAU6pB,eAAiB,SAAUH,GACzC,IAAIK,EAAO,IACX,IAAK,IAAIlrB,KAAK6qB,EACVK,GAAQlrB,EAAI,IAAM6qB,EAAO7qB,GAAK,IAGlC,OADAkrB,EAAOA,EAAKC,UAAU,EAAGD,EAAKvpB,OAAS,IAG3CipB,EAAQzpB,UAAU8pB,UAAY,SAAU3iB,EAAKsa,GACzC,IAAIvY,EAAQ7I,KACZe,QAAQyJ,IAAI,aACZ,IAAIof,EAAWxL,EAAiB,QAAEpE,kBAElC,OADAjZ,QAAQyJ,IAAI,YACLof,EAAS9iB,EAAKsa,GAAS/c,MAAK,SAAUkd,GACzC,OAAOA,EAASpf,UACjBkC,MAAK,SAAUmd,GAOd,OANA3b,EAAkB,QAAEnF,KAAK,QAAU0gB,EAAQC,OAAS,KAAOva,EAAM,SAAWT,EAAiB,QAAElE,KAAKqf,IAEpGzgB,QAAQyJ,IAAIgX,GAIL3d,QAAQC,QAAQ+E,EAAMghB,qBAAqBrI,QAG1D4H,EAAQzpB,UAAUkqB,qBAAuB,SAAUtI,GAC/C,IAAIuI,EAAc,IAAIX,EAAuB,SAAE,GAI/C,OAHAW,EAAYzgB,KAAOkY,EAASlY,KAC5BygB,EAAYC,IAAMxI,EAAS5gB,QAC3BmpB,EAAYhK,KAAOyB,EAASzB,KACrBgK,GAEJV,EArDiB,GAuD5BvrB,EAAiB,QAAIurB,G,6BC7DrBvrB,EAAQsB,YAAa,EACrB,IAAI6qB,EAA6B,WAC7B,SAASA,EAAYC,QACD,IAAZA,IAAsBA,GAAU,GACpCjqB,KAAK+pB,IAAM,GACX/pB,KAAKqJ,KAAO,KACR4gB,IACAjqB,KAAK8f,KAAO,KASpB,OANAkK,EAAYrqB,UAAU4Y,UAAY,WAC9B,OAAqB,MAAdvY,KAAK8f,MAEhBkK,EAAYrqB,UAAUyJ,SAAW,WAC7B,OAAQpJ,KAAKuY,aAEVyR,EAfqB,GAiBhCnsB,EAAiB,QAAImsB,G,6BChBrB,IAAI7e,EA0BAuD,EA8BApD,EA4EAb,EAcAG,EAgBAqC,EApKJpP,EAAQsB,YAAa,EACrBtB,EAAQoP,yBAA2BpP,EAAQ+M,iBAAmB/M,EAAQ4M,cAAgB5M,EAAQyN,aAAezN,EAAQ6Q,kBAAoB7Q,EAAQsN,oBAAiB,EAElK,SAAWA,GAEPA,EAAeA,EAAwB,QAAI,MAAQ,UAEnDA,EAAeA,EAA6B,aAAI,MAAQ,eAExDA,EAAeA,EAA2B,WAAI,MAAQ,aAEtDA,EAAeA,EAAgC,gBAAI,MAAQ,kBAE3DA,EAAeA,EAAwB,QAAI,MAAQ,UAEnDA,EAAeA,EAA2B,WAAI,MAAQ,aAEtDA,EAAeA,EAAkC,kBAAI,MAAQ,oBAE7DA,EAAeA,EAAgC,gBAAI,MAAQ,kBAE3DA,EAAeA,EAA+B,eAAI,MAAQ,iBAE1DA,EAAeA,EAAgC,gBAAI,MAAQ,kBAE3DA,EAAeA,EAAmC,mBAAI,MAAQ,qBAtBlE,CAuBGA,IAAmBA,EAAiB,KACvCtN,EAAQsN,eAAiBA,EAEzB,SAAWuD,GAEPA,EAAkBA,EAA8B,WAAI,KAAQ,aAE5DA,EAAkBA,EAAiC,cAAI,MAAQ,gBAE/DA,EAAkBA,EAAiC,cAAI,MAAQ,gBAE/DA,EAAkBA,EAAkC,eAAI,MAAQ,iBAEhEA,EAAkBA,EAAuC,oBAAI,MAAQ,sBAErEA,EAAkBA,EAA2C,wBAAI,MAAQ,0BAEzEA,EAAkBA,EAAoC,iBAAI,MAAQ,mBAElEA,EAAkBA,EAAuC,oBAAI,MAAQ,sBAErEA,EAAkBA,EAAoC,iBAAI,MAAQ,mBAElEA,EAAkBA,EAAuC,oBAAI,MAAQ,sBAErEA,EAAkBA,EAA2C,wBAAI,MAAQ,0BAEzEA,EAAkBA,EAA8C,2BAAI,MAAQ,6BAE5EA,EAAkBA,EAAqC,kBAAI,MAAQ,oBA1BvE,CA2BGA,IAAsBA,EAAoB,KAC7C7Q,EAAQ6Q,kBAAoBA,EAE5B,SAAWpD,GAIPA,EAAaA,EAAyB,WAAI,KAAQ,aAIlDA,EAAaA,EAA2B,aAAI,MAAQ,eAIpDA,EAAaA,EAA4B,cAAI,MAAQ,gBAIrDA,EAAaA,EAA4B,cAAI,MAAQ,gBAIrDA,EAAaA,EAAyB,WAAI,MAAQ,aAIlDA,EAAaA,EAA6B,eAAI,MAAQ,iBAItDA,EAAaA,EAA6B,eAAI,MAAQ,iBAItDA,EAAaA,EAA4B,cAAI,MAAQ,gBAIrDA,EAAaA,EAA6B,eAAI,MAAQ,iBAItDA,EAAaA,EAAyB,WAAI,MAAQ,aAIlDA,EAAaA,EAA2B,aAAI,MAAQ,eAIpDA,EAAaA,EAAiC,mBAAI,MAAQ,qBAI1DA,EAAaA,EAAwB,UAAI,MAAQ,YAIjDA,EAAaA,EAA6B,eAAI,MAAQ,iBAItDA,EAAaA,EAA+B,iBAAI,MAAQ,mBAIxDA,EAAaA,EAAoC,sBAAI,MAAQ,wBAI7DA,EAAaA,EAAuC,yBAAI,MAAQ,2BAIhEA,EAAaA,EAA4B,cAAI,MAAQ,gBAxEzD,CAyEGA,IAAiBA,EAAe,KACnCzN,EAAQyN,aAAeA,EAEvB,SAAWb,GAEPA,EAAcA,EAAoB,KAAI,MAAQ,OAE9CA,EAAcA,EAAqB,MAAI,KAAQ,QAE/CA,EAAcA,EAAyB,UAAI,MAAQ,YAEnDA,EAAcA,EAA4B,aAAI,MAAQ,eAEtDA,EAAcA,EAAsB,OAAI,MAAQ,SAVpD,CAWGA,IAAkBA,EAAgB,KACrC5M,EAAQ4M,cAAgBA,EAExB,SAAWG,GAEPA,EAAiBA,EAA8B,YAAI,KAAQ,cAE3DA,EAAiBA,EAA4C,0BAAI,MAAQ,4BAEzEA,EAAiBA,EAA+C,6BAAI,MAAQ,+BAE5EA,EAAiBA,EAAmD,iCAAI,MAAQ,mCAEhFA,EAAiBA,EAAmD,iCAAI,MAAQ,mCAEhFA,EAAiBA,EAAwD,sCAAI,MAAQ,wCAZzF,CAaGA,IAAqBA,EAAmB,KAC3C/M,EAAQ+M,iBAAmBA,EAE3B,SAAWqC,GAEPA,EAAyBA,EAA8C,oBAAI,KAAQ,sBAEnFA,EAAyBA,EAA8C,oBAAI,MAAQ,sBAJvF,CAKGA,IAA6BA,EAA2B,KAC3DpP,EAAQoP,yBAA2BA,G,6BC3KnCpP,EAAQsB,YAAa,EACrBtB,EAAQuZ,iBAAc,EACtB,IAAI/Q,EAAU,EAAQ,GAIlB+Q,EAA6B,WAC7B,SAASA,EAAY3P,GACjBzH,KAAKuV,UAAYlP,EAAiB,QAAErD,OACpChD,KAAKyH,MAAQA,EACbzH,KAAK4V,cAAgB5V,KAAKkqB,aAAa,EAAG,KAC1ClqB,KAAK0V,YAAczU,KAAKe,OAAM,IAAIf,MAAOkC,YAmD7C,OA3CAiU,EAAYzX,UAAUuqB,aAAe,SAAUC,EAAKC,GAChD,IAAIC,EAAQD,EAAMD,EAClB,OAAOlnB,KAAK4S,MAAM5S,KAAKC,SAAWmnB,GAASF,GAS/C/S,EAAYzX,UAAU0X,qBAAuB,SAAUnF,EAAQE,EAAM+E,GACjEnX,KAAKkS,OAASA,EACdlS,KAAKoS,KAAOA,EACZ,IAAI7N,EAAO,CAAEkc,KAAM,EAAG6J,QAASnT,GAC/BnX,KAAKwV,YAAcnP,EAAiB,QAAElE,KAAKoC,IAQ/C6S,EAAYzX,UAAU4X,0BAA4B,SAAUrF,EAAQ6C,EAASoC,GACzEnX,KAAKkS,OAASA,EACdlS,KAAK+U,QAAUA,EACf,IAAIxQ,EAAO,CAAEkc,KAAM,EAAG6J,QAASnT,GAC/BnX,KAAKwV,YAAcnP,EAAiB,QAAElE,KAAKoC,IAU/C6S,EAAYzX,UAAU4qB,yBAA2B,SAAUrY,EAAQE,EAAMqO,EAAM8B,GAC3EviB,KAAKkS,OAASA,EACdlS,KAAKoS,KAAOA,EACZ,IAAI7N,EAAO,CAAEkc,KAAMA,EAAM6J,QAAS/H,GAClCviB,KAAKwV,YAAcnP,EAAiB,QAAElE,KAAKoC,IAExC6S,EAxDqB,GA0DhCvZ,EAAQuZ,YAAcA","file":"lim-sdk.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","\"use strict\";\r\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\nexports.__esModule = true;\r\nvar Logger = /** @class */ (function () {\r\n    function Logger() {\r\n    }\r\n    Logger.info = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (Logger.debug) {\r\n            console.info.apply(console, __spreadArrays([new Date().toISOString() + \" : \" + message], optionalParams));\r\n        }\r\n    };\r\n    Logger.infoTag = function (tag, message) {\r\n        var optionalParams = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 2] = arguments[_i];\r\n        }\r\n        if (Logger.debug) {\r\n            console.info.apply(console, __spreadArrays([new Date().toISOString() + \" \" + tag + \" : \" + message], optionalParams));\r\n        }\r\n    };\r\n    Logger.error = function (message) {\r\n        var optionalParams = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 1] = arguments[_i];\r\n        }\r\n        if (Logger.debug) {\r\n            console.error.apply(console, __spreadArrays([new Date().toISOString() + \" : \" + message], optionalParams));\r\n        }\r\n    };\r\n    Logger.errorTag = function (tag, message) {\r\n        var optionalParams = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            optionalParams[_i - 2] = arguments[_i];\r\n        }\r\n        if (Logger.debug) {\r\n            console.error.apply(console, __spreadArrays([new Date().toISOString() + \" \" + tag + \"  : \" + message], optionalParams));\r\n        }\r\n    };\r\n    Logger.trace = function (e) {\r\n        if (Logger.debug) {\r\n            if (e instanceof Error) {\r\n                console.error(e.message + \" \\n \" + (e.stack !== undefined ? e.stack : ''));\r\n            }\r\n            else {\r\n                console.error(e);\r\n            }\r\n        }\r\n    };\r\n    Logger.debug = true;\r\n    return Logger;\r\n}());\r\nexports[\"default\"] = Logger;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nvar Beans = /** @class */ (function () {\r\n    function Beans() {\r\n    }\r\n    Beans.to = function (target) {\r\n        return JSON.parse(JSON.stringify(target));\r\n    };\r\n    Beans.bean = function (json) {\r\n        return JSON.parse(json);\r\n    };\r\n    Beans.copy = function (target) {\r\n        return Beans.to(target);\r\n    };\r\n    Beans.replace = function (target, replaceJSON) {\r\n        var r = Beans.to(target);\r\n        for (var v in replaceJSON) {\r\n            r[v] = replaceJSON[v];\r\n        }\r\n        return r;\r\n    };\r\n    Beans.toMapByKey = function (arrs, key) {\r\n        var result = {};\r\n        arrs.forEach(function (v) {\r\n            if (v.hasOwnProperty(key)) {\r\n                result[key] = v;\r\n            }\r\n        });\r\n        return result;\r\n    };\r\n    Beans.json = function (target) {\r\n        return JSON.stringify(target);\r\n    };\r\n    Beans.strEmpty = function (s) {\r\n        return !!s;\r\n    };\r\n    Beans.strNotEmpty = function (s) {\r\n        return !s;\r\n    };\r\n    Beans.isEmpty = function (str) {\r\n        if (str === null ||\r\n            str === '' ||\r\n            str === undefined ||\r\n            str.length === 0) {\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    };\r\n    Beans.uuid = function () {\r\n        return (Math.random() * 36).toString(36).slice(2) + new Date().getTime().toString();\r\n    };\r\n    return Beans;\r\n}());\r\nexports[\"default\"] = Beans;\r\n","\"use strict\";\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nexports.__esModule = true;\r\nexports.imClient = exports.getLen = exports.limLogin = exports.ImClient = exports.sleep = exports.State = void 0;\r\nvar Logger_1 = require(\"../log/Logger\");\r\nvar ByteBuffer_1 = require(\"../codec/ByteBuffer\");\r\nvar LoginPack_1 = require(\"../pack/LoginPack\");\r\nvar WebToolkit_1 = require(\"../common/WebToolkit\");\r\nvar websocket_1 = require(\"websocket\");\r\nvar RequestBase_1 = require(\"../model/RequestBase\");\r\nvar RequestParams_1 = require(\"../model/RequestParams\");\r\nvar HttpApi_1 = require(\"./HttpApi\");\r\nvar utils_1 = require(\"../common/utils\");\r\nvar Command_1 = require(\"../common/Command\");\r\nvar MessagePack_1 = require(\"../pack/MessagePack\");\r\nvar loginTimeout = 10 * 1000; // 10 seconds\r\nvar heartbeatInterval = 10 * 1000; // seconds\r\nvar firstMonitorSocket = false; // 第一次监听socket\r\nvar State;\r\n(function (State) {\r\n    State[State[\"INIT\"] = 0] = \"INIT\";\r\n    State[State[\"CONNECTING\"] = 1] = \"CONNECTING\";\r\n    State[State[\"CONNECTED\"] = 2] = \"CONNECTED\";\r\n    State[State[\"RECONNECTING\"] = 3] = \"RECONNECTING\";\r\n    State[State[\"CLOSING\"] = 4] = \"CLOSING\";\r\n    State[State[\"CLOSED\"] = 5] = \"CLOSED\";\r\n})(State = exports.State || (exports.State = {}));\r\nvar TimeUnit;\r\n(function (TimeUnit) {\r\n    TimeUnit[TimeUnit[\"Second\"] = 1000] = \"Second\";\r\n    TimeUnit[TimeUnit[\"Millisecond\"] = 1] = \"Millisecond\";\r\n})(TimeUnit || (TimeUnit = {}));\r\nexports.sleep = function (second, Unit) {\r\n    if (Unit === void 0) { Unit = TimeUnit.Second; }\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            return [2 /*return*/, new Promise(function (resolve, _) {\r\n                    setTimeout(function () {\r\n                        resolve();\r\n                    }, second * Unit);\r\n                })];\r\n        });\r\n    });\r\n};\r\nvar ImClient = /** @class */ (function () {\r\n    function ImClient() {\r\n        this.url = \"\";\r\n        this.version = 1;\r\n        this.clientType = 1;\r\n        this.listeners = null;\r\n        this.state = State.INIT;\r\n        this.lastOfflineMessageSequence = 0;\r\n        this.offlineMessageList = new Array();\r\n        this.httpUrl = \"\"; //http://127.0.0.1:8000/v1  系统稳定之后直接直接写 IM 业务系统的域名地址\r\n    }\r\n    /**\r\n     * 获取请求基础信息，返回 appId、clientType、imei\r\n     */\r\n    ImClient.prototype.getRequestBase = function () {\r\n        return new RequestBase_1.RequestBase(this.appId, this.clientType, this.imei, this.userId);\r\n    };\r\n    /**\r\n     * 获取当前用户的 userId\r\n     */\r\n    ImClient.prototype.getUserId = function () {\r\n        return this.userId;\r\n    };\r\n    /**\r\n     * 判断当前 SDK 是否已经初始化，即判断 websocket 是否处于连接状态\r\n     */\r\n    ImClient.prototype.isInit = function () {\r\n        return this.state == State.CONNECTED;\r\n    };\r\n    /**\r\n     * 获取业务接口请求参数，返回 appId、userId、userSign\r\n     */\r\n    ImClient.prototype.getRequestParams = function () {\r\n        return new RequestParams_1.RequestParams(this.appId, this.userId, this.userSign);\r\n    };\r\n    /**\r\n     * 初始化 SDK\r\n     *\r\n     * @param httpUrl im 业务系统的域名地址\r\n     * @param appId\r\n     * @param userId\r\n     * @param userSign 接口的鉴权令牌\r\n     * @param listeners 注册的回调监听事件\r\n     * @param callback 初始化完成之后回调的方法\r\n     */\r\n    ImClient.prototype.init = function (httpUrl, appId, userId, userSign, listeners, callback) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var self, deviceInfo, api, resp, ip, port, req, _a, success, err, conn;\r\n            var _this = this;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        self = this;\r\n                        deviceInfo = WebToolkit_1[\"default\"].getDeviceInfo();\r\n                        self.httpUrl = httpUrl;\r\n                        self.appId = appId;\r\n                        self.listeners = listeners;\r\n                        self.imei = deviceInfo.system + '_' + deviceInfo.browser + '_' + deviceInfo.browserVersion;\r\n                        self.imeiLength = exports.getLen(self.imei);\r\n                        self.userId = userId;\r\n                        this.userSign = userSign;\r\n                        this.imeiLength = self.imeiLength;\r\n                        if (!utils_1[\"default\"].isEmpty(this.url)) return [3 /*break*/, 2];\r\n                        Logger_1[\"default\"].info(\"即将获取im地址，当前登录端信息\", deviceInfo);\r\n                        api = new HttpApi_1[\"default\"](this.httpUrl);\r\n                        return [4 /*yield*/, api.call(\"/user/login\", {}, {\r\n                                clientType: this.clientType,\r\n                                appId: this.appId,\r\n                                userId: this.userId\r\n                            })\r\n                            // console.log(resp)\r\n                        ];\r\n                    case 1:\r\n                        resp = _b.sent();\r\n                        // console.log(resp)\r\n                        if (resp.isFailed()) {\r\n                            Logger_1[\"default\"].info(\"登录失败：获取im地址失败\");\r\n                            return [2 /*return*/];\r\n                        }\r\n                        ip = resp.data.ip;\r\n                        port = resp.data.port;\r\n                        this.url = \"ws://\" + ip + \":\" + port + \"/ws\";\r\n                        _b.label = 2;\r\n                    case 2:\r\n                        req = new LoginPack_1.LoginPack(self.appId, self.userId, 1);\r\n                        return [4 /*yield*/, exports.limLogin(self.url, req, self)];\r\n                    case 3:\r\n                        _a = _b.sent(), success = _a.success, err = _a.err, conn = _a.conn;\r\n                        if (!success) return [3 /*break*/, 5];\r\n                        if (!firstMonitorSocket) {\r\n                            firstMonitorSocket = true;\r\n                        }\r\n                        //登录成功以后操作\r\n                        conn.onerror = function (error) {\r\n                            Logger_1[\"default\"].info(\"websocket error: \", error);\r\n                            // 加入socket 连接事件\r\n                            if (typeof exports.imClient.listeners.onSocketErrorEvent === 'function') {\r\n                                exports.imClient.listeners.onSocketErrorEvent(error);\r\n                            }\r\n                            //异步方法，自动重连\r\n                            _this.errorHandler(error, req);\r\n                        };\r\n                        conn.onclose = function (e) {\r\n                            Logger_1[\"default\"].info(\"event[onclose] fired\");\r\n                            if (self.state == State.CLOSING) {\r\n                                _this.onclose(\"logout\");\r\n                                return;\r\n                            }\r\n                            // socket断开事件 连接事件\r\n                            if (typeof exports.imClient.listeners.onSocketCloseEvent === 'function') {\r\n                                exports.imClient.listeners.onSocketCloseEvent();\r\n                            }\r\n                            // 异步方法 自动重连\r\n                            _this.errorHandler(new Error(e.reason), req);\r\n                        };\r\n                        conn.onmessage = function (evt) {\r\n                            /* 解析私有协议，netty 发送过来的就是 common + length + data 这样子的简单协议 */\r\n                            var bytebuffer = new ByteBuffer_1[\"default\"](evt.data);\r\n                            var byteBuffer = bytebuffer.int32().int32().unpack();\r\n                            var command = byteBuffer[0]; //解析command\r\n                            var bodyLen = byteBuffer[1]; //解析bodylen\r\n                            var unpack = bytebuffer.vstring(null, bodyLen).unpack(); //解析出字符串\r\n                            var msgBody = unpack[2];\r\n                            console.log(\"sdk收到服务端数据：\" + msgBody);\r\n                            // 只是简单处理单聊消息\r\n                            if (command === Command_1.SystemCommand.MUTUAL_LOGIN) {\r\n                                // 多端登陆限制 —— 要求当前登陆端下线\r\n                                if (typeof exports.imClient.listeners.onMutualLogin === 'function') {\r\n                                    // 多端登陆限制 —— 要求当前登陆端下线\r\n                                    exports.imClient.listeners.onMutualLogin(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.UserEventCommand.USER_ONLINE_STATUS_CHANGE_NOTIFY_SYNC) {\r\n                                // 当前用户其他端登录同步通知\r\n                                if (typeof exports.imClient.listeners.onUserOnlineStatusChangeSync === 'function') {\r\n                                    exports.imClient.listeners.onUserOnlineStatusChangeSync(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.UserEventCommand.USER_ONLINE_STATUS_CHANGE_NOTIFY) {\r\n                                // 当前用户其他端登录 _ 订阅端通知\r\n                                if (typeof exports.imClient.listeners.onUserOnlineStatusChangeNotify === 'function') {\r\n                                    exports.imClient.listeners.onUserOnlineStatusChangeNotify(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.UserEventCommand.USER_CUSTOM_STATUS_CHANGE_NOTIFY) {\r\n                                // 当前用户自定义状态变更通知 _ 订阅端通知\r\n                                if (typeof exports.imClient.listeners.onUserCustomStatusChangeNotify === 'function') {\r\n                                    exports.imClient.listeners.onUserCustomStatusChangeNotify(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.MessageCommand.MSG_P2P) {\r\n                                //单聊消息接收\r\n                                if (typeof exports.imClient.listeners.onP2PMessage === 'function') {\r\n                                    // 回调单聊消息的监听\r\n                                    exports.imClient.listeners.onP2PMessage(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.MSG_GROUP) {\r\n                                //群聊消息接收\r\n                                if (typeof exports.imClient.listeners.onGroupMessage === 'function') {\r\n                                    // 回调群聊消息的监听\r\n                                    exports.imClient.listeners.onGroupMessage(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.MessageCommand.MSG_ACK) {\r\n                                if (typeof exports.imClient.listeners.onP2PMessageAck === 'function') {\r\n                                    // 消息发送结果 ack\r\n                                    exports.imClient.listeners.onP2PMessageAck(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.GROUP_MSG_ACK) {\r\n                                // 群聊消息发送结果\r\n                                if (typeof exports.imClient.listeners.onGroupMessageAck === 'function') {\r\n                                    // 消息发送结果 ack\r\n                                    exports.imClient.listeners.onGroupMessageAck(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.MessageCommand.MSG_P2P_SYNC) {\r\n                                if (typeof exports.imClient.listeners.onP2PMessageSync === 'function') {\r\n                                    // 单聊消息同步\r\n                                    exports.imClient.listeners.onP2PMessageSync(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.MSG_GROUP_SYNC) {\r\n                                if (typeof exports.imClient.listeners.onGroupMessageSync === 'function') {\r\n                                    // 群聊消息同步\r\n                                    exports.imClient.listeners.onGroupMessageSync(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.MessageCommand.MSG_RECEIVE_ACK) {\r\n                                if (typeof exports.imClient.listeners.onP2PMessageReceiveAck === 'function') {\r\n                                    // 消息接收 ack\r\n                                    exports.imClient.listeners.onP2PMessageReceiveAck(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.MessageCommand.MSG_RECALL_ACK) {\r\n                                if (typeof exports.imClient.listeners.onMessageRecalledAck === 'function') {\r\n                                    // 消息撤回结果 ACK\r\n                                    exports.imClient.listeners.onMessageRecalledAck(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.MessageCommand.MSG_RECALL_NOTIFY) {\r\n                                if (typeof exports.imClient.listeners.onMessageRecalledNotify === 'function') {\r\n                                    // 消息撤回通知 —— 发送方通知接收方撤回消息\r\n                                    exports.imClient.listeners.onMessageRecalledNotify(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.MessageCommand.MSG_RECALL_SYNC) {\r\n                                if (typeof exports.imClient.listeners.onMessageRecalledSync === 'function') {\r\n                                    // 消息撤回多端同步\r\n                                    exports.imClient.listeners.onMessageRecalledSync(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.MessageCommand.MSG_READED_SYNC) {\r\n                                if (typeof exports.imClient.listeners.onMessageReadSync === 'function') {\r\n                                    // 消息已读同步\r\n                                    exports.imClient.listeners.onMessageReadSync(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.MSG_GROUP_READED_SYNC) {\r\n                                // 群聊消息已读同步\r\n                                if (typeof exports.imClient.listeners.onGroupMessageReadSync === 'function') {\r\n                                    // 群聊消息已读同步\r\n                                    exports.imClient.listeners.onGroupMessageReadSync(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.MessageCommand.MSG_READED_RECEIPT) {\r\n                                if (typeof exports.imClient.listeners.onMessageReadReceipt === 'function') {\r\n                                    // 消息已读通知\r\n                                    exports.imClient.listeners.onMessageReadReceipt(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.MSG_GROUP_READED_RECEIPT) {\r\n                                // 群聊消息已读通知\r\n                                if (typeof exports.imClient.listeners.onGroupMessageReadNotify === 'function') {\r\n                                    // 消息已读通知\r\n                                    exports.imClient.listeners.onGroupMessageReadNotify(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.ConversationEventCommand.CONVERSATION_UPDATE) {\r\n                                if (typeof exports.imClient.listeners.onConversationUpdate === 'function') {\r\n                                    // 会话信息更新\r\n                                    exports.imClient.listeners.onConversationUpdate(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.ConversationEventCommand.CONVERSATION_DELETE) {\r\n                                if (typeof exports.imClient.listeners.onConversationDelete === 'function') {\r\n                                    // 会话删除\r\n                                    exports.imClient.listeners.onConversationDelete(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.CREATED_GROUP) {\r\n                                if (typeof exports.imClient.listeners.onCreateGroup === 'function') {\r\n                                    // 创建群事件\r\n                                    exports.imClient.listeners.onCreateGroup(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.UPDATED_GROUP) {\r\n                                if (typeof exports.imClient.listeners.onGroupInfoUpdate === 'function') {\r\n                                    // 群信息更新事件\r\n                                    exports.imClient.listeners.onGroupInfoUpdate(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.DESTROY_GROUP) {\r\n                                if (typeof exports.imClient.listeners.onDestroyGroup === 'function') {\r\n                                    // 解散群\r\n                                    exports.imClient.listeners.onDestroyGroup(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.TRANSFER_GROUP) {\r\n                                if (typeof exports.imClient.listeners.onTransferGroup === 'function') {\r\n                                    // 群主转让事件\r\n                                    exports.imClient.listeners.onTransferGroup(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.MUTE_GROUP) {\r\n                                if (typeof exports.imClient.listeners.onMuteGroup === 'function') {\r\n                                    // 禁言群\r\n                                    exports.imClient.listeners.onMuteGroup(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.UNMUTE_GROUP) {\r\n                                if (typeof exports.imClient.listeners.onUnMuteGroup === 'function') {\r\n                                    // 解除禁言\r\n                                    exports.imClient.listeners.onUnMuteGroup(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.ADDED_MEMBER) {\r\n                                if (typeof exports.imClient.listeners.onAddGroupMemberNotify === 'function') {\r\n                                    // 被拉入群事件\r\n                                    exports.imClient.listeners.onAddGroupMemberNotify(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.DELETED_MEMBER) {\r\n                                if (typeof exports.imClient.listeners.onRemoveGroupMemberNotify === 'function') {\r\n                                    // 被踢出群事件\r\n                                    exports.imClient.listeners.onRemoveGroupMemberNotify(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.UPDATED_MEMBER) {\r\n                                if (typeof exports.imClient.listeners.onGroupMemberInfoUpdate === 'function') {\r\n                                    // 群成员信息更新事件\r\n                                    exports.imClient.listeners.onGroupMemberInfoUpdate(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.GroupCommand.SPEAK_GROUP_MEMBER) {\r\n                                if (typeof exports.imClient.listeners.onMuteGroupMember === 'function') {\r\n                                    // 群成员信禁言事件\r\n                                    exports.imClient.listeners.onMuteGroupMember(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.FriendShipCommand.FRIEND_ADD) {\r\n                                if (typeof exports.imClient.listeners.onAddFriend === 'function') {\r\n                                    // 添加好友事件发生，登录同步\r\n                                    exports.imClient.listeners.onAddFriend(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.FriendShipCommand.FRIEND_REQUEST) {\r\n                                if (typeof exports.imClient.listeners.onFriendRequest === 'function') {\r\n                                    // 有好友申请\r\n                                    exports.imClient.listeners.onFriendRequest(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.FriendShipCommand.FRIEND_UPDATE) {\r\n                                if (typeof exports.imClient.listeners.onUpdateFriendInfo === 'function') {\r\n                                    // 好友信息修改，多端同步\r\n                                    exports.imClient.listeners.onUpdateFriendInfo(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.FriendShipCommand.FRIEND_DELETE) {\r\n                                if (typeof exports.imClient.listeners.onDeleteFriend === 'function') {\r\n                                    // 删除好友，多端同步\r\n                                    exports.imClient.listeners.onDeleteFriend(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.FriendShipCommand.FRIEND_ALL_DELETE) {\r\n                                if (typeof exports.imClient.listeners.onDeleteAllFriend === 'function') {\r\n                                    // 删除全部好友，多端同步\r\n                                    exports.imClient.listeners.onDeleteAllFriend(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.FriendShipCommand.FRIEND_BLACK_ADD) {\r\n                                if (typeof exports.imClient.listeners.onFriendBlackAdd === 'function') {\r\n                                    // 拉黑好友，多端同步\r\n                                    exports.imClient.listeners.onFriendBlackAdd(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.FriendShipCommand.FRIEND_BLACK_DELETE) {\r\n                                if (typeof exports.imClient.listeners.onFriendBlackDel === 'function') {\r\n                                    // 删除拉黑，多端同步\r\n                                    exports.imClient.listeners.onFriendBlackDel(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.FriendShipCommand.FRIEND_REQUEST_APPROVER) {\r\n                                if (typeof exports.imClient.listeners.onFriendRequestApprove === 'function') {\r\n                                    // 好友申请审批，多端同步\r\n                                    exports.imClient.listeners.onFriendRequestApprove(msgBody);\r\n                                }\r\n                            }\r\n                            else if (command === Command_1.FriendShipCommand.FRIEND_REQUEST_READ) {\r\n                                if (typeof exports.imClient.listeners.onFriendRequestRead === 'function') {\r\n                                    // 好友申请已读，多端同步\r\n                                    exports.imClient.listeners.onFriendRequestRead(msgBody);\r\n                                }\r\n                            }\r\n                            else {\r\n                                if (typeof exports.imClient.listeners.onTestMessage === 'function') {\r\n                                    exports.imClient.listeners.onTestMessage(msgBody);\r\n                                }\r\n                            }\r\n                        };\r\n                        this.conn = conn;\r\n                        this.state = State.CONNECTED;\r\n                        // 心跳包\r\n                        this.heartbeatLoop(this.conn);\r\n                        // 登录成功之后，直接拉取离线消息\r\n                        return [4 /*yield*/, this.loadOfflineMessage()];\r\n                    case 4:\r\n                        // 登录成功之后，直接拉取离线消息\r\n                        _b.sent();\r\n                        // 回调登录成功事件\r\n                        if (typeof exports.imClient.listeners.onLogin === 'function') {\r\n                            exports.imClient.listeners.onLogin(this.userId);\r\n                        }\r\n                        callback(self);\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        Logger_1[\"default\"].error(err === null || err === void 0 ? void 0 : err.message);\r\n                        _b.label = 6;\r\n                    case 6: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * 生成指定的指令的消息\r\n     *\r\n     * @param command 指令类型\r\n     * @param messagePack 消息体\r\n     */\r\n    ImClient.prototype.buildMessagePack = function (command, messagePack) {\r\n        var jsonData = JSON.stringify(messagePack);\r\n        var bodyLen = exports.getLen(jsonData);\r\n        var pack = new ByteBuffer_1[\"default\"](null, 0);\r\n        pack.int32(command)\r\n            .int32(this.version)\r\n            .int32(this.clientType)\r\n            .int32(0x0) // JSON 数据格式\r\n            .int32(this.appId)\r\n            .int32(this.imeiLength)\r\n            .int32(bodyLen)\r\n            .vstring(this.imei, this.imeiLength)\r\n            .vstring(jsonData, bodyLen);\r\n        return pack;\r\n    };\r\n    /**\r\n     * 生成指定的指令的消息\r\n     *\r\n     * @param command 指令类型\r\n     * @param messagePack 对象类型数据\r\n     */\r\n    ImClient.prototype.buildJSONMessagePack = function (command, messagePack) {\r\n        // 添加客户端的信息\r\n        var param = Object.assign({}, messagePack, this.getRequestBase());\r\n        var jsonData = JSON.stringify(param);\r\n        var bodyLen = exports.getLen(jsonData);\r\n        var pack = new ByteBuffer_1[\"default\"](null, 0);\r\n        pack.int32(command)\r\n            .int32(this.version)\r\n            .int32(this.clientType)\r\n            .int32(0x0) // JSON 数据格式\r\n            .int32(this.appId)\r\n            .int32(this.imeiLength)\r\n            .int32(bodyLen)\r\n            .vstring(this.imei, this.imeiLength)\r\n            .vstring(jsonData, bodyLen);\r\n        return pack;\r\n    };\r\n    // 4. 自动重连\r\n    ImClient.prototype.errorHandler = function (error, req) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var index, _a, success, err, conn, error_1;\r\n            return __generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        // 如果是主动断开连接，就没有必要自动重连\r\n                        // 比如收到被踢，或者主动调用logout()方法\r\n                        if (this.state == State.CLOSED || this.state == State.CLOSING) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        this.state = State.RECONNECTING;\r\n                        if (typeof exports.imClient.listeners.onSocketReConnectEvent === 'function') {\r\n                            exports.imClient.listeners.onSocketReConnectEvent();\r\n                        }\r\n                        index = 0;\r\n                        _b.label = 1;\r\n                    case 1:\r\n                        if (!(index < 10)) return [3 /*break*/, 7];\r\n                        return [4 /*yield*/, exports.sleep(3)];\r\n                    case 2:\r\n                        _b.sent();\r\n                        _b.label = 3;\r\n                    case 3:\r\n                        _b.trys.push([3, 5, , 6]);\r\n                        Logger_1[\"default\"].info(\"try to relogin\");\r\n                        return [4 /*yield*/, exports.limLogin(this.url, req, this)];\r\n                    case 4:\r\n                        _a = _b.sent(), success = _a.success, err = _a.err, conn = _a.conn;\r\n                        if (success) {\r\n                            if (typeof exports.imClient.listeners.onSocketReConnectSuccessEvent === 'function') {\r\n                                exports.imClient.listeners.onSocketReConnectSuccessEvent();\r\n                            }\r\n                            return [2 /*return*/];\r\n                        }\r\n                        Logger_1[\"default\"].info(err);\r\n                        return [3 /*break*/, 6];\r\n                    case 5:\r\n                        error_1 = _b.sent();\r\n                        Logger_1[\"default\"].info(error_1);\r\n                        return [3 /*break*/, 6];\r\n                    case 6:\r\n                        index++;\r\n                        return [3 /*break*/, 1];\r\n                    case 7:\r\n                        this.onclose(\"reconnect timeout\");\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // 表示连接中止\r\n    ImClient.prototype.onclose = function (reason) {\r\n        if (this.state == State.CLOSED) {\r\n            return;\r\n        }\r\n        this.state = State.CLOSED;\r\n        Logger_1[\"default\"].info(\"connection closed due to \" + reason);\r\n        this.conn = undefined;\r\n        this.userId = \"\";\r\n        // 加入socket 关闭事件\r\n        if (typeof exports.imClient.listeners.onSocketErrorEvent === 'function') {\r\n            exports.imClient.listeners.onSocketCloseEvent();\r\n        }\r\n    };\r\n    /**\r\n     * 获取单个用户的信息\r\n     *\r\n     * @param userId\r\n     */\r\n    ImClient.prototype.getSingleUserInfo = function (userId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/user/data/getSingleUserInfo\", _this.getRequestParams(), { userId: userId });\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 查询用户分页列表\r\n     *\r\n     * @param currentPage\r\n     * @param pageSize\r\n     * @param nickName\r\n     * @param tel\r\n     */\r\n    ImClient.prototype.queryImUserPage = function (currentPage, pageSize, nickName, tel) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/user/data/queryImUserPage\", _this.getRequestParams(), {\r\n                currentPage: currentPage,\r\n                pageSize: pageSize,\r\n                nickName: nickName,\r\n                tel: tel\r\n            });\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 修改指定用户的信息\r\n     *\r\n     * @param modifyUserInfo\r\n     */\r\n    ImClient.prototype.modifyUserInfo = function (modifyUserInfo) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/user/data/modifyUserInfo\", _this.getRequestParams(), modifyUserInfo);\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 同步获取 —— 单个用户的信息\r\n     *\r\n     * @param userId 指定用户 id\r\n     */\r\n    ImClient.prototype.syncGetUserInfo = function (userId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var api;\r\n            return __generator(this, function (_a) {\r\n                api = new HttpApi_1[\"default\"](this.httpUrl);\r\n                return [2 /*return*/, api.call(\"/user/data/getUserInfo\", this.getRequestParams(), { userIds: userId })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * 批量获取用户 id\r\n     *\r\n     * @param userIds 用户 id 集合\r\n     */\r\n    ImClient.prototype.getUserInfo = function (userIds) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/user/data/getUserInfo\", _this.getRequestParams(), { userIds: userIds });\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 获取当前用户的 seq 信息\r\n     */\r\n    ImClient.prototype.getUserSequence = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/user/getUserSequence\", _this.getRequestParams(), {\r\n                userId: _this.userId,\r\n                appId: _this.appId\r\n            });\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 订阅用户在线状态\r\n     *\r\n     * @param userIds 需要订阅的 userId\r\n     * @param subTime 订阅的有效时间\r\n     */\r\n    ImClient.prototype.subscribeUserOnlineStatus = function (userIds, subTime) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/user/subscribeUserOnlineStatus\", _this.getRequestParams(), {\r\n                userId: _this.userId,\r\n                appId: _this.appId,\r\n                subUserIds: userIds,\r\n                subTime: subTime,\r\n            });\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 设置自定义的在线状态\r\n     * 1、修改redis中的值\r\n     * 2、同步登录端、通知订阅端\r\n     *\r\n     * @param customText\r\n     * @param customStatus\r\n     */\r\n    ImClient.prototype.setUserCustomerStatus = function (customText, customStatus) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/user/setUserCustomerStatus\", _this.getRequestParams(), {\r\n                userId: _this.userId,\r\n                appId: _this.appId,\r\n                customText: customText,\r\n                customStatus: customStatus,\r\n            });\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 获取好友的在线状态信息\r\n     */\r\n    ImClient.prototype.queryFriendOnlineStatus = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/user/queryFriendOnlineStatus\", _this.getRequestParams(), {\r\n                userId: _this.userId,\r\n            });\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 获取指定用户的在线状态信息\r\n     *\r\n     * @param userIds 指定的用户 id\r\n     */\r\n    ImClient.prototype.queryUserOnlineStatus = function (userIds) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/user/queryUserOnlineStatus\", _this.getRequestParams(), {\r\n                userIdList: userIds,\r\n            });\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 获取当前用户的好友列表\r\n     */\r\n    ImClient.prototype.getAllFriend = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/getAllFriendShip\", _this.getRequestParams(), { fromId: _this.userId });\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 添加指定的好友\r\n     *\r\n     * @param toId 用户id\r\n     * @param remark 备足\r\n     * @param addSource 添加来源\r\n     * @param addWording 打招呼的话\r\n     * @param extra 额外字段\r\n     */\r\n    ImClient.prototype.addFriend = function (toId, remark, addSource, addWording, extra) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/addFriend\", _this.getRequestParams(), __assign({ fromId: _this.userId, toItem: { toId: toId, remark: remark, addSource: addSource, addWording: addWording, extra: extra } }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 更新好友信息\r\n     *\r\n     * @param friendInfo\r\n     */\r\n    ImClient.prototype.updateFriend = function (friendInfo) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/updateFriend\", _this.getRequestParams(), __assign({ fromId: _this.userId, toItem: friendInfo }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 删除指定好友\r\n     *\r\n     * @param toId\r\n     */\r\n    ImClient.prototype.deleteFriend = function (toId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/deleteFriend\", _this.getRequestParams(), __assign({ fromId: _this.userId, toId: toId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 删除当前用户的全部好友信息\r\n     *\r\n     * @param toId\r\n     */\r\n    ImClient.prototype.deleteAllFriend = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/deleteAllFriend\", _this.getRequestParams(), __assign({ fromId: _this.userId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 获取当前用户所有的好友信息\r\n     */\r\n    ImClient.prototype.getAllFriendShip = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/getAllFriendShip\", _this.getRequestParams(), __assign({ fromId: _this.userId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 获取好友关系信息\r\n     *\r\n     * @param toId\r\n     */\r\n    ImClient.prototype.getRelation = function (toId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/getRelation\", _this.getRequestParams(), __assign({ fromId: _this.userId, toId: toId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 校验好友关系\r\n     *\r\n     * @param toId 指定好友 id\r\n     * @param checkType  1 单方校验；2 双方校验。\r\n     */\r\n    ImClient.prototype.checkFriend = function (toId, checkType) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/checkFriend\", _this.getRequestParams(), __assign({ fromId: _this.userId, toId: toId, checkType: checkType }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 拉黑好友\r\n     *\r\n     * @param toId\r\n     */\r\n    ImClient.prototype.addBlack = function (toId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/addBlack\", _this.getRequestParams(), __assign({ fromId: _this.userId, toId: toId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 删除来拉黑标识\r\n     *\r\n     * @param toId\r\n     */\r\n    ImClient.prototype.deleteBlack = function (toId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/deleteBlack\", _this.getRequestParams(), __assign({ fromId: _this.userId, toId: toId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 好友关系同步（使用 sequence 实现增量同步）\r\n     *\r\n     * @param lastSequence 客户端最大seq\r\n     * @param maxLimit 一次拉取多少(限制最大 100 条)\r\n     */\r\n    ImClient.prototype.syncFriendshipList = function (lastSequence, maxLimit) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendship/syncFriendshipList\", _this.getRequestParams(), __assign({ lastSequence: lastSequence, maxLimit: maxLimit }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 增量拉取会话信息 -  登录完成之后，拉取会话列表 - lastSequence  = 0 ，给本地存储 - 会话列表有任何的操作都会更新 Sequence ，内地存储 - sequence = 10 , 比较后端数据的 sequence = 11， 新增了一个会话 - 11 新增会话信息\r\n     *\r\n     * @param lastSequence 本地存储的最大的 Sequence\r\n     * @param maxLimit 最大拉取条数，最大 100 条\r\n     */\r\n    ImClient.prototype.syncConversationSet = function (lastSequence, maxLimit) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/conversation/syncConversationSet\", _this.getRequestParams(), __assign({ lastSequence: lastSequence, maxLimit: maxLimit }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 删除会话 -  取消本地渲染 -  后台会发送删除通知 -  客户端收到删除通知，删除本地会话\r\n     *\r\n     * @param lastSequence\r\n     * @param maxLimit\r\n     */\r\n    ImClient.prototype.deleteConversation = function (conversationId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/conversation/deleteConversation\", _this.getRequestParams(), __assign({ conversationId: conversationId, fromId: _this.userId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 更新会话 -  后端更新通知\r\n     *\r\n     * @param conversationId\r\n     * @param isMute 是否免打扰 0 - 未开启  1- 开启免打扰\r\n     * @param isTop 是否置顶 0 - 未置顶  1- 启用置顶\r\n     */\r\n    ImClient.prototype.updateConversation = function (conversationId, isMute, isTop) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/conversation/updateConversation\", _this.getRequestParams(), __assign({ conversationId: conversationId, isMute: isMute, isTop: isTop, fromId: _this.userId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 创建群\r\n     *\r\n     * @param groupType 群类型 1、私有群（类似微信） 2、公开群(类似qq）\r\n     * @param groupName\r\n     * @param mute 是否全员禁言，0 不禁言；1 全员禁言。\r\n     * @param applyJoinType 加入群权限，0 所有人可以加入；1 群成员可以拉人；2 群管理员或群组可以拉人。\r\n     * @param introduction 群简介\r\n     * @param notification 群公告\r\n     * @param photo 群头像\r\n     * @param maxMemberCount  最大人数\r\n     * @param groupMemberList 创建的同时指定群成员\r\n     */\r\n    ImClient.prototype.createGroup = function (groupType, groupName, mute, applyJoinType, introduction, notification, photo, maxMemberCount, groupMemberList) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/createGroup\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ groupType: groupType, groupName: groupName, mute: mute, applyJoinType: applyJoinType, introduction: introduction, notification: notification, photo: photo, maxMemberCount: maxMemberCount, ownerId: _this.userId, member: groupMemberList }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 获取当前用户的加入的群组信息\r\n     * @param groupType 群类型  1 私有   2、公开\r\n     * @param limit 单次拉取的群组数量，如果不填代表所有群组\r\n     * @param offset 第几页\r\n     */\r\n    ImClient.prototype.getCurUserJoinedGroup = function (groupType, limit, offset) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/getJoinedGroup\", _this.getRequestParams(), __assign({ memberId: _this.userId, groupType: groupType, limit: limit, offset: offset }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 获取群信息,包含群成员信息\r\n     *\r\n     * @param groupId\r\n     */\r\n    ImClient.prototype.getGroupInfo = function (groupId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/getGroupInfo\", _this.getRequestParams(), __assign({ groupId: groupId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 更新群信息\r\n     *\r\n     * @param groupId  变更的 id\r\n     * @param updateInfo 需要变更的信息\r\n     */\r\n    ImClient.prototype.updateGroupInfo = function (groupId, updateInfo) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/update\", _this.getRequestParams(), __assign(__assign(__assign({}, updateInfo), { groupId: groupId }), _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 解散群，支持群主或者后台管理员解散\r\n     *\r\n     * @param groupId\r\n     */\r\n    ImClient.prototype.destroyGroup = function (groupId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/destroyGroup\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ groupId: groupId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 转让群，只有群主才可以转让，并且被转让人需要在群内\r\n     *\r\n     * @param groupId 群 id\r\n     * @param ownerId 转让给谁 _ 必须是群成员\r\n     */\r\n    ImClient.prototype.transferGroup = function (groupId, ownerId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/transferGroup\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ groupId: groupId, ownerId: ownerId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 禁言群组，群主或者管理员可以禁言\r\n     *\r\n     * @param groupId\r\n     */\r\n    ImClient.prototype.forbidSendMessage = function (groupId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/forbidSendMessage\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ groupId: groupId, mute: 1 }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 解除禁言群组，群主或者管理员可以解除禁言\r\n     *\r\n     * @param groupId\r\n     * @constructor\r\n     */\r\n    ImClient.prototype.enableSendMsg = function (groupId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/forbidSendMessage\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ groupId: groupId, mute: 0 }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 发送群聊消息\r\n     *\r\n     * @param messageId\r\n     * @param groupId\r\n     * @param messageBody\r\n     * @param badgeMode 这个字段缺省或者为 0 表示需要计数，为 1 表示本条消息不需要计数，即右上角图标数字不增加\r\n     */\r\n    ImClient.prototype.sendGroupMsgByInterface = function (messageId, groupId, messageBody, badgeMode) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/sendMessage\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ messageId: messageId, fromId: _this.userId, groupId: groupId, messageTime: Date.parse(new Date().toString()), messageBody: messageBody, badgeMode: badgeMode, messageLifeTime: Date.parse(new Date().toString()), messageRandom: Math.floor(Math.random() * 10000) + 10000 }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 群列表增量同步\r\n     *\r\n     * @param lastSequence 客户端最大se q\r\n     * @param maxLimit 一次拉取多少\r\n     */\r\n    ImClient.prototype.syncJoinedGroup = function (lastSequence, maxLimit) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/syncJoinedGroup\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ lastSequence: lastSequence, maxLimit: maxLimit }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 添加用户的到群组，拉人入群的逻辑，直接进入群聊。如果是后台管理员，则直接拉入群，\r\n     * 群成员类型，0 普通成员, 1 管理员, 2 群主， 3 已经移除的成员，当修改群成员信息时，只能取值0/1，其他值由其他接口实现，暂不支持3\r\n     *\r\n     * @param groupId\r\n     * @param members\r\n     */\r\n    ImClient.prototype.addGroupMember = function (groupId, members) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/member/add\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ groupId: groupId, members: members }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 删除群成员\r\n     *\r\n     * @param groupId\r\n     * @param memberId\r\n     */\r\n    ImClient.prototype.removeGroupMember = function (groupId, memberId) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/member/remove\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ groupId: groupId, memberId: memberId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 更改群成员信息\r\n     *\r\n     * @param groupId 群组 id\r\n     * @param memberId 群成员 id\r\n     * @param alias 在本群中的 昵称\r\n     * @param role 角色\r\n     * @param extra 额外字段\r\n     */\r\n    ImClient.prototype.updateGroupMemberInfo = function (groupId, memberId, alias, role, extra) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/member/update\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ groupId: groupId, memberId: memberId, alias: alias, extra: extra }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 设置禁言\r\n     *\r\n     * @param groupId\r\n     * @param memberId\r\n     * @param speakDate 禁言时间\r\n     */\r\n    ImClient.prototype.setGroupMemberSpeak = function (groupId, memberId, speakDate) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/group/member/speak\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ groupId: groupId, memberId: memberId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 好友申请审核接口\r\n     *\r\n     * @param id\r\n     * @param status 1同意 2拒绝\r\n     */\r\n    ImClient.prototype.approveFriendRequest = function (id, status) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendshipRequest/approveFriendRequest\", __assign(__assign({}, _this.getRequestParams()), { identifier: _this.userId }), __assign({ id: id, status: status }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 好友申请列表\r\n     */\r\n    ImClient.prototype.getFriendRequest = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendshipRequest/getFriendRequest\", _this.getRequestParams(), __assign({ fromId: _this.userId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 默认全部已读\r\n     */\r\n    ImClient.prototype.readFriendShipRequestReq = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/friendshipRequest/readFriendShipRequestReq\", _this.getRequestParams(), __assign({ fromId: _this.userId }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    // 2、心跳\r\n    ImClient.prototype.heartbeatLoop = function (conn) {\r\n        var _this = this;\r\n        var start = Date.now();\r\n        var loop = function () {\r\n            if (_this.state != State.CONNECTED) {\r\n                Logger_1[\"default\"].error(\"heartbeatLoop exited\");\r\n                return;\r\n            }\r\n            if (Date.now() - start >= heartbeatInterval) {\r\n                Logger_1[\"default\"].info(\">>> send ping ;\");\r\n                start = Date.now();\r\n                var pingPack = exports.imClient.buildMessagePack(Command_1.SystemCommand.PING, {});\r\n                conn.send(pingPack.pack(false));\r\n            }\r\n            setTimeout(loop, 500);\r\n        };\r\n        setTimeout(loop, 500);\r\n    };\r\n    /**\r\n     * 构建文本消息对象\r\n     * @param toId\r\n     * @param text  字符串文本\r\n     */\r\n    ImClient.prototype.createP2PTextMessage = function (toId, text) {\r\n        var messagePack = new MessagePack_1.MessagePack(this.appId);\r\n        messagePack.buildTextMessagePack(this.userId, toId, text);\r\n        return messagePack;\r\n    };\r\n    /**\r\n     * 构建文群聊本消息对象\r\n     * @param groupId\r\n     * @param text  字符串文本\r\n     */\r\n    ImClient.prototype.createGroupTextMessage = function (groupId, text) {\r\n        var messagePack = new MessagePack_1.MessagePack(this.appId);\r\n        messagePack.buildGroupTextMessagePack(this.userId, groupId, text);\r\n        return messagePack;\r\n    };\r\n    /**\r\n     * 发送单聊消息\r\n     *\r\n     * @param pack\r\n     */\r\n    ImClient.prototype.sendP2PMessage = function (pack) {\r\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.MessageCommand.MSG_P2P, pack);\r\n        if (this.conn) {\r\n            this.conn.send(p2pPack.pack(false));\r\n        }\r\n    };\r\n    /**\r\n     * 发送群聊消息\r\n     * @param pack\r\n     */\r\n    ImClient.prototype.sendGroupMessage = function (pack) {\r\n        var p2pPack = exports.imClient.buildMessagePack(Command_1.GroupCommand.MSG_GROUP, pack);\r\n        if (this.conn) {\r\n            this.conn.send(p2pPack.pack(false));\r\n        }\r\n    };\r\n    /**\r\n     * 单聊消息接收成功，给发送方回复 ack\r\n     *\r\n     * @param messageKey 客户端自身生成的消息 key\r\n     * @param toId  当前消息的发送法方\r\n     * @param messageSequence 当前消息的序号\r\n     */\r\n    ImClient.prototype.sendP2PMessageReceiveAck = function (messageKey, toId, messageSequence) {\r\n        var p2pPack = exports.imClient.buildJSONMessagePack(Command_1.MessageCommand.MSG_RECEIVE_ACK, {\r\n            messageKey: messageKey,\r\n            toId: toId,\r\n            fromId: this.userId,\r\n            messageSequence: messageSequence\r\n        });\r\n        if (this.conn) {\r\n            this.conn.send(p2pPack.pack(false));\r\n        }\r\n    };\r\n    /**\r\n     * 发送单聊消息已读指令\r\n     *\r\n     * @param messageKey 后台系统生成的唯一id，雪花算法\r\n     * @param toId 消息发送方的 ID\r\n     * @param messageSequence 消息序列\r\n     * @param conversationType 聊天类型 0 单聊、 1 群聊\r\n     */\r\n    ImClient.prototype.sendP2PMessageReadAck = function (messageKey, toId, messageSequence) {\r\n        var p2pPack = exports.imClient.buildJSONMessagePack(Command_1.MessageCommand.MSG_READED, {\r\n            messageKey: messageKey,\r\n            toId: toId,\r\n            fromId: this.userId,\r\n            messageSequence: messageSequence,\r\n            conversationType: 0,\r\n        });\r\n        if (this.conn) {\r\n            this.conn.send(p2pPack.pack(false));\r\n        }\r\n    };\r\n    /**\r\n     * 群聊消息已读\r\n     *\r\n     * @param groupId\r\n     * @param messageSequence\r\n     * @param conversationType\r\n     */\r\n    ImClient.prototype.senGroupMessageReadAck = function (groupId, messageSequence) {\r\n        var p2pPack = exports.imClient.buildJSONMessagePack(Command_1.GroupCommand.MSG_GROUP_READED, {\r\n            groupId: groupId,\r\n            fromId: this.userId,\r\n            messageSequence: messageSequence,\r\n            conversationType: 1,\r\n        });\r\n        if (this.conn) {\r\n            this.conn.send(p2pPack.pack(false));\r\n        }\r\n    };\r\n    /**\r\n     * 消息撤回指令\r\n     *\r\n     * @param messageKey 后台系统生成的唯一id，雪花算法\r\n     * @param toId  原消息接收者、群聊则为 groupId\r\n     * @param messageSequence\r\n     * @param messageTime 原消息发送时间\r\n     * @param conversationType 聊天类型 0 单聊、 1 群聊\r\n     */\r\n    ImClient.prototype.doMessageRecall = function (messageKey, toId, messageSequence, messageTime, conversationType) {\r\n        var p2pPack = exports.imClient.buildJSONMessagePack(Command_1.MessageCommand.MSG_RECALL, {\r\n            messageKey: messageKey,\r\n            toId: toId,\r\n            fromId: this.userId,\r\n            messageSequence: messageSequence,\r\n            messageTime: messageTime,\r\n            conversationType: conversationType,\r\n        });\r\n        if (this.conn) {\r\n            this.conn.send(p2pPack.pack(false));\r\n        }\r\n    };\r\n    /**\r\n     * 离线消息撤回，websocket 成功来凝结之后立即拉取来离线消息\r\n     *\r\n     * @private\r\n     */\r\n    ImClient.prototype.loadOfflineMessage = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var api, resp, offMessages;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        Logger_1[\"default\"].info(\"loadOfflineMessage start\");\r\n                        api = new HttpApi_1[\"default\"](this.httpUrl);\r\n                        return [4 /*yield*/, api.call(\"/message/syncOfflineMessage\", this.getRequestParams(), {\r\n                                clientType: this.clientType,\r\n                                appId: this.appId,\r\n                                operate: this.userId,\r\n                                imei: this.imei,\r\n                                lastSequence: this.lastOfflineMessageSequence,\r\n                                maxLimit: 100\r\n                            })];\r\n                    case 1:\r\n                        resp = _a.sent();\r\n                        if (!resp.isSucceed()) return [3 /*break*/, 4];\r\n                        this.lastOfflineMessageSequence = resp.data.maxSequence;\r\n                        offMessages = resp.data.dataList;\r\n                        this.offlineMessageList.push(offMessages);\r\n                        if (offMessages.length > 0 && typeof exports.imClient.listeners.onOfflineMessage === 'function') {\r\n                            exports.imClient.listeners.onOfflineMessage(offMessages);\r\n                        }\r\n                        console.log('loadOfflineMessage - response', resp);\r\n                        // 是否拉取完全\r\n                        console.log('loadOfflineMessage - completed: ' + resp.data.completed);\r\n                        if (!!resp.data.completed) return [3 /*break*/, 3];\r\n                        return [4 /*yield*/, this.loadOfflineMessage()];\r\n                    case 2:\r\n                        _a.sent();\r\n                        _a.label = 3;\r\n                    case 3: return [3 /*break*/, 5];\r\n                    case 4:\r\n                        Logger_1[\"default\"].error(\"loadOfflineMessage - error\");\r\n                        _a.label = 5;\r\n                    case 5: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * 调用接口的形式发送单聊消息\r\n     *\r\n     * @param messageId\r\n     * @param toId\r\n     * @param messageBody\r\n     * @param badgeMode\r\n     */\r\n    ImClient.prototype.sendP2PMsgByInterface = function (messageId, toId, messageBody, badgeMode) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/message/send\", _this.getRequestParams(), __assign({ messageId: messageId, fromId: _this.userId, toId: toId, messageTime: Date.parse(new Date().toString()), messageBody: messageBody, badgeMode: badgeMode, messageLifeTime: Date.parse(new Date().toString()), messageRandom: Math.floor(Math.random() * 10000) + 10000 }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 查询单聊的历史消息\r\n     *\r\n     * @param toId\r\n     * @param messageSequence\r\n     * @param isGt 是否是大于该 messageSequence\r\n     * @param startTime\r\n     * @param endTime\r\n     */\r\n    ImClient.prototype.queryP2pMessageHistory = function (toId, messageSequence, isGt, startTime, endTime) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/message/queryP2pMessageHistory\", _this.getRequestParams(), __assign({ ownerId: _this.userId, toId: toId, messageSequence: messageSequence, isGt: isGt, startTime: startTime, endTime: endTime }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    /**\r\n     * 查询群聊消息\r\n     *\r\n     * @param groupId\r\n     * @param messageSequence 是否是大于该 messageSequence\r\n     * @param isGt\r\n     * @param startTime\r\n     * @param endTime\r\n     */\r\n    ImClient.prototype.queryGroupMessageHistory = function (groupId, messageSequence, isGt, startTime, endTime) {\r\n        var _this = this;\r\n        return new Promise(function (resolve, _) {\r\n            var api = new HttpApi_1[\"default\"](_this.httpUrl);\r\n            var resp = api.call(\"/message/queryGroupMessageHistory\", _this.getRequestParams(), __assign({ groupId: groupId, messageSequence: messageSequence, isGt: isGt, startTime: startTime, endTime: endTime }, _this.getRequestBase()));\r\n            resolve(resp);\r\n        });\r\n    };\r\n    return ImClient;\r\n}());\r\nexports.ImClient = ImClient;\r\nexports.limLogin = function (url, req, imClient) { return __awaiter(void 0, void 0, void 0, function () {\r\n    return __generator(this, function (_a) {\r\n        return [2 /*return*/, new Promise(function (resolve, _) {\r\n                var conn = new websocket_1.w3cwebsocket(url);\r\n                conn.binaryType = \"arraybuffer\";\r\n                Logger_1[\"default\"].info(\"limLogin\");\r\n                // 设置一个登陆超时器\r\n                var tr = setTimeout(function () {\r\n                    clearTimeout(tr);\r\n                    resolve({ success: false, err: new Error(\"timeout\"), conn: conn });\r\n                }, loginTimeout);\r\n                conn.onopen = function () {\r\n                    if (conn.readyState == websocket_1.w3cwebsocket.OPEN) {\r\n                        // 加入socket 连接事件\r\n                        if (typeof imClient.listeners.onSocketConnectEvent === 'function') {\r\n                            imClient.listeners.onSocketConnectEvent(url, req);\r\n                        }\r\n                        Logger_1[\"default\"].info(\"\\u5F00\\u542F\\u8FDE\\u63A5\");\r\n                        //登录数据包\r\n                        var data = {\r\n                            \"userId\": req.userId\r\n                        };\r\n                        var loginPack = imClient.buildMessagePack(Command_1.SystemCommand.LOGIN, data);\r\n                        conn.send(loginPack.pack(false));\r\n                    }\r\n                };\r\n                conn.onerror = function (error) {\r\n                    clearTimeout(tr);\r\n                    Logger_1[\"default\"].error(error);\r\n                    resolve({ success: false, err: error, conn: conn });\r\n                };\r\n                conn.onmessage = function (evt) {\r\n                    if (typeof evt.data === 'string') {\r\n                        Logger_1[\"default\"].info(\"Received: '\" + evt.data + \"'\");\r\n                        return;\r\n                    }\r\n                    clearTimeout(tr);\r\n                    var bytebuffer = new ByteBuffer_1[\"default\"](evt.data);\r\n                    var byteBuffer = bytebuffer.int32().int32().unpack();\r\n                    // 解析回复的命令\r\n                    var command = byteBuffer[0];\r\n                    var bodyLen = byteBuffer[1];\r\n                    // 接收到登录成功回复的 ACK\r\n                    if (command == Command_1.SystemCommand.LOGIN_ACK) {\r\n                        resolve({ success: true, conn: conn });\r\n                    }\r\n                };\r\n            })];\r\n    });\r\n}); };\r\nexports.getLen = function (str) {\r\n    var len = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var c = str.charCodeAt(i);\r\n        //单字节加1\r\n        if ((c >= 0x0001 && c <= 0x007e) || (0xff60 <= c && c <= 0xff9f)) {\r\n            len++;\r\n        }\r\n        else {\r\n            len += 3;\r\n        }\r\n    }\r\n    return len;\r\n};\r\nexports.imClient = new ImClient();\r\n","\"use strict\";\r\nexports.__esModule = true;\r\n/**\r\n * 返回平台所用的 fetch 工具\r\n * */\r\nvar Fetch = /** @class */ (function () {\r\n    function Fetch() {\r\n    }\r\n    Fetch.getFetchToolkit = function () {\r\n        var httpFetch;\r\n        // @ts-ignore\r\n        if (typeof global.fetch !== 'undefined' && typeof global.fetch === 'function') {\r\n            // @ts-ignore\r\n            httpFetch = global.fetch;\r\n        }\r\n        else if (typeof fetch === 'function') {\r\n            httpFetch = fetch; // RN FETCH\r\n        }\r\n        else {\r\n            httpFetch = require(\"isomorphic-fetch\");\r\n        }\r\n        return httpFetch;\r\n    };\r\n    return Fetch;\r\n}());\r\nexports[\"default\"] = Fetch;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.im = void 0;\r\nvar ImClient_1 = require(\"./lim/core/ImClient\");\r\nexports.im = ImClient_1.imClient;\r\n// if(typeof window !== 'undefined'){\r\n//     console.log(\"window\");\r\n// }\r\n// if(typeof global !== 'undefined'){\r\n//     console.log(\"global\");\r\n// }\r\n// @ts-ignore\r\nif (typeof uni !== 'undefined') {\r\n    // console.log(\"uni\");\r\n    // @ts-ignore\r\n    uni['im'] = ImClient_1.imClient;\r\n    // @ts-ignore\r\n    // uni['im_webtoolkit'] = WebToolkit;\r\n}\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nvar ByteBuffer = /** @class */ (function () {\r\n    function ByteBuffer(arrayBuf, offset) {\r\n        this.Type_Byte = 1;\r\n        this.Type_Short = 2;\r\n        this.Type_UShort = 3;\r\n        this.Type_Int32 = 4;\r\n        this.Type_UInt32 = 5;\r\n        this.Type_String = 6; //变长字符串，前两个字节表示长度\r\n        this.Type_VString = 7; //定长字符串\r\n        this.Type_Int64 = 8;\r\n        this.Type_Float = 9;\r\n        this.Type_Double = 10;\r\n        this.Type_ByteArray = 11;\r\n        this._offset = 0;\r\n        this._list = [];\r\n        this._littleEndian = false;\r\n        this._org_buf = arrayBuf ? (arrayBuf.constructor == DataView ? arrayBuf\r\n            : (arrayBuf.constructor == Uint8Array ? new DataView(arrayBuf.buffer, offset) : new DataView(arrayBuf, offset))) : new DataView(new Uint8Array([]).buffer);\r\n        this.arrayBuf = arrayBuf;\r\n        this.offset = offset;\r\n        // if (!ArrayBuffer.prototype.slice) {\r\n        //     ArrayBuffer.prototype.slice = function (start, end) {\r\n        //         var that = new Uint8Array(this);\r\n        //         if (end == undefined) end = that.length;\r\n        //         var result = new ArrayBuffer(end - start);\r\n        //         var resultArray = new Uint8Array(result);\r\n        //         for (var i = 0; i < resultArray.length; i++)\r\n        //             resultArray[i] = that[i + start];\r\n        //         return result;\r\n        //     }\r\n        // }\r\n    }\r\n    //指定字节序 为BigEndian\r\n    ByteBuffer.prototype.bigEndian = function () {\r\n        this._littleEndian = false;\r\n        return this;\r\n    };\r\n    ;\r\n    //指定字节序 为LittleEndian\r\n    ByteBuffer.prototype.littleEndianfunction = function () {\r\n        this._littleEndian = true;\r\n        return this;\r\n    };\r\n    ;\r\n    ByteBuffer.prototype.utf8Write = function (view, offset, str) {\r\n        var c = 0;\r\n        for (var i = 0, l = str.length; i < l; i++) {\r\n            c = str.charCodeAt(i);\r\n            if (c < 0x80) {\r\n                view.setUint8(offset++, c);\r\n            }\r\n            else if (c < 0x800) {\r\n                view.setUint8(offset++, 0xc0 | (c >> 6));\r\n                view.setUint8(offset++, 0x80 | (c & 0x3f));\r\n            }\r\n            else if (c < 0xd800 || c >= 0xe000) {\r\n                view.setUint8(offset++, 0xe0 | (c >> 12));\r\n                view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\r\n                view.setUint8(offset++, 0x80 | (c & 0x3f));\r\n            }\r\n            else {\r\n                i++;\r\n                c = 0x10000 + (((c & 0x3ff) << 10) | (str.charCodeAt(i) & 0x3ff));\r\n                view.setUint8(offset++, 0xf0 | (c >> 18));\r\n                view.setUint8(offset++, 0x80 | (c >> 12) & 0x3f);\r\n                view.setUint8(offset++, 0x80 | (c >> 6) & 0x3f);\r\n                view.setUint8(offset++, 0x80 | (c & 0x3f));\r\n            }\r\n        }\r\n    };\r\n    // byte (val, index) {\r\n    //     if (arguments.length == 0) {\r\n    //         this._list.push(this._org_buf.getUint8(this._offset, this._littleEndian));\r\n    //         this._offset += 1;\r\n    //     } else {\r\n    //         this._list.splice(index != undefined ? index : this._list.length, 0);\r\n    //         this._offset += 1;\r\n    //     }\r\n    //     return this;\r\n    // };\r\n    // short(val:number, index:number) {\r\n    //     if (arguments.length == 0) {\r\n    //         this._list.push(this._org_buf.getInt16(this._offset, this._littleEndian));\r\n    //         this._offset += 2;\r\n    //     } else {\r\n    //         this._list.splice(index != undefined ? index : this._list.length, 0, this.Type_Short);\r\n    //         this._offset += 2;\r\n    //     }\r\n    //     return this;\r\n    // };\r\n    // ushort(val, index) {\r\n    //     if (arguments.length == 0) {\r\n    //         this._list.push(this._org_buf.getUint16(this._offset, this._littleEndian));\r\n    //         this._offset += 2;\r\n    //     } else {\r\n    //         // , {t: this.Type_UShort, d: val, l: 2}\r\n    //         this._list.splice(index != undefined ? index : this._list.length, 0);\r\n    //         this._offset += 2;\r\n    //     }\r\n    //     return this;\r\n    // };\r\n    ByteBuffer.prototype.int32 = function (val, index) {\r\n        if (arguments.length == 0) {\r\n            this._list.push(this._org_buf.getInt32(this._offset, this._littleEndian));\r\n            this._offset += 4;\r\n        }\r\n        else {\r\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_Int32, d: val, l: 4 });\r\n            this._offset += 4;\r\n        }\r\n        return this;\r\n    };\r\n    ;\r\n    ByteBuffer.prototype.uint32 = function (val, index) {\r\n        if (arguments.length == 0) {\r\n            this._list.push(this._org_buf.getUint32(this._offset, this._littleEndian));\r\n            this._offset += 4;\r\n        }\r\n        else {\r\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_UInt32, d: val, l: 4 });\r\n            this._offset += 4;\r\n        }\r\n        return this;\r\n    };\r\n    ;\r\n    /**\r\n     * 新加的方法，获取bytebuffer的长度\r\n     */\r\n    ByteBuffer.prototype.blength = function () {\r\n        return this._offset;\r\n    };\r\n    ;\r\n    /**\r\n         * 变长字符串 前4个字节表示字符串长度\r\n         **/\r\n    ByteBuffer.prototype.string = function (val, index) {\r\n        if (arguments.length == 0) {\r\n            var len = this._org_buf.getInt32(this._offset, this._littleEndian);\r\n            this._offset += 4;\r\n            this._list.push(this.utf8Read(this._org_buf, this._offset, len));\r\n            this._offset += len;\r\n        }\r\n        else {\r\n            var len = 0;\r\n            if (val) {\r\n                len = this.utf8Length(val);\r\n            }\r\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_String, d: val, l: len });\r\n            this._offset += len + 4;\r\n        }\r\n        return this;\r\n    };\r\n    ;\r\n    ByteBuffer.prototype.utf8Length = function (str) {\r\n        var c = 0, length = 0;\r\n        for (var i = 0, l = str.length; i < l; i++) {\r\n            c = str.charCodeAt(i);\r\n            if (c < 0x80) {\r\n                length += 1;\r\n            }\r\n            else if (c < 0x800) {\r\n                length += 2;\r\n            }\r\n            else if (c < 0xd800 || c >= 0xe000) {\r\n                length += 3;\r\n            }\r\n            else {\r\n                i++;\r\n                length += 4;\r\n            }\r\n        }\r\n        return length;\r\n    };\r\n    ByteBuffer.prototype.utf8Read = function (view, offset, length) {\r\n        var string = '', chr = 0;\r\n        for (var i = offset, end = offset + length; i < end; i++) {\r\n            var byte = view.getUint8(i);\r\n            if ((byte & 0x80) === 0x00) {\r\n                string += String.fromCharCode(byte);\r\n                continue;\r\n            }\r\n            if ((byte & 0xe0) === 0xc0) {\r\n                string += String.fromCharCode(((byte & 0x0f) << 6) |\r\n                    (view.getUint8(++i) & 0x3f));\r\n                continue;\r\n            }\r\n            if ((byte & 0xf0) === 0xe0) {\r\n                string += String.fromCharCode(((byte & 0x0f) << 12) |\r\n                    ((view.getUint8(++i) & 0x3f) << 6) |\r\n                    ((view.getUint8(++i) & 0x3f) << 0));\r\n                continue;\r\n            }\r\n            if ((byte & 0xf8) === 0xf0) {\r\n                chr = ((byte & 0x07) << 18) |\r\n                    ((view.getUint8(++i) & 0x3f) << 12) |\r\n                    ((view.getUint8(++i) & 0x3f) << 6) |\r\n                    ((view.getUint8(++i) & 0x3f) << 0);\r\n                if (chr >= 0x010000) { // surrogate pair\r\n                    chr -= 0x010000;\r\n                    string += String.fromCharCode((chr >>> 10) + 0xD800, (chr & 0x3FF) + 0xDC00);\r\n                }\r\n                else {\r\n                    string += String.fromCharCode(chr);\r\n                }\r\n                continue;\r\n            }\r\n            throw new Error('Invalid byte ' + byte.toString(16));\r\n        }\r\n        return string;\r\n    };\r\n    /**\r\n     * 定长字符串 val为null时，读取定长字符串（需指定长度len）\r\n     **/\r\n    ByteBuffer.prototype.vstring = function (val, len, index) {\r\n        if (!len) {\r\n            throw new Error('vstring must got len argument');\r\n            return this;\r\n        }\r\n        if (val == undefined || val == null) {\r\n            var vlen = 0; //实际长度\r\n            for (var i = this._offset; i < this._offset + len; i++) {\r\n                if (this._org_buf.getUint8(i) > 0)\r\n                    vlen++;\r\n            }\r\n            this._list.push(this.utf8Read(this._org_buf, this._offset, vlen));\r\n            this._offset += len;\r\n        }\r\n        else {\r\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_VString, d: val, l: len });\r\n            this._offset += len;\r\n        }\r\n        return this;\r\n    };\r\n    ;\r\n    ByteBuffer.prototype.int64 = function (val, index) {\r\n        if (arguments.length == 0) {\r\n            this._list.push(this._org_buf.getFloat64(this._offset, this._littleEndian));\r\n            this._offset += 8;\r\n        }\r\n        else {\r\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_Int64, d: val, l: 8 });\r\n            this._offset += 8;\r\n        }\r\n        return this;\r\n    };\r\n    ;\r\n    ByteBuffer.prototype.float = function (val, index) {\r\n        if (arguments.length == 0) {\r\n            this._list.push(this._org_buf.getFloat32(this._offset, this._littleEndian));\r\n            this._offset += 4;\r\n        }\r\n        else {\r\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_Float, d: val, l: 4 });\r\n            this._offset += 4;\r\n        }\r\n        return this;\r\n    };\r\n    ;\r\n    ByteBuffer.prototype.double = function (val, index) {\r\n        if (arguments.length == 0) {\r\n            this._list.push(this._org_buf.getFloat64(this._offset, this._littleEndian));\r\n            this._offset += 8;\r\n        }\r\n        else {\r\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_Double, d: val, l: 8 });\r\n            this._offset += 8;\r\n        }\r\n        return this;\r\n    };\r\n    ;\r\n    /**\r\n     * 写入或读取一段字节数组\r\n     **/\r\n    ByteBuffer.prototype.byteArray = function (val, len, index) {\r\n        if (!len) {\r\n            throw new Error('byteArray must got len argument');\r\n            return this;\r\n        }\r\n        if (val == undefined || val == null) {\r\n            var arr = new Uint8Array(this._org_buf.buffer.slice(this._offset, this._offset + len));\r\n            this._list.push(arr);\r\n            this._offset += len;\r\n        }\r\n        else {\r\n            this._list.splice(index != undefined ? index : this._list.length, 0, { t: this.Type_ByteArray, d: val, l: len });\r\n            this._offset += len;\r\n        }\r\n        return this;\r\n    };\r\n    ;\r\n    /**\r\n     * 解包成数据数组\r\n     **/\r\n    ByteBuffer.prototype.unpack = function () {\r\n        return this._list;\r\n    };\r\n    ;\r\n    /**\r\n     * 打包成二进制,在前面加上4个字节表示包长\r\n     **/\r\n    ByteBuffer.prototype.packWithHead = function () {\r\n        return this.pack(true);\r\n    };\r\n    ;\r\n    /**\r\n         * 打包成二进制\r\n         * @param ifHead 是否在前面加上4个字节表示包长\r\n         **/\r\n    ByteBuffer.prototype.pack = function (ifHead) {\r\n        this._org_buf = new DataView(new ArrayBuffer((ifHead) ? this._offset + 4 : this._offset));\r\n        var offset = 0;\r\n        if (ifHead) {\r\n            this._org_buf.setUint32(offset, this._offset, this._littleEndian);\r\n            offset += 4;\r\n        }\r\n        for (var i = 0; i < this._list.length; i++) {\r\n            switch (this._list[i].t) {\r\n                case this.Type_Byte:\r\n                    this._org_buf.setInt8(offset, this._list[i].d);\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_Short:\r\n                    this._org_buf.setInt16(offset, this._list[i].d, this._littleEndian);\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_UShort:\r\n                    this._org_buf.setUint16(offset, this._list[i].d, this._littleEndian);\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_Int32:\r\n                    this._org_buf.setInt32(offset, this._list[i].d, this._littleEndian);\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_UInt32:\r\n                    this._org_buf.setUint32(offset, this._list[i].d, this._littleEndian);\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_String:\r\n                    //前4个字节表示字符串长度\r\n                    this._org_buf.setUint32(offset, this._list[i].l, this._littleEndian);\r\n                    offset += 4;\r\n                    this.utf8Write(this._org_buf, offset, this._list[i].d);\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_VString:\r\n                    this.utf8Write(this._org_buf, offset, this._list[i].d);\r\n                    var vlen = this.utf8Length(this._list[i].d); //字符串实际长度\r\n                    //补齐\\0\r\n                    for (var j = offset + vlen; j < offset + this._list[i].l; j++) {\r\n                        this._org_buf.setUint8(j, 0);\r\n                    }\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_Int64:\r\n                    this._org_buf.setFloat64(offset, this._list[i].d, this._littleEndian);\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_Float:\r\n                    this._org_buf.setFloat32(offset, this._list[i].d, this._littleEndian);\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_Double:\r\n                    this._org_buf.setFloat64(offset, this._list[i].d, this._littleEndian);\r\n                    offset += this._list[i].l;\r\n                    break;\r\n                case this.Type_ByteArray:\r\n                    var indx = 0;\r\n                    for (var j = offset; j < offset + this._list[i].l; j++) {\r\n                        if (indx < this._list[i].d.length) {\r\n                            this._org_buf.setUint8(j, this._list[i].d[indx]);\r\n                        }\r\n                        else { //不够的话，后面补齐0x00\r\n                            this._org_buf.setUint8(j, 0);\r\n                        }\r\n                        indx++;\r\n                    }\r\n                    offset += this._list[i].l;\r\n                    break;\r\n            }\r\n        }\r\n        return this._org_buf.buffer;\r\n    };\r\n    ;\r\n    /**\r\n     * 未读数据长度\r\n     **/\r\n    ByteBuffer.prototype.getAvailable = function () {\r\n        if (!this._org_buf)\r\n            return this._offset;\r\n        return this._org_buf.buffer.byteLength - this._offset;\r\n    };\r\n    ;\r\n    return ByteBuffer;\r\n}());\r\nexports[\"default\"] = ByteBuffer;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.LoginPack = void 0;\r\nvar LoginPack = /** @class */ (function () {\r\n    function LoginPack(appId, userId, clientType) {\r\n        this.userId = userId;\r\n        this.clientType = clientType;\r\n        this.appId = appId;\r\n    }\r\n    return LoginPack;\r\n}());\r\nexports.LoginPack = LoginPack;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nvar Fetch_1 = require(\"../common/Fetch\");\r\nvar Logger_1 = require(\"../log/Logger\");\r\nvar Base64 = {\r\n    _keyStr: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",\r\n    encode: function (e) {\r\n        var t = \"\";\r\n        var n, r, i, s, o, u, a;\r\n        var f = 0;\r\n        e = Base64._utf8_encode(e);\r\n        while (f < e.length) {\r\n            n = e.charCodeAt(f++);\r\n            r = e.charCodeAt(f++);\r\n            i = e.charCodeAt(f++);\r\n            s = n >> 2;\r\n            o = (n & 3) << 4 | r >> 4;\r\n            u = (r & 15) << 2 | i >> 6;\r\n            a = i & 63;\r\n            if (isNaN(r)) {\r\n                u = a = 64;\r\n            }\r\n            else if (isNaN(i)) {\r\n                a = 64;\r\n            }\r\n            t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a);\r\n        }\r\n        return t;\r\n    },\r\n    decode: function (e) {\r\n        var t = \"\";\r\n        var n, r, i;\r\n        var s, o, u, a;\r\n        var f = 0;\r\n        e = e.replace(/[^A-Za-z0-9+/=]/g, \"\");\r\n        while (f < e.length) {\r\n            s = this._keyStr.indexOf(e.charAt(f++));\r\n            o = this._keyStr.indexOf(e.charAt(f++));\r\n            u = this._keyStr.indexOf(e.charAt(f++));\r\n            a = this._keyStr.indexOf(e.charAt(f++));\r\n            n = s << 2 | o >> 4;\r\n            r = (o & 15) << 4 | u >> 2;\r\n            i = (u & 3) << 6 | a;\r\n            t = t + String.fromCharCode(n);\r\n            if (u != 64) {\r\n                t = t + String.fromCharCode(r);\r\n            }\r\n            if (a != 64) {\r\n                t = t + String.fromCharCode(i);\r\n            }\r\n        }\r\n        t = Base64._utf8_decode(t);\r\n        return t;\r\n    },\r\n    _utf8_encode: function (e) {\r\n        e = e.replace(/rn/g, \"n\");\r\n        var t = \"\";\r\n        for (var n = 0; n < e.length; n++) {\r\n            var r = e.charCodeAt(n);\r\n            if (r < 128) {\r\n                t += String.fromCharCode(r);\r\n            }\r\n            else if (r > 127 && r < 2048) {\r\n                t += String.fromCharCode(r >> 6 | 192);\r\n                t += String.fromCharCode(r & 63 | 128);\r\n            }\r\n            else {\r\n                t += String.fromCharCode(r >> 12 | 224);\r\n                t += String.fromCharCode(r >> 6 & 63 | 128);\r\n                t += String.fromCharCode(r & 63 | 128);\r\n            }\r\n        }\r\n        return t;\r\n    },\r\n    _utf8_decode: function (e) {\r\n        var t = \"\";\r\n        var n = 0;\r\n        var r = 0;\r\n        var c1 = 0;\r\n        var c2 = 0;\r\n        while (n < e.length) {\r\n            r = e.charCodeAt(n);\r\n            if (r < 128) {\r\n                t += String.fromCharCode(r);\r\n                n++;\r\n            }\r\n            else if (r > 191 && r < 224) {\r\n                c2 = e.charCodeAt(n + 1);\r\n                t += String.fromCharCode((r & 31) << 6 | c2 & 63);\r\n                n += 2;\r\n            }\r\n            else {\r\n                c2 = e.charCodeAt(n + 1);\r\n                var c3 = e.charCodeAt(n + 2);\r\n                t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);\r\n                n += 3;\r\n            }\r\n        }\r\n        return t;\r\n    }\r\n};\r\nvar WebToolkit = /** @class */ (function () {\r\n    function WebToolkit() {\r\n    }\r\n    // 获取浏览器信息\r\n    WebToolkit.getBrowserInfo = function () {\r\n        var agent = navigator.userAgent.toLowerCase();\r\n        var system = agent.split(\" \")[1].split(\" \")[0].split(\"(\")[1];\r\n        var REGSTR_EDGE = /edge\\/[\\d.]+/gi;\r\n        var REGSTR_IE = /trident\\/[\\d.]+/gi;\r\n        var OLD_IE = /msie\\s[\\d.]+/gi;\r\n        var REGSTR_FF = /firefox\\/[\\d.]+/gi;\r\n        var REGSTR_CHROME = /chrome\\/[\\d.]+/gi;\r\n        var REGSTR_SAF = /safari\\/[\\d.]+/gi;\r\n        var REGSTR_OPERA = /opr\\/[\\d.]+/gi;\r\n        var info = {\r\n            code: 0,\r\n            system: system,\r\n            browser: \"\",\r\n            browserVersion: \"\"\r\n        };\r\n        // IE\r\n        if (agent.indexOf(\"trident\") > 0) {\r\n            info.browser = agent.match(REGSTR_IE)[0].split(\"/\")[0];\r\n            info.browserVersion = agent.match(REGSTR_IE)[0].split(\"/\")[1];\r\n            return info;\r\n        }\r\n        // OLD_IE\r\n        if (agent.indexOf(\"msie\") > 0) {\r\n            info.browser = agent.match(OLD_IE)[0].split(\" \")[0];\r\n            info.browserVersion = agent.match(OLD_IE)[0].split(\" \")[1];\r\n            return info;\r\n        }\r\n        // Edge\r\n        if (agent.indexOf(\"edge\") > 0) {\r\n            info.browser = agent.match(REGSTR_EDGE)[0].split(\"/\")[0];\r\n            info.browserVersion = agent.match(REGSTR_EDGE)[0].split(\"/\")[1];\r\n            return info;\r\n        }\r\n        // firefox\r\n        if (agent.indexOf(\"firefox\") > 0) {\r\n            info.browser = agent.match(REGSTR_FF)[0].split(\"/\")[0];\r\n            info.browserVersion = agent.match(REGSTR_FF)[0].split(\"/\")[1];\r\n            return info;\r\n        }\r\n        // Opera\r\n        if (agent.indexOf(\"opr\") > 0) {\r\n            info.browser = agent.match(REGSTR_OPERA)[0].split(\"/\")[0];\r\n            info.browserVersion = agent.match(REGSTR_OPERA)[0].split(\"/\")[1];\r\n            return info;\r\n        }\r\n        // Safari\r\n        if (agent.indexOf(\"safari\") > 0 && agent.indexOf(\"chrome\") < 0) {\r\n            info.browser = agent.match(REGSTR_SAF)[0].split(\"/\")[0];\r\n            info.browserVersion = agent.match(REGSTR_SAF)[0].split(\"/\")[1];\r\n            return info;\r\n        }\r\n        // Chrome\r\n        if (agent.indexOf(\"chrome\") > 0) {\r\n            info.browser = agent.match(REGSTR_CHROME)[0].split(\"/\")[0];\r\n            info.browserVersion = agent.match(REGSTR_CHROME)[0].split(\"/\")[1];\r\n            return info;\r\n        }\r\n        else {\r\n            info.code = -1;\r\n            return info;\r\n        }\r\n    };\r\n    // TODO: 获取小程序设备信息\r\n    WebToolkit.getWxappInfo = function () {\r\n        return {\r\n            system: 'WXAPP',\r\n            browser: 'WXAPP',\r\n            browserVersion: '1.0'\r\n        };\r\n    };\r\n    // TODO: 获取ReactNative设备信息\r\n    WebToolkit.getReactNativeInfo = function () {\r\n        return {\r\n            system: 'RNNative',\r\n            browser: 'RNNative',\r\n            browserVersion: '1.0'\r\n        };\r\n    };\r\n    // TODO: 获取UniApp设备信息\r\n    WebToolkit.getUniAppInfo = function () {\r\n        return {\r\n            system: 'UNIAPP',\r\n            browser: 'UNIAPP',\r\n            browserVersion: '1.0'\r\n        };\r\n    };\r\n    // 动态加入script 到head 标签处\r\n    WebToolkit.loadJS = function (url, callback) {\r\n        var script = document.createElement('script'), fn = callback || function () { };\r\n        script.type = 'text/javascript';\r\n        // document.getElementsByTagName('head')[0].children[16].outerHTML.indexOf('http://pv.sohu.com/cityjson?ie=utf-8')\r\n        var exist = false;\r\n        for (var v in document.getElementsByTagName('head')[0].children) {\r\n            var dom = document.getElementsByTagName('head')[0].children[v];\r\n            if (dom.outerHTML !== undefined && dom.outerHTML.indexOf(url) >= 0) {\r\n                exist = true;\r\n            }\r\n        }\r\n        if (exist) {\r\n            fn();\r\n            return;\r\n        }\r\n        //IE\r\n        if (script.readyState) {\r\n            script.onreadystatechange = function () {\r\n                if (script.readyState == 'loaded' || script.readyState == 'complete') {\r\n                    script.onreadystatechange = null;\r\n                    fn();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            //其他浏览器\r\n            script.onload = function () {\r\n                fn();\r\n            };\r\n        }\r\n        script.src = url;\r\n        document.getElementsByTagName('head')[0].appendChild(script);\r\n    };\r\n    // 获取当前ip信息(fetch方式)\r\n    WebToolkit.getIpInfoByFetch = function (callback) {\r\n        var url = 'http://pv.sohu.com/cityjson?ie=utf-8';\r\n        var fetch = Fetch_1[\"default\"].getFetchToolkit();\r\n        var request = { method: \"GET\", mode: \"cors\", headers: { \"Content-Type\": \"application/json\" } };\r\n        return fetch(url, request).then(function (response) {\r\n            return response.text();\r\n        }).then(function (res) {\r\n            if (typeof callback === 'function') {\r\n                var currentCity = eval('_current_city=' + res.replace('var returnCitySN = ', ''));\r\n                callback(currentCity);\r\n            }\r\n        })[\"catch\"](function (e) {\r\n            Logger_1[\"default\"].trace(e);\r\n        });\r\n    };\r\n    // 获取当前ip信息(动态插入script脚本方式)\r\n    WebToolkit.getIpInfoByInsertScript = function (callback) {\r\n        var url = 'http://pv.sohu.com/cityjson?ie=utf-8';\r\n        WebToolkit.loadJS(url, function () {\r\n            callback(window['returnCitySN']);\r\n        });\r\n    };\r\n    WebToolkit.getIpInfo = function (callback) {\r\n        WebToolkit.getIpInfoByInsertScript(callback);\r\n    };\r\n    // 获取客户端设备信息\r\n    WebToolkit.getDeviceInfo = function () {\r\n        var deviceInfo = WebToolkit.getBrowserInfo();\r\n        return deviceInfo;\r\n    };\r\n    WebToolkit.base64Encode = function (str) {\r\n        return Base64.encode(str);\r\n    };\r\n    WebToolkit.base64Decode = function (str) {\r\n        return Base64.decode(str);\r\n    };\r\n    return WebToolkit;\r\n}());\r\nexports[\"default\"] = WebToolkit;\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","var global =\n  (typeof globalThis !== 'undefined' && globalThis) ||\n  (typeof self !== 'undefined' && self) ||\n  (typeof global !== 'undefined' && global)\n\nvar support = {\n  searchParams: 'URLSearchParams' in global,\n  iterable: 'Symbol' in global && 'iterator' in Symbol,\n  blob:\n    'FileReader' in global &&\n    'Blob' in global &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in global,\n  arrayBuffer: 'ArrayBuffer' in global\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~!]/i.test(name) || name === '') {\n    throw new TypeError('Invalid character in header field name: \"' + name + '\"')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    /*\n      fetch-mock wraps the Response object in an ES6 Proxy to\n      provide useful test harness features such as flush. However, on\n      ES5 browsers without fetch or Proxy support pollyfills must be used;\n      the proxy-pollyfill is unable to proxy an attribute unless it exists\n      on the object before the Proxy is created. This change ensures\n      Response.bodyUsed exists on the instance, while maintaining the\n      semantic of setting Request.bodyUsed in the constructor before\n      _initBody is called.\n    */\n    this.bodyUsed = this.bodyUsed\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        var isConsumed = consumed(this)\n        if (isConsumed) {\n          return isConsumed\n        }\n        if (ArrayBuffer.isView(this._bodyArrayBuffer)) {\n          return Promise.resolve(\n            this._bodyArrayBuffer.buffer.slice(\n              this._bodyArrayBuffer.byteOffset,\n              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength\n            )\n          )\n        } else {\n          return Promise.resolve(this._bodyArrayBuffer)\n        }\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  if (!(this instanceof Request)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n\n  if (this.method === 'GET' || this.method === 'HEAD') {\n    if (options.cache === 'no-store' || options.cache === 'no-cache') {\n      // Search for a '_' parameter in the query string\n      var reParamSearch = /([?&])_=[^&]*/\n      if (reParamSearch.test(this.url)) {\n        // If it already exists then set the value with the current time\n        this.url = this.url.replace(reParamSearch, '$1_=' + new Date().getTime())\n      } else {\n        // Otherwise add a new '_' parameter to the end with the current time\n        var reQueryString = /\\?/\n        this.url += (reQueryString.test(this.url) ? '&' : '?') + '_=' + new Date().getTime()\n      }\n    }\n  }\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  // Avoiding split via regex to work around a common IE11 bug with the core-js 3.6.0 regex polyfill\n  // https://github.com/github/fetch/issues/748\n  // https://github.com/zloirock/core-js/issues/751\n  preProcessedHeaders\n    .split('\\r')\n    .map(function(header) {\n      return header.indexOf('\\n') === 0 ? header.substr(1, header.length) : header\n    })\n    .forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!(this instanceof Response)) {\n    throw new TypeError('Please use the \"new\" operator, this DOM object constructor cannot be called as a function.')\n  }\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = options.statusText === undefined ? '' : '' + options.statusText\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = global.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      setTimeout(function() {\n        resolve(new Response(body, options))\n      }, 0)\n    }\n\n    xhr.onerror = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'))\n      }, 0)\n    }\n\n    xhr.ontimeout = function() {\n      setTimeout(function() {\n        reject(new TypeError('Network request failed'))\n      }, 0)\n    }\n\n    xhr.onabort = function() {\n      setTimeout(function() {\n        reject(new DOMException('Aborted', 'AbortError'))\n      }, 0)\n    }\n\n    function fixUrl(url) {\n      try {\n        return url === '' && global.location.href ? global.location.href : url\n      } catch (e) {\n        return url\n      }\n    }\n\n    xhr.open(request.method, fixUrl(request.url), true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr) {\n      if (support.blob) {\n        xhr.responseType = 'blob'\n      } else if (\n        support.arrayBuffer &&\n        request.headers.get('Content-Type') &&\n        request.headers.get('Content-Type').indexOf('application/octet-stream') !== -1\n      ) {\n        xhr.responseType = 'arraybuffer'\n      }\n    }\n\n    if (init && typeof init.headers === 'object' && !(init.headers instanceof Headers)) {\n      Object.getOwnPropertyNames(init.headers).forEach(function(name) {\n        xhr.setRequestHeader(name, normalizeValue(init.headers[name]))\n      })\n    } else {\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n    }\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!global.fetch) {\n  global.fetch = fetch\n  global.Headers = Headers\n  global.Request = Request\n  global.Response = Response\n}\n","var _globalThis;\nif (typeof globalThis === 'object') {\n\t_globalThis = globalThis;\n} else {\n\ttry {\n\t\t_globalThis = require('es5-ext/global');\n\t} catch (error) {\n\t} finally {\n\t\tif (!_globalThis && typeof window !== 'undefined') { _globalThis = window; }\n\t\tif (!_globalThis) { throw new Error('Could not determine global this'); }\n\t}\n}\n\nvar NativeWebSocket = _globalThis.WebSocket || _globalThis.MozWebSocket;\nvar websocket_version = require('./version');\n\n\n/**\n * Expose a W3C WebSocket class with just one or two arguments.\n */\nfunction W3CWebSocket(uri, protocols) {\n\tvar native_instance;\n\n\tif (protocols) {\n\t\tnative_instance = new NativeWebSocket(uri, protocols);\n\t}\n\telse {\n\t\tnative_instance = new NativeWebSocket(uri);\n\t}\n\n\t/**\n\t * 'native_instance' is an instance of nativeWebSocket (the browser's WebSocket\n\t * class). Since it is an Object it will be returned as it is when creating an\n\t * instance of W3CWebSocket via 'new W3CWebSocket()'.\n\t *\n\t * ECMAScript 5: http://bclary.com/2004/11/07/#a-13.2.2\n\t */\n\treturn native_instance;\n}\nif (NativeWebSocket) {\n\t['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'].forEach(function(prop) {\n\t\tObject.defineProperty(W3CWebSocket, prop, {\n\t\t\tget: function() { return NativeWebSocket[prop]; }\n\t\t});\n\t});\n}\n\n/**\n * Module exports.\n */\nmodule.exports = {\n    'w3cwebsocket' : NativeWebSocket ? W3CWebSocket : null,\n    'version'      : websocket_version\n};\n","var naiveFallback = function () {\n\tif (typeof self === \"object\" && self) return self;\n\tif (typeof window === \"object\" && window) return window;\n\tthrow new Error(\"Unable to resolve global `this`\");\n};\n\nmodule.exports = (function () {\n\tif (this) return this;\n\n\t// Unexpected strict mode (may happen if e.g. bundled into ESM module)\n\n\t// Fallback to standard globalThis if available\n\tif (typeof globalThis === \"object\" && globalThis) return globalThis;\n\n\t// Thanks @mathiasbynens -> https://mathiasbynens.be/notes/globalthis\n\t// In all ES5+ engines global object inherits from Object.prototype\n\t// (if you approached one that doesn't please report)\n\ttry {\n\t\tObject.defineProperty(Object.prototype, \"__global__\", {\n\t\t\tget: function () { return this; },\n\t\t\tconfigurable: true\n\t\t});\n\t} catch (error) {\n\t\t// Unfortunate case of updates to Object.prototype being restricted\n\t\t// via preventExtensions, seal or freeze\n\t\treturn naiveFallback();\n\t}\n\ttry {\n\t\t// Safari case (window.__global__ works, but __global__ does not)\n\t\tif (!__global__) return naiveFallback();\n\t\treturn __global__;\n\t} finally {\n\t\tdelete Object.prototype.__global__;\n\t}\n})();\n","module.exports = require('../package.json').version;\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.RequestBase = void 0;\r\nvar RequestBase = /** @class */ (function () {\r\n    function RequestBase(appId, clientType, imei, operate) {\r\n        this.appId = appId;\r\n        this.clientType = clientType;\r\n        this.imei = imei;\r\n        this.operate = operate;\r\n    }\r\n    return RequestBase;\r\n}());\r\nexports.RequestBase = RequestBase;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.RequestParams = void 0;\r\nvar RequestParams = /** @class */ (function () {\r\n    function RequestParams(appId, identifier, userSign) {\r\n        this.appId = appId;\r\n        this.identifier = identifier;\r\n        this.userSign = userSign;\r\n    }\r\n    return RequestParams;\r\n}());\r\nexports.RequestParams = RequestParams;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nvar Logger_1 = require(\"../log/Logger\");\r\nvar ImClient_1 = require(\"./ImClient\");\r\nvar ApiResponse_1 = require(\"../model/ApiResponse\");\r\nvar utils_1 = require(\"../common/utils\");\r\nvar Fetch_1 = require(\"../common/Fetch\");\r\nvar HttpApi = /** @class */ (function () {\r\n    function HttpApi(url) {\r\n        this.url = \"\"; //http://127.0.0.1:8000/v1\r\n        this.url = url;\r\n    }\r\n    HttpApi.prototype.call = function (url, params, body) {\r\n        var userId = ImClient_1.imClient.userId;\r\n        Logger_1[\"default\"].info(userId);\r\n        var reqUrl = this.url + url;\r\n        if (params != null) {\r\n            var paramStr = this.setQueryConfig(params);\r\n            console.log(paramStr);\r\n            reqUrl += paramStr;\r\n        }\r\n        var requestMethod = \"POST\";\r\n        var headers = {\r\n            'Content-Type': 'application/json',\r\n        };\r\n        var request = { method: requestMethod, headers: headers, mode: 'cors', body: utils_1[\"default\"].json(body) };\r\n        return this.httpFetch(reqUrl, request);\r\n    };\r\n    HttpApi.prototype.setQueryConfig = function (params) {\r\n        var _str = \"?\";\r\n        for (var o in params) {\r\n            _str += o + \"=\" + params[o] + \"&\";\r\n        }\r\n        _str = _str.substring(0, _str.length - 1); //末尾是&\r\n        return _str;\r\n    };\r\n    HttpApi.prototype.httpFetch = function (url, request) {\r\n        var _this = this;\r\n        console.log(\"httpFetch\");\r\n        var webfetch = Fetch_1[\"default\"].getFetchToolkit();\r\n        console.log(\"webfetch\");\r\n        return webfetch(url, request).then(function (response) {\r\n            return response.json();\r\n        }).then(function (res) {\r\n            Logger_1[\"default\"].info(\"==> [\" + request.method + \"] \" + url + \" back:\" + utils_1[\"default\"].json(res));\r\n            // const resp = this.response2ApiResponse(res);\r\n            console.log(res);\r\n            /* if (resp.isFailed()) {\r\n                   return Promise.reject(resp);\r\n               }*/\r\n            return Promise.resolve(_this.response2ApiResponse(res));\r\n        });\r\n    };\r\n    HttpApi.prototype.response2ApiResponse = function (response) {\r\n        var apiResponse = new ApiResponse_1[\"default\"](true);\r\n        apiResponse.data = response.data;\r\n        apiResponse.msg = response.message;\r\n        apiResponse.code = response.code;\r\n        return apiResponse;\r\n    };\r\n    return HttpApi;\r\n}());\r\nexports[\"default\"] = HttpApi;\r\n// export const httpApi = new HttpApi();\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nvar ApiResponse = /** @class */ (function () {\r\n    function ApiResponse(succeed) {\r\n        if (succeed === void 0) { succeed = false; }\r\n        this.msg = '';\r\n        this.data = null;\r\n        if (succeed) {\r\n            this.code = 200;\r\n        }\r\n    }\r\n    ApiResponse.prototype.isSucceed = function () {\r\n        return this.code === 200;\r\n    };\r\n    ApiResponse.prototype.isFailed = function () {\r\n        return !this.isSucceed();\r\n    };\r\n    return ApiResponse;\r\n}());\r\nexports[\"default\"] = ApiResponse;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.ConversationEventCommand = exports.UserEventCommand = exports.SystemCommand = exports.GroupCommand = exports.FriendShipCommand = exports.MessageCommand = void 0;\r\nvar MessageCommand;\r\n(function (MessageCommand) {\r\n    // 单聊消息收发\r\n    MessageCommand[MessageCommand[\"MSG_P2P\"] = 1103] = \"MSG_P2P\";\r\n    // 单聊消息同步\r\n    MessageCommand[MessageCommand[\"MSG_P2P_SYNC\"] = 1108] = \"MSG_P2P_SYNC\";\r\n    //发送消息已读   1106\r\n    MessageCommand[MessageCommand[\"MSG_READED\"] = 1106] = \"MSG_READED\";\r\n    //消息接收ack 1107\r\n    MessageCommand[MessageCommand[\"MSG_RECEIVE_ACK\"] = 1107] = \"MSG_RECEIVE_ACK\";\r\n    //单聊消息ACK 1046\r\n    MessageCommand[MessageCommand[\"MSG_ACK\"] = 1046] = \"MSG_ACK\";\r\n    // 消息撤回 1050\r\n    MessageCommand[MessageCommand[\"MSG_RECALL\"] = 1050] = \"MSG_RECALL\";\r\n    //消息撤回通知 1052\r\n    MessageCommand[MessageCommand[\"MSG_RECALL_NOTIFY\"] = 1052] = \"MSG_RECALL_NOTIFY\";\r\n    //消息撤回同步 1053\r\n    MessageCommand[MessageCommand[\"MSG_RECALL_SYNC\"] = 1055] = \"MSG_RECALL_SYNC\";\r\n    // 消息撤回结果 ACK 1051\r\n    MessageCommand[MessageCommand[\"MSG_RECALL_ACK\"] = 1051] = \"MSG_RECALL_ACK\";\r\n    //消息已读同步 1054\r\n    MessageCommand[MessageCommand[\"MSG_READED_SYNC\"] = 1053] = \"MSG_READED_SYNC\";\r\n    //消息已读回执 1055\r\n    MessageCommand[MessageCommand[\"MSG_READED_RECEIPT\"] = 1054] = \"MSG_READED_RECEIPT\";\r\n})(MessageCommand || (MessageCommand = {}));\r\nexports.MessageCommand = MessageCommand;\r\nvar FriendShipCommand;\r\n(function (FriendShipCommand) {\r\n    //添加好友 3000\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_ADD\"] = 3000] = \"FRIEND_ADD\";\r\n    //更新好友 3001\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_UPDATE\"] = 3001] = \"FRIEND_UPDATE\";\r\n    //删除好友 3002\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_DELETE\"] = 3002] = \"FRIEND_DELETE\";\r\n    //好友申请 3003\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_REQUEST\"] = 3003] = \"FRIEND_REQUEST\";\r\n    //好友申请已读 3004\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_REQUEST_READ\"] = 3004] = \"FRIEND_REQUEST_READ\";\r\n    //好友申请审批 3005\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_REQUEST_APPROVER\"] = 3005] = \"FRIEND_REQUEST_APPROVER\";\r\n    //添加黑名单 3010\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_BLACK_ADD\"] = 3010] = \"FRIEND_BLACK_ADD\";\r\n    //移除黑名单 3011\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_BLACK_DELETE\"] = 3011] = \"FRIEND_BLACK_DELETE\";\r\n    //新建好友分组 3012\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_GROUP_ADD\"] = 3012] = \"FRIEND_GROUP_ADD\";\r\n    //删除好友分组 3013\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_GROUP_DELETE\"] = 3013] = \"FRIEND_GROUP_DELETE\";\r\n    //好友分组添加成员 3014\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_GROUP_MEMBER_ADD\"] = 3014] = \"FRIEND_GROUP_MEMBER_ADD\";\r\n    //好友分组移除成员 3015\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_GROUP_MEMBER_DELETE\"] = 3015] = \"FRIEND_GROUP_MEMBER_DELETE\";\r\n    //删除所有的好友\r\n    FriendShipCommand[FriendShipCommand[\"FRIEND_ALL_DELETE\"] = 3016] = \"FRIEND_ALL_DELETE\";\r\n})(FriendShipCommand || (FriendShipCommand = {}));\r\nexports.FriendShipCommand = FriendShipCommand;\r\nvar GroupCommand;\r\n(function (GroupCommand) {\r\n    /**\r\n     * 推送申请入群通知 2000\r\n     */\r\n    GroupCommand[GroupCommand[\"JOIN_GROUP\"] = 2000] = \"JOIN_GROUP\";\r\n    /**\r\n     * 推送添加群成员 2001，通知给所有管理员和本人\r\n     */\r\n    GroupCommand[GroupCommand[\"ADDED_MEMBER\"] = 2001] = \"ADDED_MEMBER\";\r\n    /**\r\n     * 推送创建群组通知 2002，通知给所有人\r\n     */\r\n    GroupCommand[GroupCommand[\"CREATED_GROUP\"] = 2002] = \"CREATED_GROUP\";\r\n    /**\r\n     * 推送更新群组通知 2003，通知给所有人\r\n     */\r\n    GroupCommand[GroupCommand[\"UPDATED_GROUP\"] = 2003] = \"UPDATED_GROUP\";\r\n    /**\r\n     * 推送退出群组通知 2004，通知给管理员和操作人\r\n     */\r\n    GroupCommand[GroupCommand[\"EXIT_GROUP\"] = 2004] = \"EXIT_GROUP\";\r\n    /**\r\n     * 推送修改群成员通知 2005，通知给管理员和被操作人\r\n     */\r\n    GroupCommand[GroupCommand[\"UPDATED_MEMBER\"] = 2005] = \"UPDATED_MEMBER\";\r\n    /**\r\n     * 推送删除群成员通知 2006，通知给所有群成员和被踢人\r\n     */\r\n    GroupCommand[GroupCommand[\"DELETED_MEMBER\"] = 2006] = \"DELETED_MEMBER\";\r\n    /**\r\n     * 推送解散群通知 2007，通知所有人\r\n     */\r\n    GroupCommand[GroupCommand[\"DESTROY_GROUP\"] = 2007] = \"DESTROY_GROUP\";\r\n    /**\r\n     * 推送转让群主 2008，通知所有人\r\n     */\r\n    GroupCommand[GroupCommand[\"TRANSFER_GROUP\"] = 2008] = \"TRANSFER_GROUP\";\r\n    /**\r\n     * 禁言群 2009，通知所有人\r\n     */\r\n    GroupCommand[GroupCommand[\"MUTE_GROUP\"] = 2009] = \"MUTE_GROUP\";\r\n    /**\r\n     * 解除禁言 2011\r\n     */\r\n    GroupCommand[GroupCommand[\"UNMUTE_GROUP\"] = 2011] = \"UNMUTE_GROUP\";\r\n    /**\r\n     * 禁言/解禁 群成员 2010，通知管理员和被操作人\r\n     */\r\n    GroupCommand[GroupCommand[\"SPEAK_GROUP_MEMBER\"] = 2010] = \"SPEAK_GROUP_MEMBER\";\r\n    /**\r\n     * 群聊消息收发   2104\r\n     */\r\n    GroupCommand[GroupCommand[\"MSG_GROUP\"] = 2104] = \"MSG_GROUP\";\r\n    /**\r\n     * 群聊消息收发同步消息   2105\r\n     */\r\n    GroupCommand[GroupCommand[\"MSG_GROUP_SYNC\"] = 2105] = \"MSG_GROUP_SYNC\";\r\n    /**\r\n     * 群聊消息已读指令\r\n     */\r\n    GroupCommand[GroupCommand[\"MSG_GROUP_READED\"] = 2106] = \"MSG_GROUP_READED\";\r\n    /**\r\n     * 群聊消息已读同步\r\n     */\r\n    GroupCommand[GroupCommand[\"MSG_GROUP_READED_SYNC\"] = 2053] = \"MSG_GROUP_READED_SYNC\";\r\n    /**\r\n     * 群聊消息已读回执\r\n     */\r\n    GroupCommand[GroupCommand[\"MSG_GROUP_READED_RECEIPT\"] = 2054] = \"MSG_GROUP_READED_RECEIPT\";\r\n    /**\r\n     * 群聊消息ACK 2047\r\n     */\r\n    GroupCommand[GroupCommand[\"GROUP_MSG_ACK\"] = 2047] = \"GROUP_MSG_ACK\";\r\n})(GroupCommand || (GroupCommand = {}));\r\nexports.GroupCommand = GroupCommand;\r\nvar SystemCommand;\r\n(function (SystemCommand) {\r\n    //心跳 9999\r\n    SystemCommand[SystemCommand[\"PING\"] = 9999] = \"PING\";\r\n    //登陸  9000\r\n    SystemCommand[SystemCommand[\"LOGIN\"] = 9000] = \"LOGIN\";\r\n    //登录 ack  9001\r\n    SystemCommand[SystemCommand[\"LOGIN_ACK\"] = 9001] = \"LOGIN_ACK\";\r\n    //下线通知 用于多端互斥  9002\r\n    SystemCommand[SystemCommand[\"MUTUAL_LOGIN\"] = 9002] = \"MUTUAL_LOGIN\";\r\n    //登出  9003\r\n    SystemCommand[SystemCommand[\"LOGOUT\"] = 9003] = \"LOGOUT\";\r\n})(SystemCommand || (SystemCommand = {}));\r\nexports.SystemCommand = SystemCommand;\r\nvar UserEventCommand;\r\n(function (UserEventCommand) {\r\n    // 4000\r\n    UserEventCommand[UserEventCommand[\"USER_MODIFY\"] = 4000] = \"USER_MODIFY\";\r\n    // 4001\r\n    UserEventCommand[UserEventCommand[\"USER_ONLINE_STATUS_CHANGE\"] = 4001] = \"USER_ONLINE_STATUS_CHANGE\";\r\n    // 4002 在线状态订阅\r\n    UserEventCommand[UserEventCommand[\"USER_ONLINE_STATUS_SUBSCRIBE\"] = 4002] = \"USER_ONLINE_STATUS_SUBSCRIBE\";\r\n    // 4003 用户自定义在线状态通知报文——发送给订阅当前用户在线状态的其他用户（service - TCP）\r\n    UserEventCommand[UserEventCommand[\"USER_CUSTOM_STATUS_CHANGE_NOTIFY\"] = 4003] = \"USER_CUSTOM_STATUS_CHANGE_NOTIFY\";\r\n    // 4004 用户在线状态通知报文\r\n    UserEventCommand[UserEventCommand[\"USER_ONLINE_STATUS_CHANGE_NOTIFY\"] = 4004] = \"USER_ONLINE_STATUS_CHANGE_NOTIFY\";\r\n    // 4005 用户在线状态通知同步报文——发送给当前用户的其他在线端（service - TCP）\r\n    UserEventCommand[UserEventCommand[\"USER_ONLINE_STATUS_CHANGE_NOTIFY_SYNC\"] = 4005] = \"USER_ONLINE_STATUS_CHANGE_NOTIFY_SYNC\";\r\n})(UserEventCommand || (UserEventCommand = {}));\r\nexports.UserEventCommand = UserEventCommand;\r\nvar ConversationEventCommand;\r\n(function (ConversationEventCommand) {\r\n    //5000 会话删除\r\n    ConversationEventCommand[ConversationEventCommand[\"CONVERSATION_DELETE\"] = 5000] = \"CONVERSATION_DELETE\";\r\n    //5001 会话修改\r\n    ConversationEventCommand[ConversationEventCommand[\"CONVERSATION_UPDATE\"] = 5001] = \"CONVERSATION_UPDATE\";\r\n})(ConversationEventCommand || (ConversationEventCommand = {}));\r\nexports.ConversationEventCommand = ConversationEventCommand;\r\n","\"use strict\";\r\nexports.__esModule = true;\r\nexports.MessagePack = void 0;\r\nvar utils_1 = require(\"../common/utils\");\r\n/**\r\n * 消息包\r\n */\r\nvar MessagePack = /** @class */ (function () {\r\n    function MessagePack(appId) {\r\n        this.messageId = utils_1[\"default\"].uuid();\r\n        this.appId = appId;\r\n        this.messageRandom = this.RangeInteger(0, 10000);\r\n        this.messageTime = Date.parse(new Date().toString());\r\n    }\r\n    /**\r\n     * 生成随机数\r\n     *\r\n     * @param min 最小值\r\n     * @param max 最大值\r\n     */\r\n    MessagePack.prototype.RangeInteger = function (min, max) {\r\n        var range = max - min;\r\n        return Math.floor(Math.random() * range) + min;\r\n    };\r\n    /**\r\n     * 封装了文本消息，消息体是 {type:number,content:any} 标识消息的发送类型， 1 为 文本消息\r\n     *\r\n     * @param fromId 发送者\r\n     * @param toId 接收者\r\n     * @param text 消息内容\r\n     */\r\n    MessagePack.prototype.buildTextMessagePack = function (fromId, toId, text) {\r\n        this.fromId = fromId;\r\n        this.toId = toId;\r\n        var body = { type: 1, content: text };\r\n        this.messageBody = utils_1[\"default\"].json(body);\r\n    };\r\n    /**\r\n     * 构建群聊文本消息\r\n     * @param fromId\r\n     * @param groupId\r\n     * @param text\r\n     */\r\n    MessagePack.prototype.buildGroupTextMessagePack = function (fromId, groupId, text) {\r\n        this.fromId = fromId;\r\n        this.groupId = groupId;\r\n        var body = { type: 1, content: text };\r\n        this.messageBody = utils_1[\"default\"].json(body);\r\n    };\r\n    /**\r\n     * 自定义消息类型\r\n     *\r\n     * @param fromId 发送者 id\r\n     * @param toId 接收者 id\r\n     * @param type 消息类型： 1 文本消息 -- 其他有待后续扩展\r\n     * @param obj 消息内容\r\n     */\r\n    MessagePack.prototype.buildCustomerMessagePack = function (fromId, toId, type, obj) {\r\n        this.fromId = fromId;\r\n        this.toId = toId;\r\n        var body = { type: type, content: obj };\r\n        this.messageBody = utils_1[\"default\"].json(body);\r\n    };\r\n    return MessagePack;\r\n}());\r\nexports.MessagePack = MessagePack;\r\n"],"sourceRoot":""}